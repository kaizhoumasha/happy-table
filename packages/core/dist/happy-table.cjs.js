var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},s=(n,r,a)=>(a=n==null?{}:e(i(n)),o(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n));const c=require(`./logger-DYZU5RTs.cjs`),l=require(`./column-management-plugin-BXQSSUQ_.cjs`),u=require(`./browser-optimization-BvGvv3w1.cjs`),d=require(`./sorting-plugin-BeI9gccD.cjs`),f=require(`./filtering-plugin-CR1F2Smm.cjs`),p=require(`./selection-plugin-dIYfSM0K.cjs`),m=require(`./cell-editing-plugin-MA1Py1qS.cjs`),h=require(`./keyboard-navigation-plugin-Dd7Ft4I4.cjs`),g=require(`./drag-drop-plugin-CX0SRuFH.cjs`);let _=require(`vue`);_=s(_);var v={sampleSize:500,enumMaxUnique:50,enumMaxUniqueRatio:.2,locale:`en-US`},y=[`$`,`€`,`£`,`¥`,`￥`,`₩`,`₹`];function b(e){return e==null}function x(e){if(typeof e==`boolean`)return!0;if(typeof e==`number`)return e===0||e===1;if(typeof e==`string`){let t=e.trim().toLowerCase();return t===`true`||t===`false`}return!1}function S(e){if(typeof e!=`string`)return!1;let t=e.trim();if(!t.endsWith(`%`))return!1;let n=t.slice(0,-1).replace(/[,\s]/g,``);return n.length>0&&!isNaN(Number(n))}function C(e){if(typeof e!=`string`)return!1;let t=e.trim();if(!t||!y.some(e=>t.includes(e)))return!1;let n=t.replace(/[\p{Sc},\s]/gu,``);return n.length>0&&!isNaN(Number(n))}function w(e){if(typeof e==`number`)return Number.isFinite(e);if(typeof e==`string`){let t=e.trim();if(!t)return!1;let n=t.replace(/,/g,``);return n.length>0&&!isNaN(Number(n))}return!1}function T(e){let t=e.trim();return/^\d{4}-\d{2}-\d{2}$/.test(t)?{isDate:!0,isDateTime:!1}:/^\d{4}-\d{2}-\d{2}[T\s]\d{2}:\d{2}(:\d{2})?/.test(t)?{isDate:!1,isDateTime:!0}:{isDate:!1,isDateTime:!1}}function E(e){if(e instanceof Date&&!isNaN(e.getTime()))return`datetime`;if(typeof e==`string`){let{isDate:t,isDateTime:n}=T(e);if(t||n)return t?`date`:`datetime`;let r=D(e);if(r!==`none`)return r;let i=new Date(e);if(!isNaN(i.getTime())){let t=e.toLowerCase();return t.includes(`t`)||/\d{2}:\d{2}/.test(t)?`datetime`:`date`}}return`none`}function D(e,t){let n=e.trim();if(!n)return`none`;if(/^(\d{4})年(\d{1,2})月(\d{1,2})日(?:\s+\d{1,2}:\d{2}(?::\d{2})?)?$/.test(n))return n.includes(`:`)?`datetime`:`date`;if(/^(\d{4})[/.](\d{1,2})[/.](\d{1,2})(?:[ T]\d{1,2}:\d{2}(?::\d{2})?)?$/.test(n))return/\d{1,2}:\d{2}/.test(n)?`datetime`:`date`;let r=n.match(/^(\d{1,2})[-/.](\d{1,2})[-/.](\d{2,4})(?:[ T]\d{1,2}:\d{2}(?::\d{2})?)?$/);if(r){let e=parseInt(r[1],10),i=parseInt(r[2],10),a=parseInt(r[3],10),o=/\d{1,2}:\d{2}/.test(n);if(e>12&&i<=12||i>12&&e<=12)return o?`datetime`:`date`;if(t){let e=t.toLowerCase();if(e.includes(`en-us`)||e.includes(`en-gb`)||e.includes(`zh-cn`)||e.includes(`de`)||e.includes(`fr`)||e.includes(`es`))return o?`datetime`:`date`}if(a>=1900&&a<=2100&&e>=1&&e<=31&&i>=1&&i<=31)return o?`datetime`:`date`}return`none`}function O(e,t={}){let{sampleSize:n,enumMaxUnique:r,enumMaxUniqueRatio:i}={...v,...t},a=[];for(let t=0;t<e.length&&a.length<n;t++)a.push(e[t]);let o=0,s=0,c=0,l=0,u=0,d=0,f=0,p=0,m=0,h=0,g=0,_=0,y=new Set;for(let e of a){if(b(e))continue;if(o++,y.add(String(e)),x(e)&&s++,S(e)&&l++,C(e)&&u++,typeof e==`object`&&e&&!(e instanceof Date)&&h++,typeof e==`string`){g++;let t=e;(t.includes(`
`)||t.includes(`\r`))&&_++;let n=t.trim();if(n.startsWith(`{`)&&n.endsWith(`}`)||n.startsWith(`[`)&&n.endsWith(`]`)){let e=!1;try{JSON.parse(n),e=!0}catch{e=!1}e&&h++}w(e)&&c++}else w(e)&&c++;if(typeof e==`string`){let t=e.trim();if(/^P(?=\d|T)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(\d+H)?(\d+M)?(\d+S)?)?$/i.test(t))m++;else if(/(\d+\s+(years?|months?|weeks?|days?|hours?|hrs?|minutes?|mins?|seconds?|secs?))/i.test(t))m++;else{let e=t.match(/^(\d{1,3}):(\d{2})(?::(\d{2})(?:\.(\d{1,3}))?)?(?:\s*(AM|PM))?$/i);if(e){let t=parseInt(e[1],10),n=parseInt(e[2],10),r=e[3]?parseInt(e[3],10):0;t>=24||n>=60||r>=60?m++:p++}}}let n=typeof e==`string`&&D(e,t.locale)||E(e);n===`date`&&d++,n===`datetime`&&f++}if(o===0)return`text`;let T=s/o,O=c/o,k=l/o,A=u/o,j=(d+f)/o,M=p/o,N=m/o,P=h/o,F=g>0?_/g:0;if(T>=.95)return`boolean`;if(k>=.9)return`percentage`;if(A>=.9)return`currency`;if(P>=.9)return`json`;if(j>=.9)return f/(d+f)>=.2?`datetime`:`date`;if(M>=.9)return`time`;if(N>=.9)return`interval`;if(O>=.95)return`number`;let I=y.size,L=I/o;return I>0&&I<=r&&L<=i&&o>=10?`enum`:F>=.3?`multiline`:`text`}function k(e,t,n={}){if(t.options&&Array.isArray(t.options))return`enum`;let r=[],i=t.field,{sampleSize:a=v.sampleSize}=n;for(let t=0;t<e.length&&r.length<a;t++)r.push(e[t]?.[i]);let o=n.locale||t.locale;return O(r,{...n,locale:o})}var A=class{logger=c.createLogger(`CorePluginRegistry`);plugins=new Map;loadOrder=[];extensions=new Map;api;constructor(e){this.api=e}async register(e){try{if(!e.name||typeof e.install!=`function`)throw Error(`Invalid plugin: missing name or install function`);if(this.plugins.has(e.name))throw Error(`Plugin '${e.name}' is already registered`);return this.plugins.set(e.name,e),await this.installPlugin(e),this.loadOrder.push(e.name),{success:!0}}catch(t){let n={type:`installation`,message:t instanceof Error?t.message:`Unknown error`,name:t instanceof Error?t.name:`PluginInstallationError`,timestamp:Date.now(),stack:t instanceof Error?t.stack:void 0};return this.notifyExtensions(`plugin-error`,{plugin:e.name,error:n}),{success:!1,error:n}}}async unregister(e){let t=this.plugins.get(e);if(!t)return{success:!1,error:{type:`installation`,message:`Plugin '${e}' not found`,name:`PluginNotFoundError`,timestamp:Date.now()}};try{return t.cleanup&&await t.cleanup(),this.plugins.delete(e),this.loadOrder=this.loadOrder.filter(t=>t!==e),this.notifyExtensions(`plugin-unregistered`,{plugin:e}),{success:!0}}catch(e){return{success:!1,error:{type:`installation`,message:e instanceof Error?e.message:`Cleanup failed`,name:e instanceof Error?e.name:`PluginCleanupError`,timestamp:Date.now(),stack:e instanceof Error?e.stack:void 0}}}}get(e){return this.plugins.get(e)}list(){return Array.from(this.plugins.values())}getLoadOrder(){return[...this.loadOrder]}use(e){return this.extensions.has(e.name)?(this.logger.warn(`Extension '${e.name}' is already installed`),this):(this.extensions.set(e.name,e),e.install(this),this)}unuse(e){let t=this.extensions.get(e);return t&&(t.uninstall?.(),this.extensions.delete(e)),this}getExtension(e){return this.extensions.get(e)}async installPlugin(e){let t=this.getExtension(`capabilities`),n=t?t.createGetter():()=>void 0;await e.install(this.api,n)}notifyExtensions(e,t){this.extensions.forEach(n=>{try{`onEvent`in n&&typeof n.onEvent==`function`&&n.onEvent(e,t)}catch(t){this.logger.warn(`Extension '${n.name}' error in event '${e}':`,t)}})}async cleanup(){let e=[...this.loadOrder].reverse();for(let t of e)await this.unregister(t);for(let e of this.extensions.values())e.uninstall?.();this.extensions.clear()}},j=class{name=`capabilities`;capabilities=new Map;logger=c.createLogger(`CapabilityExtension`);install(e){this.initializeDefaultCapabilities()}uninstall(){this.capabilities.clear()}register(e,t){this.capabilities.set(e,t)}get(e){return this.capabilities.get(e)}list(){return Array.from(this.capabilities.keys())}createGetter(){return e=>this.get(e)}initializeDefaultCapabilities(){this.initializeDataPipelineCapability(),this.initializeAsyncTasksCapability(),this.initializeWebSocketCapability(),this.initializeAICapability()}initializeDataPipelineCapability(){let e=new Map;this.register(`data-pipeline`,{registerDataInterceptor:(t,n)=>{e.has(t)||e.set(t,[]);let r=e.get(t),i=r.findIndex(e=>e.name===n.name);i===-1?(r.push(n),r.sort((e,t)=>t.priority-e.priority)):r[i]=n},removeDataInterceptor:(t,n)=>{let r=e.get(t);if(r){let e=r.findIndex(e=>e.name===n);e!==-1&&r.splice(e,1)}},getDataPipeline:()=>{let t=[];for(let[n,r]of e)t.push(...r);return t},processData:(t,n)=>{let r=e.get(n);if(!r||r.length===0)return t;let i=t;for(let e of r)if(e.enabled!==!1)try{i=e.transform(i)}catch(t){this.logger.error(`Error in interceptor ${e.name}:`,t)}return i},clearPipeline:t=>{t?e.delete(t):e.clear()}})}initializeAsyncTasksCapability(){let e=new Map,t=0;this.register(`async-tasks`,{scheduleAsyncTask:async n=>{let r=`task-${++t}-${Date.now()}`,i={id:r,name:n.name,status:`pending`,startTime:Date.now()};return e.set(r,i),setTimeout(async()=>{try{i.status=`running`;let e=await n.execute();i.status=`completed`,i.result=e,i.endTime=Date.now()}catch(e){i.status=`failed`,i.error=e,i.endTime=Date.now()}},n.priority===`high`?0:10),r},cancelTask:t=>{let n=e.get(t);return n&&(n.status===`pending`||n.status===`running`)?(n.status=`cancelled`,n.endTime=Date.now(),!0):!1},getTaskStatus:t=>e.get(t)||{id:t,name:`unknown`,status:`failed`,error:Error(`Task not found`)},getAllTasks:()=>new Map(e),onTaskComplete:()=>{},onTaskError:()=>{},clearCompletedTasks:()=>{for(let[t,n]of e)[`completed`,`failed`,`cancelled`].includes(n.status)&&e.delete(t)}})}initializeWebSocketCapability(){this.register(`websocket`,{connect:async()=>({id:`ws-${Date.now()}`,url:``,readyState:1,send:()=>{},close:()=>{},addEventListener:()=>{},removeEventListener:()=>{}}),disconnect:()=>{},subscribe:()=>()=>{},unsubscribe:()=>{},broadcast:()=>{},getConnection:()=>null,getConnectionState:()=>`disconnected`})}initializeAICapability(){this.register(`ai`,{analyzeData:async()=>({summary:`Stub analysis`,patterns:[],recommendations:[],statistics:{totalRecords:0,fields:{}},confidence:.8}),detectAnomalies:async()=>[],suggestOptimizations:async()=>[],generateSummary:async()=>({recordCount:0,fieldSummaries:[],insights:[],quality:{completeness:1,consistency:1,accuracy:1}}),predictTrends:async(e,t)=>({field:t,predictions:[],trend:`stable`,accuracy:.75}),classifyData:async(e,t)=>({field:t,categories:[],confidence:.8})})}},M=class{name=`error-handling`;errors=new Map;mode=`production`;onErrorCallback;logger=c.createLogger(`ErrorHandlingExtension`);constructor(e={}){this.mode=e.mode||`production`,this.onErrorCallback=e.onError}install(e){}onEvent(e,t){e===`plugin-error`&&this.handleError(t.error,t.plugin)}handleError(e,t){if(this.errors.set(t,e),this.mode===`development`)throw this.logger.error(`Plugin error in ${t}:`,e),Error(`Plugin '${t}' failed: ${e.message}`);this.logger.warn(`Plugin error in ${t}:`,e.message),this.onErrorCallback?.(e,t)}getErrors(){return new Map(this.errors)}clearErrors(){this.errors.clear()}async recover(e){return this.errors.delete(e),!0}},N=class{name=`monitoring`;healthData=new Map;metrics={totalOperations:0,successfulOperations:0,failedOperations:0,averageOperationTime:0};install(e){}onEvent(e,t){e===`plugin-error`?this.recordError(t.plugin):e===`plugin-unregistered`&&this.recordSuccess()}recordError(e){let t=this.healthData.get(e)||{pluginName:e,healthy:!0,errorCount:0,healthScore:100,recoveryAttempts:0};t.errorCount++,t.healthy=t.errorCount<3,t.healthScore=Math.max(0,100-t.errorCount*20),this.healthData.set(e,t),this.metrics.failedOperations++}recordSuccess(){this.metrics.successfulOperations++}getHealth(e){if(e)return this.healthData.get(e)||{pluginName:e,healthy:!0,errorCount:0,healthScore:100,recoveryAttempts:0};let t=Array.from(this.healthData.values()),n=t.filter(e=>e.healthy).length,r=t.length;return{overallHealth:r>0?n/r*100:100,totalPlugins:r,healthyPlugins:n,criticalIssues:t.filter(e=>e.healthScore<30).length,recommendations:this.generateRecommendations(t)}}generateRecommendations(e){let t=[],n=e.filter(e=>e.healthScore<30);return n.length>0&&t.push(`${n.length} plugins need immediate attention`),t}};function P(e,t={}){let n=new A(e),r=t.mode===`auto`?process.env.NODE_ENV===`development`?`development`:`production`:t.mode||`production`;return t.enableCapabilities!==!1&&n.use(new j),t.enableErrorHandling!==!1&&n.use(new M({mode:r,onError:t.onError})),t.enableMonitoring!==!1&&n.use(new N),n}const F=P;function I(e){let{count:t,getItemSize:n,overscan:r=5,enabled:i=(0,_.ref)(!0)}=e,a=(0,_.ref)(null),o=(0,_.ref)({height:0,width:0}),s=(0,_.ref)(0),c=[],l=[],u=()=>{c.length=0,l.length=0},d=(e,t)=>{let n=c[e];c[e]=t,n!==t&&(l.length=Math.min(l.length,e))},f=e=>{if(e<0)return 0;let t=c[e];if(t!==void 0)return t;let r=n(e);return d(e,r),r},p=e=>{if(e<0)return 0;let t=l[e];if(t!==void 0)return t;let n=e;for(;n>=0&&l[n]===void 0;)n--;let r=n>=0?l[n]:0;for(let t=n+1;t<=e;t++)r+=f(t),l[t]=r;return l[e]},m=e=>p(e-1),h=e=>p(e);(0,_.watch)(t,()=>{u()});let g=e=>{let n=t.value;if(n===0)return 0;let r=Math.max(0,e),i=0,a=n-1,o=n-1;for(;i<=a;){let e=Math.floor((i+a)/2);h(e)>r?(o=e,a=e-1):i=e+1}return o},v=e=>{let n=t.value;if(n===0)return 0;let r=Math.max(0,e),i=0,a=n-1,o=n;for(;i<=a;){let e=Math.floor((i+a)/2);m(e)>=r?(o=e,a=e-1):i=e+1}return o},y=(0,_.computed)(()=>t.value===0?0:p(t.value-1)),b=(0,_.computed)(()=>{let e=t.value;if(e===0)return{start:0,end:-1};if(!i.value||o.value.height===0)return{start:0,end:e-1};let n=g(s.value),a=s.value+o.value.height,c=v(a),l=c>=e?e-1:Math.max(n,Math.max(c-1,n)),u=r;D>2?u=Math.min(r*4,20):D>.5&&(u=Math.min(r*2,12));let d=Math.max(0,n-u),f=Math.min(e-1,l+u);return{start:d,end:f}}),x=(0,_.computed)(()=>{let e=t.value;if(e===0)return[];if(!i.value){let t=[];for(let n=0;n<e;n++){let e=m(n),r=f(n);t.push({index:n,start:e,size:r,end:e+r})}return t}let n=[],{start:r,end:a}=b.value;if(r<0||a<r)return n;for(let e=r;e<=a;e++){let t=m(e),r=f(e);n.push({index:e,start:t,size:r,end:t+r})}return n}),S=(0,_.computed)(()=>x.value[0]?.index??0),C=(0,_.computed)(()=>x.value[x.value.length-1]?.index??0),w=null,T=0,E=0,D=0,O=e=>{let t=e.target,n=performance.now(),r=t.scrollTop,i=n-E;i>0&&(D=Math.abs(r-T)/i),T=r,E=n,w&&cancelAnimationFrame(w),w=requestAnimationFrame(()=>{s.value=r,w=null})},k=(e,n=`start`)=>{if(!a.value||!i.value||t.value===0)return;let r=t.value,s=Math.min(Math.max(e,0),r-1),c=m(s),l=f(s),u=o.value.height;switch(n){case`center`:c-=(u-l)/2;break;case`end`:c-=u-l;break;case`start`:default:break}let d=Math.max(0,y.value-u);c=Math.max(0,Math.min(c,d)),a.value.scrollTop=c},A=e=>{o.value=e};(0,_.watch)(a,(e,t)=>{t&&t.removeEventListener(`scroll`,O),e&&e.addEventListener(`scroll`,O,{passive:!0})},{immediate:!0}),(0,_.onUnmounted)(()=>{a.value&&a.value.removeEventListener(`scroll`,O),w&&cancelAnimationFrame(w),j&&clearTimeout(j),u()});let j=null;return{scrollElement:a,totalSize:y,virtualItems:x,startIndex:S,endIndex:C,scrollToIndex:k,setContainerSize:A,updateScrollPosition:e=>{s.value=e}}}function L(e,t,n=20){let r=Math.min(Math.abs(t)/50,1),i=Math.floor(e+r*(n-e));return Math.min(i,n)}function R(e){let{columns:t,getColumnWidth:n,overscan:r=3,enabled:i=(0,_.ref)(!0)}=e,a=(0,_.ref)(null),o=(0,_.ref)({width:0,height:0}),s=(0,_.ref)(0),c=(0,_.ref)(0),l=(0,_.ref)(0),u=[],d=[],f=()=>{u.length=0,d.length=0},p=(e,t)=>{let n=u[e];u[e]=t,n!==t&&(d.length=Math.min(d.length,e))},m=e=>{if(e<0)return 0;let t=u[e];if(t!==void 0)return t;let r=n(e);return p(e,r),r},h=e=>{if(e<0)return 0;let t=d[e];if(t!==void 0)return t;let n=e;for(;n>=0&&d[n]===void 0;)n--;let r=n>=0?d[n]:0;for(let t=n+1;t<=e;t++)r+=m(t),d[t]=r;return d[e]},g=e=>h(e-1),v=e=>h(e);(0,_.watch)(t,()=>{f()},{deep:!0});let y=e=>{let n=t.value.length;if(n===0)return 0;let r=Math.max(0,e),i=0,a=n-1,o=n-1;for(;i<=a;){let e=Math.floor((i+a)/2);v(e)>r?(o=e,a=e-1):i=e+1}return o},b=e=>{let n=t.value.length;if(n===0)return 0;let r=Math.max(0,e),i=0,a=n-1,o=n;for(;i<=a;){let e=Math.floor((i+a)/2);g(e)>=r?(o=e,a=e-1):i=e+1}return o},x=(0,_.computed)(()=>{let e=t.value.length;return e===0?0:h(e-1)}),S=(0,_.computed)(()=>{let e=t.value.length;if(e===0)return{start:0,end:-1};if(!i.value||o.value.width===0)return{start:0,end:e-1};let n=y(s.value),a=s.value+o.value.width,c=b(a),u=c>=e?e-1:Math.max(n,Math.max(c-1,n)),d=L(r,l.value),f=Math.max(0,n-d),p=Math.min(e-1,u+d);return{start:f,end:p}}),C=(0,_.computed)(()=>{let e=t.value.length;if(e===0)return[];if(!i.value){let t=[];for(let n=0;n<e;n++){let e=g(n),r=m(n);t.push({index:n,start:e,size:r,end:e+r})}return t}let n=[],{start:r,end:a}=S.value;if(r<0||a<r)return n;for(let e=r;e<=a;e++){let t=g(e),r=m(e);n.push({index:e,start:t,size:r,end:t+r})}return n}),w=(0,_.computed)(()=>C.value[0]?.index??0),T=(0,_.computed)(()=>C.value[C.value.length-1]?.index??0),E=null,D=e=>{let t=e.target;E&&cancelAnimationFrame(E),E=requestAnimationFrame(()=>{let e=t.scrollLeft;l.value=e-c.value,c.value=e,s.value=e,E=null})},O=(e,n=`start`)=>{if(!a.value||!i.value||t.value.length===0)return;let r=t.value.length,s=Math.min(Math.max(e,0),r-1),c=g(s),l=m(s),u=o.value.width;switch(n){case`center`:c-=(u-l)/2;break;case`end`:c-=u-l;break;case`start`:default:break}let d=Math.max(0,x.value-u);c=Math.max(0,Math.min(c,d)),a.value.scrollLeft=c},k=e=>{o.value=e};(0,_.watch)(a,(e,t)=>{t&&t.removeEventListener(`scroll`,D),e&&e.addEventListener(`scroll`,D,{passive:!0})},{immediate:!0}),(0,_.onUnmounted)(()=>{a.value&&a.value.removeEventListener(`scroll`,D),E&&cancelAnimationFrame(E),A&&clearTimeout(A),f()});let A=null;return{scrollElement:a,totalWidth:x,virtualColumns:C,startIndex:w,endIndex:T,scrollToColumn:O,setContainerSize:k,updateScrollPosition:e=>{s.value=e}}}function z(e){let{count:t,getItemSize:n,overscanCount:r=5,enableDynamicOverscan:i=!0,scrollingDelay:a=150,itemKey:o=e=>e,enabled:s=(0,_.ref)(!0)}=e,c=(0,_.ref)(null),l=(0,_.ref)({height:0,width:0}),u=(0,_.ref)(0),d=(0,_.ref)(0),f=(0,_.ref)(!1),p=(0,_.ref)(0),m=(0,_.ref)({scrollVelocity:0,renderTime:0,visibleItems:0,totalHeight:0,lastUpdateTime:0}),h=0,g=0,v=null,y=e=>{let t=e.target,n=performance.now(),r=t.scrollTop;u.value=r,d.value=t.scrollLeft;let i=n-h,o=Math.abs(r-g);i>0&&(p.value=o/i,m.value.scrollVelocity=p.value),h=n,g=r,f.value=!0,v&&clearTimeout(v),v=window.setTimeout(()=>{f.value=!1,p.value=0},a)};class b{cache=new Map;accessOrder=[];maxSize=1e3;get(e){if(this.cache.has(e)){let t=this.accessOrder.indexOf(e);return t>-1&&this.accessOrder.splice(t,1),this.accessOrder.push(e),this.cache.get(e)}}set(e,t){if(this.cache.has(e)){this.cache.set(e,t);return}if(this.cache.size>=this.maxSize){let e=this.accessOrder.shift();e!==void 0&&this.cache.delete(e)}this.cache.set(e,t),this.accessOrder.push(e)}clear(){this.cache.clear(),this.accessOrder=[]}}let x=new b,S=e=>{let t=x.get(e);return t===void 0&&(t=n(e),x.set(e,t)),t},C=()=>{if(!i)return r;let e=Math.min(p.value/10,3);return Math.ceil(r*(1+e))},w=(0,_.computed)(()=>{if(!s.value||t.value===0)return 0;let e=performance.now(),n=0;for(let e=0;e<t.value;e++)n+=S(e);return m.value.renderTime=performance.now()-e,m.value.totalHeight=n,n}),T=(0,_.computed)(()=>{if(!s.value||t.value===0||l.value.height===0)return{start:0,end:t.value-1};let e=l.value.height,n=u.value,r=0,i=t.value-1;for(;r<=i;){let e=Math.floor((r+i)/2),t=0;for(let n=0;n<=e;n++)t+=S(n);t<=n?r=e+1:i=e-1}let a=Math.max(0,r-1),o=0,c=a;for(let n=a;n<t.value;n++){if(o+=S(n),o>=e){c=n;break}c=n}let d=C(),f=Math.max(0,a-d),p=Math.min(t.value-1,c+d);return{start:f,end:p}}),E=(0,_.computed)(()=>{let e=performance.now();if(!s.value||t.value===0){let e=[],n=0;for(let r=0;r<t.value;r++){let t=S(r);e.push({index:r,start:n,size:t,end:n+t,key:o(r)}),n+=t}return m.value.visibleItems=e.length,e}let n=[],{start:r,end:i}=T.value,a=0;for(let e=0;e<r;e++)a+=S(e);for(let e=r;e<=i;e++){let t=S(e);n.push({index:e,start:a,size:t,end:a+t,key:o(e)}),a+=t}return m.value.visibleItems=n.length,m.value.renderTime=performance.now()-e,m.value.lastUpdateTime=performance.now(),n}),D=(0,_.computed)(()=>E.value[0]?.index??0),O=(0,_.computed)(()=>E.value[E.value.length-1]?.index??0);return(0,_.watch)(c,(e,t)=>{t&&t.removeEventListener(`scroll`,y),e&&e.addEventListener(`scroll`,y,{passive:!0})},{immediate:!0}),(0,_.watch)(t,()=>{x.clear()}),(0,_.onUnmounted)(()=>{c.value&&c.value.removeEventListener(`scroll`,y),v&&clearTimeout(v),x.clear()}),{scrollElement:c,totalSize:w,virtualItems:E,startIndex:D,endIndex:O,isScrolling:(0,_.computed)(()=>f.value),metrics:(0,_.computed)(()=>m.value),scrollToIndex:(e,t=`start`)=>{if(!c.value||!s.value)return;let n=0;for(let t=0;t<e;t++)n+=S(t);let r=S(e),i=l.value.height;switch(t){case`center`:n-=(i-r)/2;break;case`end`:n-=i-r;break;case`start`:default:break}n=Math.max(0,Math.min(n,w.value-i)),c.value.scrollTo({top:n,behavior:`smooth`})},scrollToOffset:e=>{c.value&&c.value.scrollTo({top:e,behavior:`smooth`})},setContainerSize:e=>{l.value=e}}}function B(e){let{paneConfig:t,rowCount:n,getRowSize:r,containerSize:i,rowData:a,overscan:o={rows:5,columns:3}}=e,s=(0,_.ref)(0),c=(0,_.ref)(0),l=I({count:n,getItemSize:r,overscan:o.rows||8,enabled:(0,_.computed)(()=>n.value>50)}),u=new Map,d=e=>{let t=e.id;if(u.has(t))return u.get(t);let n=e.width??150;return u.set(t,n),n};(0,_.watch)(()=>t.value.center.columns,()=>{u.clear()},{deep:!0});let f=(0,_.computed)(()=>t.value.center.columns.reduce((e,t)=>e+d(t),0)),p=(0,_.computed)(()=>{let e=t.value.center.columns,n=i.value.width,r=t.value.left.width,a=t.value.right.width,c=n-r-a;if(e.length===0||c<=0)return{start:0,end:-1};let l=0,u=0;for(let t=0;t<e.length;t++){let n=e[t];if(!n)continue;let r=d(n);if(u+r>s.value){l=t;break}u+=r}let f=l,p=0;for(let t=l;t<e.length;t++){let n=e[t];if(!n)continue;let r=d(n);if(p+=r,f=t,p>=c)break}let m=Math.max(0,l-(o.columns||3)),h=Math.min(e.length-1,f+(o.columns||3));return{start:m,end:h}}),m=(0,_.computed)(()=>{let e=t.value.center.columns,{start:n,end:r}=p.value;if(n>r)return[];let i=[],a=0;for(let t=0;t<n;t++){let n=e[t];n&&(a+=d(n))}for(let t=n;t<=r;t++){let n=e[t];if(!n)continue;let r=d(n);i.push({index:t,start:a,size:r,end:a+r,column:n}),a+=r}return i}),h=(0,_.computed)(()=>({columns:t.value.left.columns,rows:l.virtualItems.value,width:t.value.left.width})),g=(0,_.computed)(()=>({columns:t.value.right.columns,rows:l.virtualItems.value,width:t.value.right.width})),v=(0,_.computed)(()=>{let e=m.value,n=l.virtualItems.value,r=a.value,i=[];for(let t of n){let n=t.index,a=r[n],o=[];for(let t of e){let e=t.index,r=t.column;o.push({rowIndex:n,columnIndex:e,column:r,value:a?.[r.field],rowData:a||{}})}i.push(o)}return{virtualColumns:e,virtualRows:n,virtualCells:i,width:t.value.center.width,totalWidth:f.value}}),y=(0,_.computed)(()=>s.value),b=(0,_.computed)(()=>({width:f.value,height:l.totalSize.value})),x=(e,n)=>{l.scrollToIndex(e,`start`);let r=t.value.center.columns;n>=0&&n<r.length&&S(n,`start`)},S=(e,n=`start`)=>{let r=t.value.center.columns;if(e<0||e>=r.length)return;let a=i.value.width,o=t.value.left.width,c=t.value.right.width,l=a-o-c,u=0;for(let t=0;t<e;t++){let e=r[t];e&&(u+=d(e))}let p=r[e];if(!p)return;let m=d(p);switch(n){case`center`:u-=(l-m)/2;break;case`end`:u-=l-m;break;case`start`:default:break}let h=Math.max(0,f.value-l);u=Math.max(0,Math.min(u,h)),s.value=u};return(0,_.watch)(i,e=>{l.setContainerSize(e)},{immediate:!0}),(0,_.onUnmounted)(()=>{u.clear()}),{leftPane:h,centerPane:v,rightPane:g,scrollToCell:x,scrollToColumn:S,updateScrollPosition:e=>{c.value=e.top,s.value=e.left,l.updateScrollPosition(e.top)},headerScrollSync:y,totalDimensions:b,scrollLeft:s,scrollTop:c}}var V=c.createLogger(`MemoryManagement`),H=class{resources=new Set;timers=new Set;intervals=new Set;listeners=new Map;register(e){this.resources.add(e)}setTimeout(e,t){let n=window.setTimeout(e,t);return this.timers.add(n),n}setInterval(e,t){let n=window.setInterval(e,t);return this.intervals.add(n),n}addEventListener(e,t,n,r){e.addEventListener(t,n,r),this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push({event:t,handler:n,options:r})}clearTimeout(e){clearTimeout(e),this.timers.delete(e)}clearInterval(e){clearInterval(e),this.intervals.delete(e)}cleanup(){this.resources.forEach(e=>{try{e()}catch(e){V.warn(`Error during cleanup:`,{module:`MemoryManagement`},e)}}),this.timers.forEach(e=>clearTimeout(e)),this.intervals.forEach(e=>clearInterval(e)),this.listeners.forEach((e,t)=>{e.forEach(({event:e,handler:n,options:r})=>{t.removeEventListener(e,n,r)})}),this.resources.clear(),this.timers.clear(),this.intervals.clear(),this.listeners.clear()}},U=class{measurements=[];interval;onThreshold;threshold;constructor(e=5e3,t=200){this.threshold=t*1024*1024,this.interval=setInterval(()=>{this.measure()},e)}measure(){if(`memory`in performance){let e=performance.memory,t={timestamp:Date.now(),used:e.usedJSHeapSize,total:e.totalJSHeapSize};this.measurements.push(t),this.measurements.length>50&&this.measurements.shift(),this.onThreshold&&t.used>this.threshold&&this.onThreshold(t.used/(1024*1024))}}onMemoryThreshold(e){this.onThreshold=e}getCurrentUsage(){if(`memory`in performance){let e=performance.memory;return{used:e.usedJSHeapSize/(1024*1024),total:e.totalJSHeapSize/(1024*1024)}}return null}getHistory(){return[...this.measurements]}destroy(){clearInterval(this.interval),this.measurements=[],this.onThreshold=void 0}};function W(){let e=new H,t=new U,n=(0,_.ref)(null),r=(0,_.ref)(!1);t.onMemoryThreshold(e=>{r.value=!0,V.warn(`High memory usage detected: ${e.toFixed(2)}MB`)}),e.setInterval(()=>{n.value=t.getCurrentUsage()},5e3);let i=(0,_.watch)(r,t=>{if(t){if(`gc`in window)try{window.gc()}catch{V.warn(`GC not available`)}e.setTimeout(()=>{r.value=!1},1e4)}});return(0,_.onUnmounted)(()=>{i(),e.cleanup(),t.destroy()}),{resourceManager:e,memoryUsage:n,memoryWarning:r,getCurrentMemoryUsage:()=>t.getCurrentUsage(),getMemoryHistory:()=>t.getHistory(),forceCleanup:()=>{if(e.cleanup(),`gc`in window)try{window.gc()}catch{V.warn(`Manual GC failed`)}}}}var G=c.createLogger(`PerformanceMonitoring`),K=class{frames=0;lastTime=performance.now();fps=60;callbacks=new Set;rafId=null;isRunning=!1;start(){this.isRunning||(this.isRunning=!0,this.lastTime=performance.now(),this.frames=0,this.tick())}stop(){this.isRunning=!1,this.rafId&&=(cancelAnimationFrame(this.rafId),null)}onUpdate(e){return this.callbacks.add(e),()=>this.callbacks.delete(e)}get currentFPS(){return this.fps}tick(){if(!this.isRunning)return;this.frames++;let e=performance.now();e-this.lastTime>=1e3&&(this.fps=Math.round(this.frames*1e3/(e-this.lastTime)),this.frames=0,this.lastTime=e,this.callbacks.forEach(e=>e(this.fps))),this.rafId=requestAnimationFrame(()=>this.tick())}},ee=class{measurements=[];activeTimers=new Map;maxMeasurements=1e3;start(e){this.activeTimers.set(e,performance.now())}end(e){let t=this.activeTimers.get(e);if(!t)return G.warn(`No start time found for measurement: ${e}`),0;let n=performance.now()-t;return this.activeTimers.delete(e),this.measurements.push({name:e,duration:n,timestamp:Date.now()}),this.measurements.length>this.maxMeasurements&&this.measurements.shift(),n}getAverage(e,t=10){let n=this.measurements.filter(t=>t.name===e).slice(-t);return n.length===0?0:n.reduce((e,t)=>e+t.duration,0)/n.length}getAll(){return[...this.measurements]}clear(){this.measurements=[],this.activeTimers.clear()}},te=class{scrollEvents=[];frameCount=0;lastFrame=performance.now();isTracking=!1;start(){this.isTracking=!0,this.scrollEvents=[],this.frameCount=0,this.lastFrame=performance.now()}recordScroll(e){this.isTracking&&(this.scrollEvents.push({timestamp:performance.now(),position:e}),this.frameCount++)}stop(){if(!this.isTracking)return{avgFPS:0,scrollLatency:0,jankCount:0};this.isTracking=!1;let e=performance.now()-this.lastFrame,t=this.frameCount*1e3/e,n=0,r=0;for(let e=1;e<this.scrollEvents.length;e++){let t=this.scrollEvents[e].timestamp-this.scrollEvents[e-1].timestamp;n+=t,t>16.67&&r++}let i=n/(this.scrollEvents.length-1)||0;return{avgFPS:Math.round(t),scrollLatency:Math.round(i*100)/100,jankCount:r}}},q=class{metrics=(0,_.ref)({lcp:null,fid:null,cls:null,fcp:null,ttfb:null});constructor(){this.measureCoreWebVitals()}measureCoreWebVitals(){if(`PerformanceObserver`in window)try{new PerformanceObserver(e=>{let t=e.getEntries(),n=t[t.length-1];this.metrics.value.lcp=n.startTime}).observe({entryTypes:[`largest-contentful-paint`]}),new PerformanceObserver(e=>{let t=e.getEntries().find(e=>e.name===`first-contentful-paint`);t&&(this.metrics.value.fcp=t.startTime)}).observe({entryTypes:[`paint`]}),new PerformanceObserver(e=>{let t=0;for(let n of e.getEntries())n.hadRecentInput||(t+=n.value);this.metrics.value.cls=t}).observe({entryTypes:[`layout-shift`]}),new PerformanceObserver(e=>{let t=e.getEntries()[0];t&&(this.metrics.value.fid=t.processingStart-t.startTime)}).observe({entryTypes:[`first-input`]})}catch(e){G.warn(`Performance observer not fully supported:`,{module:`PerformanceMonitoring`},e)}if(`performance`in window&&`timing`in performance){let e=performance.timing;this.metrics.value.ttfb=e.responseStart-e.fetchStart}}getMetrics(){return this.metrics}},J=class{tests=new Map;results=[];addTest(e,t){this.tests.set(e,t)}async runAll(){this.results=[];for(let[e,t]of this.tests.entries())try{let n=await t(),r=this.evaluatePerformance(n);this.results.push({testName:e,metrics:n,passed:r})}catch(t){G.error(`Performance test failed: ${e}`,{module:`PerformanceMonitoring`},t),this.results.push({testName:e,metrics:this.getDefaultMetrics(),passed:!1})}return this.results}evaluatePerformance(e){let t={fps:55,avgRenderTime:16.67,memoryUsage:200,scrollLatency:20,interactionLatency:100};return e.fps>=t.fps&&e.avgRenderTime<=t.avgRenderTime&&e.memoryUsage<=t.memoryUsage&&e.scrollLatency<=t.scrollLatency&&e.interactionLatency<=t.interactionLatency}getDefaultMetrics(){return{fps:0,avgRenderTime:0,memoryUsage:0,scrollLatency:0,firstContentfulPaint:0,largestContentfulPaint:0,cumulativeLayoutShift:0,interactionLatency:0,timestamp:Date.now()}}getResults(){return this.results}generateReport(){let e=this.results.filter(e=>e.passed).length,t=this.results.length,n=`Performance Test Report
`;return n+=`========================
`,n+=`Passed: ${e}/${t}\n\n`,this.results.forEach(e=>{let t=e.passed?`✅`:`❌`;n+=`${t} ${e.testName}\n`,n+=`   FPS: ${e.metrics.fps}\n`,n+=`   Render Time: ${e.metrics.avgRenderTime.toFixed(2)}ms\n`,n+=`   Memory: ${e.metrics.memoryUsage.toFixed(2)}MB\n`,n+=`   Scroll Latency: ${e.metrics.scrollLatency.toFixed(2)}ms\n\n`}),n}};function ne(){let e=new K,t=new ee,n=new te,r=new q,i=(0,_.ref)(60),a=(0,_.ref)(!1),o=null,s=()=>{a.value||(a.value=!0,e.start(),o=e.onUpdate(e=>{i.value=e}))},c=()=>{a.value=!1,e.stop(),o&&=(o(),null)},l=async(e,n)=>(t.start(e),await n(),t.end(e)),u=()=>n.start(),d=e=>n.recordScroll(e),f=()=>n.stop(),p=()=>{let e=`memory`in performance?performance.memory:null;return{fps:i.value,avgRenderTime:t.getAverage(`render`),memoryUsage:e?e.usedJSHeapSize/(1024*1024):0,scrollLatency:0,firstContentfulPaint:r.getMetrics().value.fcp||0,largestContentfulPaint:r.getMetrics().value.lcp||0,cumulativeLayoutShift:r.getMetrics().value.cls||0,interactionLatency:r.getMetrics().value.fid||0,timestamp:Date.now()}};return(0,_.onUnmounted)(()=>{c(),t.clear()}),{currentFPS:i,isMonitoring:a,webVitalsMetrics:r.getMetrics(),startMonitoring:s,stopMonitoring:c,profileRender:l,trackScrollStart:u,trackScrollEvent:d,trackScrollEnd:f,getMetrics:p,getRenderStats:()=>t.getAll(),createPerformanceTest:(e,t)=>async()=>{let e=performance.now();await t(),await(0,_.nextTick)();let n=performance.now();return{...p(),avgRenderTime:n-e,timestamp:Date.now()}},createTestSuite:()=>new J}}async function Y(e,t,n=100){let r=[];for(let e=0;e<n;e++){let e=performance.now();await t();let n=performance.now();r.push(n-e)}let i=r.reduce((e,t)=>e+t,0),a=i/n,o=Math.min(...r),s=Math.max(...r);return{name:e,avgTime:Math.round(a*100)/100,minTime:Math.round(o*100)/100,maxTime:Math.round(s*100)/100,totalTime:Math.round(i*100)/100}}var re=class{pool=[];activeElements=new Set;createElement;resetElement;maxPoolSize;constructor(e,t=()=>{},n=100){this.createElement=e,this.resetElement=t,this.maxPoolSize=n}acquire(){let e=this.pool.pop();return e||=this.createElement(),this.activeElements.add(e),e}release(e){this.activeElements.has(e)&&(this.activeElements.delete(e),this.resetElement(e),this.pool.length<this.maxPoolSize&&this.pool.push(e))}clear(){this.pool=[],this.activeElements.clear()}get stats(){return{poolSize:this.pool.length,activeElements:this.activeElements.size,totalElements:this.pool.length+this.activeElements.size}}};function ie(e){e.style.transform=`translateZ(0)`,e.style.willChange=`transform`}function ae(e,t=[`layout`,`style`,`paint`]){e.style.contain=t.join(` `)}var oe=class{batches=[];rafId=null;add(e){this.batches.push(e),this.schedule()}schedule(){this.rafId||=requestAnimationFrame(()=>{this.batches.splice(0).forEach(e=>e()),this.rafId=null})}flush(){this.rafId&&=(cancelAnimationFrame(this.rafId),null),this.batches.splice(0).forEach(e=>e())}clear(){this.rafId&&=(cancelAnimationFrame(this.rafId),null),this.batches=[]}},se=class{listeners=new Map;boundHandler;container;constructor(e){this.container=e,this.boundHandler=this.handleEvent.bind(this),this.container.addEventListener(`click`,this.boundHandler,{passive:!0}),this.container.addEventListener(`dblclick`,this.boundHandler,{passive:!0}),this.container.addEventListener(`mousedown`,this.boundHandler,{passive:!0}),this.container.addEventListener(`mouseup`,this.boundHandler,{passive:!0})}on(e,t,n){let r=`${e}:${t}`;this.listeners.has(r)||this.listeners.set(r,new Set),this.listeners.get(r).add(n)}off(e,t,n){let r=`${e}:${t}`,i=this.listeners.get(r);i&&(i.delete(n),i.size===0&&this.listeners.delete(r))}handleEvent(e){let t=e.target;if(t)for(let[n,r]of this.listeners.entries()){let[i,a]=n.split(`:`);if(e.type===i&&a){let n=t.closest(a);n&&this.container.contains(n)&&r.forEach(t=>t(e,n))}}}destroy(){this.container.removeEventListener(`click`,this.boundHandler),this.container.removeEventListener(`dblclick`,this.boundHandler),this.container.removeEventListener(`mousedown`,this.boundHandler),this.container.removeEventListener(`mouseup`,this.boundHandler),this.listeners.clear()}},ce=class{updates=new Map;rafId=null;setStyle(e,t,n){this.updates.has(e)||this.updates.set(e,{}),this.updates.get(e)[t]=n,this.schedule()}setStyles(e,t){this.updates.has(e)||this.updates.set(e,{}),Object.assign(this.updates.get(e),t),this.schedule()}schedule(){this.rafId||=requestAnimationFrame(()=>{for(let[e,t]of this.updates.entries())Object.assign(e.style,t);this.updates.clear(),this.rafId=null})}flush(){this.rafId&&=(cancelAnimationFrame(this.rafId),null);for(let[e,t]of this.updates.entries())Object.assign(e.style,t);this.updates.clear()}};function le(){let e=new re(()=>{let e=document.createElement(`div`);return e.className=`ht-virtual-row`,ae(e),ie(e),e},e=>{e.style.transform=``,e.style.height=``,e.innerHTML=``,e.className=`ht-virtual-row`}),t=new re(()=>{let e=document.createElement(`div`);return e.className=`ht-virtual-cell`,e},e=>{e.innerHTML=``,e.className=`ht-virtual-cell`,e.style.width=``}),n=new ce;return{acquireRow:()=>e.acquire(),releaseRow:t=>e.release(t),acquireCell:()=>t.acquire(),releaseCell:e=>t.release(e),batchStyle:(e,t)=>{n.setStyles(e,t)},flushStyles:()=>n.flush(),getStats:()=>({rows:e.stats,cells:t.stats}),cleanup:()=>{e.clear(),t.clear(),n.flush()}}}var ue=class{batchSize;abortController;constructor(e=1e3){this.batchSize=e}async processBatches(e,t,n){if(e.length<=this.batchSize)return await t(e,0);let r=[],i=Math.ceil(e.length/this.batchSize);for(let a=0;a<i;a++){if(n?.aborted)throw Error(`Processing aborted`);let o=a*this.batchSize,s=Math.min((a+1)*this.batchSize,e.length),c=e.slice(o,s),l=await t(c,a);r.push(...l),a<i-1&&await new Promise(e=>setTimeout(e,0))}return r}abort(){this.abortController&&this.abortController.abort()}},de=class{measurements=new Map;maxMeasurements=100;start(e){let t=performance.now();return()=>{let n=performance.now()-t;return this.recordMeasurement(e,n),n}}recordMeasurement(e,t){this.measurements.has(e)||this.measurements.set(e,[]);let n=this.measurements.get(e);n.push(t),n.length>this.maxMeasurements&&n.shift()}getAverageTime(e){let t=this.measurements.get(e);return!t||t.length===0?0:t.reduce((e,t)=>e+t,0)/t.length}getMetrics(e){let t=this.measurements.get(e)||[];return t.length===0?{avg:0,min:0,max:0,count:0}:{avg:t.reduce((e,t)=>e+t,0)/t.length,min:Math.min(...t),max:Math.max(...t),count:t.length}}clear(){this.measurements.clear()}};function fe(e,t={}){let n=c.createLogger(`DataPipeline`),{enableMetrics:r=!0,maxBatchSize:i=1e3,asyncProcessing:a=!0,errorHandling:o=`log`,debounceMs:s=16}=t,l=(0,_.ref)([]),u=(0,_.ref)(!1),d=(0,_.ref)(null),f=(0,_.ref)({totalProcessTime:0,stagesCompleted:0,itemsProcessed:0,errorCount:0,lastRunTime:0,throughputPerSecond:0}),p=new ue(i),m=r?new de:null,h=null,g=(0,_.computed)(()=>[`filter`,`sort`,`transform`,`grouping`,`aggregation`].map(e=>{let t=l.value.filter(t=>t.type===e&&t.enabled).sort((e,t)=>e.priority-t.priority),n=m?.getMetrics(e)||{avg:0,min:0,max:0,count:0};return{name:e,interceptors:t,metrics:{processedCount:n.count,averageTime:n.avg,lastProcessTime:n.max,errorCount:0}}})),v=async(t,s)=>{if(u.value)return n.warn(`Processing already in progress, skipping`),t;u.value=!0,d.value=null;let c=performance.now(),h=[...t],g=0;try{for(let e of[`filter`,`sort`,`transform`,`grouping`,`aggregation`]){let t=l.value.filter(t=>t.type===e&&t.enabled).sort((e,t)=>e.priority-t.priority);if(t.length===0)continue;let r=m?.start(e);try{for(let n of t){let t=m?.start(`${e}:${n.name}`);if(a&&h.length>i)h=await p.processBatches(h,async e=>{let t=await n.process(e,s);return Array.isArray(t)?t:[t]});else{let e=await n.process(h,s);h=Array.isArray(e)?e:[e]}t?.()}g++}catch(t){if(n.error(`Error in ${e} stage:`,{module:`DataPipeline`,stage:e},t),o===`throw`)throw t;o===`log`&&(d.value=t,f.value.errorCount++)}r?.()}let u=performance.now()-c;return r&&(f.value={totalProcessTime:u,stagesCompleted:g,itemsProcessed:h.length,errorCount:f.value.errorCount,lastRunTime:Date.now(),throughputPerSecond:h.length/(u/1e3)}),e&&e.emit?.(`data-pipeline-complete`,{originalCount:t.length,processedCount:h.length,processingTime:u,stagesCompleted:g}),h}catch(n){if(d.value=n,f.value.errorCount++,e&&e.emit?.(`data-pipeline-error`,{error:n,stage:g}),o===`throw`)throw n;return t}finally{u.value=!1}},y=(e,t)=>new Promise((n,r)=>{h&&clearTimeout(h),h=window.setTimeout(async()=>{try{let r=await v(e,t);n(r)}catch(e){r(e)}},s)}),b=t=>{if(!t.name||!t.process)throw Error(`Invalid interceptor: name and process function are required`);x(t.name),l.value.push({...t}),e&&(e.emit?.(`data-interceptor-added`,{name:t.name,type:t.type}),e.emit?.(`data-interceptor-registered`,{type:t.type,interceptor:t}))},x=t=>{let n=l.value.findIndex(e=>e.name===t);if(n!==-1){let r=l.value.splice(n,1)[0];e&&r&&e.emit?.(`data-interceptor-removed`,{name:t,type:r.type})}};return(0,_.onUnmounted)(()=>{h&&clearTimeout(h),p.abort(),l.value=[],m?.clear()}),{isProcessing:(0,_.computed)(()=>u.value),metrics:(0,_.computed)(()=>f.value),stages:g,lastError:d,processData:s>0?y:v,addInterceptor:b,removeInterceptor:x,enableInterceptor:e=>{let t=l.value.find(t=>t.name===e);t&&(t.enabled=!0)},disableInterceptor:e=>{let t=l.value.find(t=>t.name===e);t&&(t.enabled=!1)},getInterceptors:e=>e?l.value.filter(t=>t.type===e):[...l.value],clearPipeline:t=>{t?l.value=l.value.filter(e=>e.type!==t):l.value=[],e&&e.emit?.(`data-pipeline-cleared`,{type:t})},resetMetrics:()=>{f.value={totalProcessTime:0,stagesCompleted:0,itemsProcessed:0,errorCount:0,lastRunTime:0,throughputPerSecond:0},m?.clear()},benchmark:async(e,t=10)=>{let n=[];for(let r=0;r<t;r++){let t=performance.now();await v(e);let r=performance.now();n.push(r-t)}let r=n.reduce((e,t)=>e+t,0),i=r/t,a=Math.min(...n),o=Math.max(...n),s=e.length/(i/1e3);return{averageTime:i,minTime:a,maxTime:o,totalTime:r,throughput:s,iterations:t}}}}const pe={createFilterInterceptor:(e,t,n=0)=>({type:`filter`,name:e,priority:n,enabled:!0,process:e=>e.filter(t)}),createSortInterceptor:(e,t,n=0)=>({type:`sort`,name:e,priority:n,enabled:!0,process:e=>[...e].sort(t)}),createTransformInterceptor:(e,t,n=0)=>({type:`transform`,name:e,priority:n,enabled:!0,process:e=>e.map(t)}),createAsyncInterceptor:(e,t,n,r=0)=>({type:t,name:e,priority:r,enabled:!0,process:async e=>await n(e,e=>{})})};function X(){if(typeof navigator>`u`)return{isMac:!1,isWindows:!1,isLinux:!1,isMobile:!1,modifierKey:`Ctrl`,modifierSymbol:`Ctrl`};let e=navigator.userAgent,t=navigator.platform,n=/Mac|iPhone|iPad|iPod/.test(t)||navigator.userAgentData?.platform===`macOS`||/Macintosh|MacIntel|MacPPC|Mac68K/.test(t),r=/Win/.test(t)||navigator.userAgentData?.platform===`Windows`||/Windows/.test(e),i=/Linux/.test(t)||navigator.userAgentData?.platform===`Linux`||/X11/.test(t),a=/Mobi|Android/i.test(e)||/iPhone|iPad|iPod/.test(t)||navigator.userAgentData?.mobile===!0;return{isMac:n,isWindows:r,isLinux:i,isMobile:a,modifierKey:n?`Cmd`:`Ctrl`,modifierSymbol:n?`⌘`:`Ctrl`}}function me(e){return e.ctrlKey||e.metaKey}function he(){return X().modifierKey}function ge(){return X().modifierSymbol}function _e(e,t=!0){let n=X();return t?`${n.modifierKey}+${e}`:e}function ve(e,t=!0){let n=X();return t?`${n.modifierSymbol}+${e}`:e}var ye=0,be=Math.random().toString(36).slice(2,8);function xe(e){ye=(ye+1)%1e4;let t=Date.now().toString(36);return`${e}-${ye}-${be}${t}`}function Se(e,t){let n=xe(e),r={};for(let e of t)r[e]=`${n}-${e}`;return r}var Ce=[`left`,`right`,`center`];function we(e){return e===`left`||e===`right`?e:`center`}function Te(e,t){if(!e||!t||e.columnId===t.id)return!1;let n=we(t.pinned);return e.pinned!==n}function Ee(e){if(!e)return`center`;let t=we(e.pinned);return Ce.includes(t)?t:`center`}function De(e){let{onScroll:t,onScrollEnd:n,debounceDelay:r=150,trackVelocity:i=!0}=e,a=null,o=null,s=null,c=!1,l=0,u=0,d=0,f={horizontal:0,vertical:0,magnitude:0},p=e=>{if(!i)return{horizontal:0,vertical:0,magnitude:0};let t=e.target,n=performance.now(),r=t.scrollLeft||0,a=t.scrollTop||0,o=n-d;if(o>0){let e=Math.abs(r-l),t=Math.abs(a-u),n=e/o,i=t/o,s=Math.sqrt(n**2+i**2);f={horizontal:n,vertical:i,magnitude:s}}return l=r,u=a,d=n,f},m=()=>{c||!s||(c=!0,a=requestAnimationFrame(()=>{s&&=(t(s,f),null),c=!1}))};return{handleScroll:e=>{p(e),s=e,m(),n&&(o!==null&&clearTimeout(o),o=window.setTimeout(()=>{n(e),o=null,f={horizontal:0,vertical:0,magnitude:0}},r))},cleanup:()=>{a!==null&&(cancelAnimationFrame(a),a=null),o!==null&&(clearTimeout(o),o=null),s=null,c=!1},getVelocity:()=>f}}function Oe(e){let t=De(e);if(typeof window<`u`&&`onUnmounted`in globalThis){let{onUnmounted:e}=globalThis;e(()=>t.cleanup())}return t}const ke=`1.1.0`,Ae={ADVANCED_VIRTUALIZATION:!0,BIDIRECTIONAL_VIRTUALIZATION:!0,MEMORY_MANAGEMENT:!0,PERFORMANCE_MONITORING:!0,DOM_OPTIMIZATION:!0,BROWSER_OPTIMIZATION:!0,DATA_PIPELINE:!0,HARDWARE_ACCELERATION:typeof CSS<`u`&&CSS.supports(`transform`,`translateZ(0)`),INTERSECTION_OBSERVER:typeof IntersectionObserver<`u`,RESIZE_OBSERVER:typeof ResizeObserver<`u`,PERFORMANCE_OBSERVER:typeof PerformanceObserver<`u`,WEB_WORKERS:typeof Worker<`u`,OFFSCREEN_CANVAS:typeof OffscreenCanvas<`u`};async function je(){if(typeof window<`u`){let{initializeBrowserOptimizations:e}=await Promise.resolve().then(()=>require(`./browser-optimization-Bghzk7js.cjs`));e()}}function Me(){return{version:`1.1.0`,features:Ae,modules:{virtualization:`Core virtual scrolling with dynamic sizing`,advancedVirtualization:`Advanced virtual scrolling with velocity-based overscan`,bidirectionalVirtualization:`Combined row and column virtualization for large grids`,threePaneVirtualization:`Three-pane virtualization for frozen columns`,memoryManagement:`Memory leak prevention and cleanup utilities`,performanceMonitoring:`Real-time performance metrics and benchmarking`,domOptimization:`DOM manipulation optimization and pooling`,browserOptimization:`Browser-specific performance optimizations`,dataPipeline:`High-performance data processing pipeline`}}}const Ne={basicVirtualization:(e,t=50)=>({count:e,getItemSize:()=>t,overscan:5,enabled:!0}),highPerformanceVirtualization:(e,t=50)=>({count:e,getItemSize:()=>t,overscanCount:10,enableDynamicOverscan:!0,scrollingDelay:100}),bidirectionalVirtualization:(e,t=32,n=150)=>({rowCount:e,getRowSize:()=>t,columns:[],getColumnWidth:()=>n,overscan:{rows:5,columns:2},enabled:{vertical:!0,horizontal:!0}}),memoryOptimization:()=>({enableGC:!0,poolSize:100,cacheSize:1e3,cleanupInterval:3e4}),performanceTracking:()=>({enableFPS:!0,enableRenderProfiling:!0,enableMemoryTracking:!0,enableWebVitals:!0})};var Pe=class{renderers=new Map;instances=new Map;currentRenderer=null;logger=c.createLogger(`RendererRegistry`);register(e,t){this.renderers.set(e,t)}unregister(e){let t=this.instances.get(e);t&&t.renderer.unmount(),this.renderers.delete(e),this.instances.delete(e),this.currentRenderer===e&&(this.currentRenderer=null)}getAvailable(){return Array.from(this.renderers.keys())}has(e){return this.renderers.has(e)}getInstance(e,t,n,r){let i=this.renderers.get(e);if(!i)return this.logger.error(`Renderer '${e}' is not registered`),null;let a=this.instances.get(e);if(a)return r&&a.renderer.updateConfig&&a.renderer.updateConfig(r),a;try{return a={renderer:i(r),factory:i,options:r||{},metadata:{createdAt:new Date,lastUsed:new Date,renderCount:0}},this.instances.set(e,a),a}catch(t){return this.logger.error(`Failed to create renderer '${e}':`,t),null}}async switchTo(e,t,n,r){try{if(this.currentRenderer){let e=this.instances.get(this.currentRenderer);e&&await e.renderer.unmount()}let i=this.getInstance(e,t,n,r);if(!i)return null;await i.renderer.mount(t,n),i.metadata.lastUsed=new Date;let a=n.getState();if(a){let e=this.buildVirtualRows(a,a.data||[]);i.renderer.render(a,a.columns||[],e),i.metadata.renderCount++}return this.currentRenderer=e,i}catch(t){return this.logger.error(`Failed to switch to renderer '${e}':`,t),null}}getCurrent(){return this.currentRenderer&&this.instances.get(this.currentRenderer)||null}getCurrentName(){return this.currentRenderer}render(e,t,n){let r=this.getCurrent();if(r){let i=this.buildVirtualRows(e,n);r.renderer.render(e,t,i),r.metadata.renderCount++}}updateSize(e,t){let n=this.getCurrent();n&&n.renderer.resize&&n.renderer.resize(e,t)}cleanup(){for(let[e,t]of this.instances)try{t.renderer.unmount()}catch(t){this.logger.error(`Error cleaning up renderer '${e}':`,t)}this.instances.clear(),this.currentRenderer=null}getStats(){let e=Array.from(this.renderers.keys()).map(e=>{let t=this.instances.get(e);return{name:e,hasInstance:!!t,renderCount:t?.metadata.renderCount||0,lastUsed:t?.metadata.lastUsed}});return{registered:this.renderers.size,instances:this.instances.size,current:this.currentRenderer,renderers:e}}buildVirtualRows(e,t){let n=e?.config?.rowHeight??32;return t.map((e,t)=>{let r=e?.id;return{id:typeof r==`string`||typeof r==`number`?r:t,index:t,data:e,top:t*n,height:n,visible:!0}})}};const Fe=new Pe;function Ie(){return new Pe}function Le(e,t,n,r){return Fe.switchTo(e,t,n,r)}function Re(){return Fe.getCurrent()}function ze(){return Fe.getAvailable()}function Z(e){return`type`in e&&(e.type===`seq`||e.type===`checkbox`||e.type===`radio`||e.type===`drag`||e.type===`actions`)}const Be={seq:{width:48,minWidth:40,pinned:`left`},checkbox:{width:52,minWidth:52,pinned:`left`},radio:{width:52,minWidth:52,pinned:`left`},drag:{width:48,minWidth:48,pinned:`left`},actions:{width:120,minWidth:80,pinned:`right`}},Ve=[`drag`,`checkbox`,`radio`,`seq`];function He(e,t=0){return`__functional_${e}_${t}`}function Ue(e,t=0){let n=Be[e.type];return{...e,id:e.id||He(e.type,t),field:e.field||`__functional_${e.type}`,title:e.title||``,pinned:e.pinned||n.pinned,width:e.width??n.width,minWidth:e.minWidth??n.minWidth,resizable:e.resizable??!1,isDraggable:e.isDraggable??!1,sortable:!1,filterable:!1,visible:e.visible??!0}}function We(e){let t=e.filter(Z),n=e.filter(e=>!Z(e)),r=t.filter(e=>e.pinned===`left`).sort((e,t)=>{let n=e.type,r=t.type,i=Ve.indexOf(n),a=Ve.indexOf(r);return(i===-1?999:i)-(a===-1?999:a)}),i=t.filter(e=>e.pinned===`right`);return[...r,...n,...i]}function Ge(e){let t=!1;return e.filter(e=>{if(!Z(e))return!0;let n=e.type;return n===`checkbox`||n===`radio`?t?!1:(t=!0,!0):!0})}var Ke=class{selection=new Set;callbacks=new Set;add(e){return this.selection.has(e)?!1:(this.selection.add(e),this.notifyChange(),!0)}delete(e){return this.selection.has(e)?(this.selection.delete(e),this.notifyChange(),!0):!1}clear(){this.selection.size!==0&&(this.selection.clear(),this.notifyChange())}has(e){return this.selection.has(e)}toArray(){return Array.from(this.selection)}get size(){return this.selection.size}notifyChange(){this.callbacks.forEach(e=>e())}subscribe(e){return this.callbacks.add(e),()=>this.callbacks.delete(e)}};function qe(e,t){let n=null,r=((...r)=>{n&&clearTimeout(n),n=window.setTimeout(()=>{e(...r)},t)});return r.cancel=()=>{n&&=(clearTimeout(n),null)},r}var Je=class{cache=new Map;ttl;constructor(e=1e4){this.ttl=e}get(e){let t=this.cache.get(e);if(t){if(Date.now()-t.timestamp>this.ttl){this.cache.delete(e);return}return t.value}}set(e,t){this.cache.set(e,{value:t,timestamp:Date.now()})}clear(){this.cache.clear()}cleanup(){let e=Date.now();for(let[t,{timestamp:n}]of this.cache.entries())e-n>this.ttl&&this.cache.delete(t)}},Ye=class{listeners=new Map;logger=c.createLogger({module:`EventEmitter`,operation:`useGridState`});on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set);let n=this.listeners.get(e);return n&&n.add(t),()=>{this.listeners.get(e)?.delete(t)}}off(e,t){this.listeners.get(e)?.delete(t)}emit(e,...t){let n=this.listeners.get(e);n&&n.forEach(n=>{try{n(...t)}catch(t){this.logger.error(`Error in event handler for '${e}':`,{module:`useGridState`,event:e},t)}})}clear(){this.listeners.clear()}};function Xe(e,t,n){let r=e.map((e,r)=>{if(Z(e)){let n=Ue(e,r);return n.type===`drag`&&(t&&t(`drag-drop`)||(n.functionalOptions={...n.functionalOptions||{},isRowDraggable:()=>({disabled:!0,reason:`Drag-drop plugin not installed`})})),n}let i=e.dataType||(n&&n.length>0?k(n,e):void 0);return{...e,dataType:i||e.dataType,width:e.width??150,minWidth:e.minWidth??50,maxWidth:e.maxWidth??500,isLastPinned:!1,isFirstRightPinned:!1}}),i=Ge(r),a=We(i),o=a.filter(e=>e.pinned===`left`),s=a.filter(e=>e.pinned===`right`);if(o.length>0){let e=o[o.length-1];e&&(e.isLastPinned=!0)}return s.length>0&&s[0]&&(s[0].isFirstRightPinned=!0),a}function Ze(e={},t=[]){let n=c.createLogger(`useGridState`),r=new Ke,i=(0,_.ref)(0),a=r.subscribe(()=>{i.value++}),o=new Je(1e4),s=new Ye,l=new Set,u=new Map,d=Ie(),f=null,p=(0,_.reactive)({scrollPosition:{top:0,left:0},focusedCell:null,rawData:[],processedData:[],columns:[],config:{rowHeight:32,headerHeight:40,virtualizationThreshold:1e3,enableVirtualization:!0,...e},loading:!1,error:null,virtualizationEnabled:!1,renderMetrics:{lastRenderTime:0,avgRenderTime:0,renderCount:0}}),m={setData:e=>{let t=(0,_.markRaw)([...e]);p.rawData=t,e.length>=p.config.virtualizationThreshold&&(p.virtualizationEnabled=!0),o.clear(),v(t),p.columns&&p.columns.length>0&&p.columns.some(e=>!e.dataType)&&(p.columns=Xe(p.columns,e=>!!h.get(e),p.rawData),s.emit(`columns-changed`,p.columns)),s.emit(`data-changed`,t)},getData:()=>p.rawData,getFilteredData:()=>p.processedData,selectRow:e=>{r.add(e)},selectRows:e=>{e.forEach(e=>r.add(e))},clearSelection:()=>{r.clear()},setColumns:e=>{p.columns=Xe(e,e=>!!h.get(e),p.rawData),s.emit(`columns-changed`,p.columns),m.renderWithActiveRenderer?.()},updateColumn:(e,t)=>{let n=p.columns.findIndex(t=>t.id===e);if(n!==-1){let r=p.columns[n];if(!r)return;let i={...r,...t,id:r.id,field:t.field??r.field},a=[...p.columns];a[n]=i,p.columns=Xe(a,e=>!!h.get(e),p.rawData),s.emit(`column-updated`,{columnId:e,updates:t}),m.renderWithActiveRenderer?.()}},getState:()=>({data:p.processedData,columns:p.columns,config:p.config,selectedRows:new Set(r.toArray()),focusedCell:p.focusedCell,scrollPosition:p.scrollPosition,loading:p.loading,error:p.error}),updateConfig:e=>{p.config={...p.config,...e},o.clear(),p.rawData.length>0&&v(p.rawData),s.emit(`config-changed`,p.config)},emit:(e,t)=>{s.emit(e,t)},on:(e,t)=>s.on(e,t),off:(e,t)=>{s.off(e,t)},loadPlugin:async e=>(await h.register(e)).success,unloadPlugin:async e=>(await h.unregister(e)).success,getPlugin:e=>h.get(e),listPlugins:()=>h.list(),getPluginErrors:()=>h.getExtension(`error-handling`)?.getErrors()||new Map,registerCellRenderer:(e,t)=>{u.set(e,t),s.emit(`cell-renderer-registered`,{name:e,component:t})},unregisterCellRenderer:e=>{u.delete(e),s.emit(`cell-renderer-unregistered`,{name:e})},registerRenderer:(e,t)=>{d.register(e,t),s.emit(`renderer-registered`,{name:e,factory:t})},setRenderer:async e=>{n.debug(`Switching to renderer: ${e}`);let t=d.getAvailable();return t.includes(e)?(s.emit(`renderer-changed`,{name:e}),!0):(n.warn(`Renderer '${e}' not registered. Available: ${t.join(`, `)}`),!1)},getRenderer:()=>d.getCurrentName()||`table`,renderWithActiveRenderer:()=>{let e=()=>{if(!d.getCurrent())return;let e=m.getState();d.render(e,p.columns,p.processedData),n.debug(`Rendered with active renderer`)};if(typeof window>`u`||window.requestAnimationFrame===void 0){e();return}f===null&&(f=window.requestAnimationFrame(()=>{f=null,e()}))},initializeRenderer:async e=>{try{let t=p.config.renderer||`table`;if(n.debug(`Initializing renderer: ${t}`),!d.has(t))throw Error(`Renderer '${t}' is not registered`);if(!await d.switchTo(t,e,m,p.config))throw Error(`Failed to initialize renderer '${t}'`);return n.debug(`Renderer '${t}' initialized successfully`),!0}catch(e){return n.error(`Renderer initialization failed:`,{module:`useGridState`},e),!1}},resizeRenderer:(e,t)=>{d.updateSize(e,t),n.debug(`Renderer resized to ${e}x${t}`)},getAvailableRenderers:()=>d.getAvailable(),getActiveRendererInstance:()=>d.getCurrent(),registerMemoryCleanup:e=>{l.add(e)}},h=F(m);function g(){return h.getExtension(`capabilities`)?.get(`data-pipeline`)}function v(e){let t=g();if(!t){p.processedData=(0,_.markRaw)([...e]);return}let r=typeof performance<`u`&&performance.now?performance.now():Date.now(),i=0;try{let n=e;i=1,n=t.processData(n,`filter`),i=2,n=t.processData(n,`sort`),i=3,n=t.processData(n,`transform`),i=4,n=t.processData(n,`grouping`),i=5,n=t.processData(n,`aggregation`),p.processedData=(0,_.markRaw)(n);let a=typeof performance<`u`&&performance.now?performance.now():Date.now();s.emit(`data-pipeline-complete`,{originalCount:e.length,processedCount:p.processedData.length,processingTime:a-r,stagesCompleted:5})}catch(t){n.error(`Error processing data through pipeline:`,{module:`useGridState`},t),p.processedData=(0,_.markRaw)([...e]),s.emit(`data-pipeline-error`,{error:t,stage:i})}}let y=(0,_.computed)(()=>{let e=p.processedData,{rowHeight:t}=p.config,n={visibleRows:e,startIndex:0,endIndex:e.length-1,totalHeight:e.length*t};return s.emit(`data-processed`,{stage:`virtualization`,data:n.visibleRows}),n}),b=qe(()=>{p.rawData.length>0&&v(p.rawData)},16),x=[];x.push((0,_.watch)(()=>p.rawData,()=>{b()},{flush:`post`})),x.push((0,_.watch)(()=>[p.config.sort,p.config.filters],()=>{b()},{flush:`post`,deep:!0})),x.push((0,_.watch)([()=>p.processedData.length,()=>p.config.virtualizationThreshold],([e,t])=>{p.virtualizationEnabled=e>=t})),s.on(`data-interceptor-registered`,()=>{b()}),s.on(`data-interceptor-removed`,()=>{b()}),s.on(`data-refresh-requested`,()=>{b()}),s.on(`data-pipeline-complete`,()=>{m.renderWithActiveRenderer?.()});let S=setInterval(()=>{o.cleanup()},3e4);return t.length>0&&t.forEach(e=>{try{m.loadPlugin(e)}catch(t){n.error(`Failed to load initial plugin ${e.name}:`,{module:`useGridState`,plugin:e.name},t)}}),(0,_.onUnmounted)(()=>{f!==null&&typeof window<`u`&&typeof window.cancelAnimationFrame==`function`&&(window.cancelAnimationFrame(f),f=null),b.cancel(),r.clear(),a(),o.clear(),clearInterval(S),x.forEach(e=>e()),d.cleanup(),h.cleanup(),s.clear(),l.forEach(e=>{try{e()}catch(e){n.error(`Error during cleanup:`,{module:`useGridState`},e)}}),l.clear(),p.rawData=[],p.processedData=[]}),{data:y,columns:(0,_.computed)(()=>p.columns),selectedRows:(0,_.computed)(()=>(i.value,r.toArray())),loading:(0,_.computed)(()=>p.loading),error:(0,_.computed)(()=>p.error),scrollPosition:(0,_.computed)(()=>p.scrollPosition),focusedCell:(0,_.computed)(()=>p.focusedCell),config:(0,_.computed)(()=>p.config),virtualizationEnabled:(0,_.computed)(()=>p.virtualizationEnabled),renderMetrics:(0,_.computed)(()=>p.renderMetrics),api:m,__internal:{state:p,selectionManager:r,pluginRegistry:h,eventEmitter:s,processDataThroughPipeline:v,updateScrollPosition:e=>{p.scrollPosition=e},setFocusedCell:e=>{p.focusedCell=e},setLoading:e=>{p.loading=e},setError:e=>{p.error=e},clearCache:()=>{o.clear()}}}}var Qe=c.createLogger(`interaction-contract`),$e=class{eventEmitter=null;coreCallbacks={};destroyed=!1;constructor(e){Qe.debug(`Creating interaction contract for renderer: ${e}`)}registerEventEmitter(e){this.eventEmitter=e}updateSelection(e,t){}setActive(e){}ensureVisible(e,t){}async toggleEditMode(e,t){return!1}updateScrollPosition(e){}refresh(){}registerCoreCallbacks(e){this.coreCallbacks={...this.coreCallbacks,...e}}emit(e,t){if(this.destroyed){Qe.warn(`Attempted to emit '${e}' on destroyed contract`);return}if(this.eventEmitter)try{this.eventEmitter(e,t)}catch(t){Qe.error(`Error emitting event '${e}':`,t)}else Qe.debug(`No event emitter registered for event '${e}'`)}destroy(){this.destroyed=!0,this.eventEmitter=null,this.coreCallbacks={}}isDestroyed(){return this.destroyed}};function et(e){return new $e(e)}const tt=Symbol(`ht-grid-instance-id`),nt=Symbol(`ht-grid-api`);var rt=[`type`,`disabled`],it={key:0,class:`inline-flex items-center justify-center`},at=(0,_.defineComponent)({__name:`HtButton`,props:{label:{default:``},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},type:{default:`button`},variant:{default:`default`},size:{default:`md`},block:{type:Boolean,default:!1}},setup(e){let t=e,n=[`inline-flex items-center justify-center`,`rounded-md font-medium select-none`,`transition-colors`,`focus:outline-none focus-visible:ring-1 focus-visible:ring-offset-1`,`disabled:opacity-50 disabled:pointer-events-none`,`gap-2`].join(` `),r={default:`bg-[var(--ht-primary)] text-[var(--ht-text-inverse)] hover:bg-[var(--ht-primary-hover)] focus-visible:ring-[var(--ht-primary)]`,filled:`bg-[var(--ht-bg-subtle)] text-[var(--ht-text)] hover:bg-[var(--ht-cell-hover)] focus-visible:ring-[var(--ht-primary)]`,primary:`bg-[var(--ht-primary)] text-[var(--ht-text-inverse)] hover:bg-[var(--ht-primary-hover)] focus-visible:ring-[var(--ht-primary)]`,secondary:`bg-[var(--ht-bg-subtle)] text-[var(--ht-text)] border border-[var(--ht-border-strong)] hover:bg-[var(--ht-cell-hover)] focus-visible:ring-[var(--ht-primary)]`,outline:`border border-[var(--ht-border-strong)] text-[var(--ht-text)] bg-transparent hover:bg-[var(--ht-cell-hover)] focus-visible:ring-[var(--ht-primary)]`,ghost:`bg-transparent text-[var(--ht-text)] hover:bg-[var(--ht-cell-hover)] focus-visible:ring-[var(--ht-primary)]`,destructive:`bg-[var(--ht-danger)] text-[var(--ht-text-inverse)] hover:bg-[var(--ht-danger)]/90 focus-visible:ring-[var(--ht-danger)]`,link:`bg-transparent text-[var(--ht-primary)] underline-offset-4 hover:underline focus-visible:ring-[var(--ht-primary)]`},i={micro:`h-6 px-1.5 text-xs gap-1`,xs:`h-7 px-2 text-xs`,sm:`h-8 px-2.5 text-sm`,md:`h-9 px-3 text-sm`,lg:`h-11 px-4 text-base`,"icon-micro":`size-6 p-0`,"icon-xs":`size-7 p-0`,"icon-sm":`size-8 p-0`,icon:`size-9 p-0`,"icon-lg":`size-11 p-0`},a=(0,_.computed)(()=>[n,r[t.variant],i[t.size],t.block?`w-full`:``].join(` `));return(e,n)=>((0,_.openBlock)(),(0,_.createElementBlock)(`button`,{type:t.type,disabled:t.disabled||t.loading,class:(0,_.normalizeClass)(a.value)},[t.loading?((0,_.openBlock)(),(0,_.createElementBlock)(`span`,it,[...n[0]||=[(0,_.createElementVNode)(`svg`,{class:`animate-spin w-4 h-4`,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`},[(0,_.createElementVNode)(`circle`,{class:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,"stroke-width":`4`}),(0,_.createElementVNode)(`path`,{class:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})],-1)]])):(0,_.createCommentVNode)(``,!0),(0,_.renderSlot)(e.$slots,`default`,{},()=>[(0,_.createTextVNode)((0,_.toDisplayString)(t.label||`Button`),1)])],10,rt))}}),Q=at,ot={class:`relative inline-flex items-center w-full`},st={key:0,class:`absolute left-3 flex items-center pointer-events-none text-[var(--ht-text-muted)]`},ct=[`id`,`type`,`value`,`placeholder`,`disabled`,`readonly`,`required`,`autocomplete`,`maxlength`,`minlength`,`pattern`,`aria-invalid`,`aria-describedby`,`aria-errormessage`,`aria-required`],lt={key:1,class:`absolute right-3 flex items-center`},ut={key:1,class:`text-[var(--ht-text-muted)]`},dt=(0,_.defineComponent)({__name:`HtInput`,props:{modelValue:{},type:{default:`text`},placeholder:{},disabled:{type:Boolean},readonly:{type:Boolean},clearable:{type:Boolean,default:!1},autocomplete:{},maxlength:{},minlength:{},pattern:{},required:{type:Boolean},variant:{default:`default`},size:{default:`md`},state:{default:`default`}},emits:[`update:modelValue`,`clear`,`focus`,`blur`,`keydown`],setup(e,{emit:t}){let n=e,r=t,i=(0,_.useId)(),a=(0,_.useAttrs)(),o=[`rounded-md transition-colors outline-none`,`focus-visible:ring-1 focus-visible:ring-offset-1`,`disabled:opacity-50 disabled:pointer-events-none disabled:cursor-not-allowed`,`placeholder:text-[var(--ht-text-subtle)]`].join(` `),s={default:`bg-[var(--ht-bg)] border border-[var(--ht-border-strong)] text-[var(--ht-text)] hover:border-[var(--ht-text)]/60`,filled:`bg-[var(--ht-bg-subtle)] border border-transparent text-[var(--ht-text)]`,outline:`bg-transparent border border-[var(--ht-border-strong)] text-[var(--ht-text)] hover:border-[var(--ht-text)]/60`,ghost:`bg-transparent border border-transparent text-[var(--ht-text)] hover:bg-[var(--ht-bg-subtle)]`},c={sm:`h-[var(--size-ht-input-sm)] px-2.5 text-sm`,md:`h-[var(--size-ht-input-md)] px-3 text-sm`,lg:`h-[var(--size-ht-input-lg)] px-4 text-base`},l={default:`focus-visible:ring-[var(--ht-primary)]`,error:`border-[var(--ht-danger)] focus-visible:ring-[var(--ht-danger)]`,success:`border-[var(--ht-success)] focus-visible:ring-[var(--ht-success)]`,warning:`border-[var(--ht-warning)] focus-visible:ring-[var(--ht-warning)]`},u=(0,_.computed)(()=>[o,s[n.variant],c[n.size],l[n.state]].join(` `)),d=(0,_.computed)(()=>n.modelValue===void 0||n.modelValue===null?!1:typeof n.modelValue==`string`?n.modelValue.length>0:typeof n.modelValue==`number`?!isNaN(n.modelValue):!0),f=e=>{let t=e.target,i=n.type===`number`?t.valueAsNumber||0:t.value;r(`update:modelValue`,i)},p=()=>{r(`update:modelValue`,n.type===`number`?0:``),r(`clear`)},m=e=>{r(`keydown`,e),e.key===`Escape`&&n.clearable&&d.value&&(p(),e.preventDefault())};return(t,n)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,ot,[t.$slots.prefix?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,st,[(0,_.renderSlot)(t.$slots,`prefix`)])):(0,_.createCommentVNode)(``,!0),(0,_.createElementVNode)(`input`,(0,_.mergeProps)({id:(0,_.unref)(i),type:e.type,value:e.modelValue,class:[u.value,`w-full`,t.$slots.prefix?`pl-10`:``,e.clearable||t.$slots.suffix?`pr-10`:``],placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,required:e.required,autocomplete:e.autocomplete,maxlength:e.maxlength,minlength:e.minlength,pattern:e.pattern,"aria-invalid":e.state===`error`,"aria-describedby":(0,_.unref)(a)[`aria-describedby`],"aria-errormessage":(0,_.unref)(a)[`aria-errormessage`],"aria-required":e.required},t.$attrs,{onInput:f,onFocus:n[0]||=e=>r(`focus`,e),onBlur:n[1]||=e=>r(`blur`,e),onKeydown:m}),null,16,ct),e.clearable||t.$slots.suffix?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,lt,[e.clearable&&d.value&&!e.disabled&&!e.readonly?((0,_.openBlock)(),(0,_.createElementBlock)(`button`,{key:0,type:`button`,class:`text-[var(--ht-text-muted)] hover:text-[var(--ht-text)] transition-colors`,"aria-label":`Clear input`,tabindex:`-1`,onClick:p},[...n[2]||=[(0,_.createElementVNode)(`svg`,{class:`w-4 h-4`,fill:`currentColor`,viewBox:`0 0 20 20`},[(0,_.createElementVNode)(`path`,{"fill-rule":`evenodd`,d:`M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z`,"clip-rule":`evenodd`})],-1)]])):t.$slots.suffix?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,ut,[(0,_.renderSlot)(t.$slots,`suffix`)])):(0,_.createCommentVNode)(``,!0)])):(0,_.createCommentVNode)(``,!0)]))}}),ft=dt,pt={class:`ht-checkbox-wrapper inline-flex items-start gap-2`},mt=[`id`,`name`,`value`,`checked`,`disabled`,`required`,`aria-checked`,`aria-invalid`,`aria-required`],ht=[`for`],gt={key:0,class:`ht-checkbox-label-container flex-1`},_t=[`for`],vt=(0,_.defineComponent)({__name:`HtCheckbox`,props:{modelValue:{type:[Boolean,String],default:!1},value:{},disabled:{type:Boolean},required:{type:Boolean},indeterminate:{type:Boolean,default:!1},label:{},description:{},name:{},variant:{default:`default`},size:{default:`md`},state:{default:`default`}},emits:[`update:modelValue`,`change`],setup(e,{emit:t}){let n=e,r=t,i=(0,_.useId)(),a=(0,_.computed)(()=>n.indeterminate||n.modelValue===`indeterminate`?!1:n.modelValue===!0),o=(0,_.computed)(()=>n.indeterminate||n.modelValue===`indeterminate`),s=[`inline-flex items-center justify-center`,`rounded-sm border-[1px]`,`cursor-pointer`,`transition-all duration-200`,`will-change-auto`].join(` `),c={default:`border-[var(--ht-text)] bg-[var(--ht-bg)]`,filled:`border-[var(--ht-text)] bg-[var(--ht-bg-subtle)]`,outline:`border-[var(--ht-text)] bg-transparent`,ghost:`border-[var(--ht-text)] bg-transparent`},l={default:`border-[var(--ht-primary)] bg-[var(--ht-primary)]/90 text-[var(--ht-text-inverse)]`,filled:`border-[var(--ht-primary)] bg-[var(--ht-primary)]/90 text-[var(--ht-text-inverse)]`,outline:`border-[var(--ht-primary)] bg-[var(--ht-primary)]/90 text-[var(--ht-text-inverse)]`,ghost:`border-[var(--ht-primary)] bg-[var(--ht-primary)]/90 text-[var(--ht-text-inverse)]`},u={default:`border-[var(--ht-text-subtle)] bg-[var(--ht-bg)]`,filled:`border-[var(--ht-text-subtle)] bg-[var(--ht-bg-subtle)]`,outline:`border-[var(--ht-text-subtle)] bg-transparent`,ghost:`border-[var(--ht-text-subtle)] bg-transparent`},d={default:`border-[var(--ht-text-subtle)] bg-[var(--ht-text-subtle)]/10 text-[var(--ht-text-subtle)]`,filled:`border-[var(--ht-text-subtle)] bg-[var(--ht-text-subtle)]/10 text-[var(--ht-text-subtle)]`,outline:`border-[var(--ht-text-subtle)] bg-[var(--ht-text-subtle)]/10 text-[var(--ht-text-subtle)]`,ghost:`border-[var(--ht-text-subtle)] bg-[var(--ht-text-subtle)]/10 text-[var(--ht-text-subtle)]`},f=[`opacity-40`,`cursor-not-allowed`,`pointer-events-none`].join(` `),p={sm:`w-4 h-4`,md:`w-5 h-5`,lg:`w-6 h-6`},m={default:`focus-visible:ring-[var(--ht-primary)]`,error:`border-[var(--ht-danger)] focus-visible:ring-[var(--ht-danger)]`,success:`border-[var(--ht-success)] focus-visible:ring-[var(--ht-success)]`,warning:`border-[var(--ht-warning)] focus-visible:ring-[var(--ht-warning)]`},h=(0,_.computed)(()=>{let e=a.value||o.value,t;return t=n.disabled?e?d[n.variant]??``:u[n.variant]??``:e?l[n.variant]??``:c[n.variant]??``,[s,n.disabled?f:``,t,p[n.size],m[n.state]].join(` `)}),g=(0,_.computed)(()=>({sm:`w-3 h-3`,md:`w-4 h-4`,lg:`w-5 h-5`})[n.size]),v=(0,_.computed)(()=>({sm:`mt-[-4px]`,md:`mt-[-1px]`,lg:`mt-[2px]`})[n.size]),y=(0,_.computed)(()=>({sm:`text-xs`,md:`text-sm`,lg:`text-base`})[n.size]),b=(0,_.computed)(()=>({sm:`text-[11px]`,md:`text-xs`,lg:`text-sm`})[n.size]),x=e=>{if(n.disabled)return;let t=e.target.checked;r(`update:modelValue`,t),r(`change`,t,e)},S=e=>{if(e.preventDefault(),n.disabled)return;let t=!a.value;r(`update:modelValue`,t),r(`change`,t,e)},C=e=>{e.key===` `&&(e.preventDefault(),e.target.click())};return(t,n)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,pt,[(0,_.createElementVNode)(`div`,{class:(0,_.normalizeClass)([`ht-checkbox-container relative flex-shrink-0`,v.value])},[(0,_.createElementVNode)(`input`,{id:(0,_.unref)(i),type:`checkbox`,name:e.name,value:e.value,checked:a.value,disabled:e.disabled,required:e.required,"aria-checked":o.value?`mixed`:a.value,"aria-invalid":e.state===`error`,"aria-required":e.required,class:`sr-only peer`,onChange:x,onKeydown:C},null,40,mt),(0,_.createElementVNode)(`label`,{for:(0,_.unref)(i),class:(0,_.normalizeClass)(h.value),onClick:S},[(0,_.withDirectives)(((0,_.openBlock)(),(0,_.createElementBlock)(`svg`,{class:(0,_.normalizeClass)(g.value),fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,"stroke-width":`3`,"aria-hidden":`true`},[...n[0]||=[(0,_.createElementVNode)(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,d:`M5 13l4 4L19 7`},null,-1)]],2)),[[_.vShow,a.value&&!o.value]]),(0,_.withDirectives)(((0,_.openBlock)(),(0,_.createElementBlock)(`svg`,{class:(0,_.normalizeClass)(g.value),fill:`none`,viewBox:`0 0 24 24`,stroke:`currentColor`,"stroke-width":`3`,"aria-hidden":`true`},[...n[1]||=[(0,_.createElementVNode)(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,d:`M6 12h12`},null,-1)]],2)),[[_.vShow,o.value]]),(0,_.withDirectives)((0,_.createElementVNode)(`span`,{class:(0,_.normalizeClass)(g.value),"aria-hidden":`true`},null,2),[[_.vShow,!a.value&&!o.value]])],10,ht)],2),e.label||e.description||t.$slots.default?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,gt,[e.label||t.$slots.default?((0,_.openBlock)(),(0,_.createElementBlock)(`label`,{key:0,for:(0,_.unref)(i),class:(0,_.normalizeClass)([y.value,`font-medium text-[var(--ht-text)] cursor-pointer select-none block leading-snug`,{"opacity-50":e.disabled}])},[(0,_.renderSlot)(t.$slots,`default`,{},()=>[(0,_.createTextVNode)((0,_.toDisplayString)(e.label),1)],!0)],10,_t)):(0,_.createCommentVNode)(``,!0),e.description||t.$slots.description?((0,_.openBlock)(),(0,_.createElementBlock)(`p`,{key:1,class:(0,_.normalizeClass)([b.value,`text-[var(--ht-text-muted)] mt-1 leading-snug`,{"opacity-50":e.disabled}])},[(0,_.renderSlot)(t.$slots,`description`,{},()=>[(0,_.createTextVNode)((0,_.toDisplayString)(e.description),1)],!0)],2)):(0,_.createCommentVNode)(``,!0)])):(0,_.createCommentVNode)(``,!0)]))}}),$=(e,t)=>{let n=e.__vccOpts||e;for(let[e,r]of t)n[e]=r;return n},yt=$(vt,[[`__scopeId`,`data-v-bd13cb08`]]),bt={class:`ht-radio-wrapper inline-flex items-start gap-2`},xt=[`id`,`name`,`value`,`checked`,`disabled`,`required`,`aria-checked`,`aria-invalid`,`aria-required`],St=[`for`],Ct={key:0,class:`ht-radio-label-container flex-1`},wt=[`for`],Tt=(0,_.defineComponent)({__name:`HtRadio`,props:{modelValue:{},value:{},variant:{default:`default`},size:{default:`md`},state:{default:`default`},disabled:{type:Boolean},required:{type:Boolean},label:{},description:{},name:{}},emits:[`update:modelValue`,`change`],setup(e,{emit:t}){let n=e,r=t,i=(0,_.useId)(),a=(0,_.computed)(()=>n.modelValue===n.value),o=[`inline-flex items-center justify-center`,`rounded-full border-[1px]`,`cursor-pointer`,`transition-all duration-200`,`will-change-auto`].join(` `),s={default:`border-[var(--ht-text)] bg-[var(--ht-bg)]`,filled:`border-[var(--ht-text)] bg-[var(--ht-bg-subtle)]`,outline:`border-[var(--ht-text)] bg-transparent`,ghost:`border-[var(--ht-text)] bg-transparent`},c={default:`border-[var(--ht-primary)] bg-[var(--ht-primary)]/90`,filled:`border-[var(--ht-primary)] bg-[var(--ht-primary)]/90`,outline:`border-[var(--ht-primary)] bg-[var(--ht-primary)]/90`,ghost:`border-[var(--ht-primary)] bg-[var(--ht-primary)]/90`},l={default:`border-[var(--ht-text-subtle)] bg-[var(--ht-bg)]`,filled:`border-[var(--ht-text-subtle)] bg-[var(--ht-bg-subtle)]`,outline:`border-[var(--ht-text-subtle)] bg-transparent`,ghost:`border-[var(--ht-text-subtle)] bg-transparent`},u={default:`border-[var(--ht-text-subtle)] bg-[var(--ht-text-subtle)]/10`,filled:`border-[var(--ht-text-subtle)] bg-[var(--ht-text-subtle)]/10`,outline:`border-[var(--ht-text-subtle)] bg-[var(--ht-text-subtle)]/10`,ghost:`border-[var(--ht-text-subtle)] bg-[var(--ht-text-subtle)]/10`},d=[`opacity-40`,`cursor-not-allowed`,`pointer-events-none`].join(` `),f={sm:`w-4 h-4`,md:`w-5 h-5`,lg:`w-6 h-6`},p={sm:`w-2 h-2`,md:`w-2.5 h-2.5`,lg:`w-3 h-3`},m={default:`focus-visible:ring-[var(--ht-primary)]`,error:`border-[var(--ht-danger)] focus-visible:ring-[var(--ht-danger)]`,success:`border-[var(--ht-success)] focus-visible:ring-[var(--ht-success)]`,warning:`border-[var(--ht-warning)] focus-visible:ring-[var(--ht-warning)]`},h=(0,_.computed)(()=>{let e;return e=n.disabled?a.value?u[n.variant]??``:l[n.variant]??``:a.value?c[n.variant]??``:s[n.variant]??``,[o,n.disabled?d:``,e,f[n.size],m[n.state]].join(` `)}),g=(0,_.computed)(()=>({sm:`mt-[-5px]`,md:`mt-[-2px]`,lg:`mt-[0px]`})[n.size]),v=(0,_.computed)(()=>({sm:`text-xs`,md:`text-sm`,lg:`text-base`})[n.size]),y=(0,_.computed)(()=>({sm:`text-[11px]`,md:`text-xs`,lg:`text-sm`})[n.size]),b=(0,_.computed)(()=>[p[n.size],`rounded-full transition-transform`,n.disabled?`bg-[var(--ht-text-subtle)]`:`bg-[var(--ht-text-inverse)]`].join(` `)),x=e=>{n.disabled||(r(`update:modelValue`,n.value),r(`change`,n.value,e))},S=e=>{e.preventDefault(),!n.disabled&&(r(`update:modelValue`,n.value),r(`change`,n.value,e))},C=e=>{e.key===` `&&(e.preventDefault(),e.target.click())};return(t,n)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,bt,[(0,_.createElementVNode)(`div`,{class:(0,_.normalizeClass)([`ht-radio-container relative flex-shrink-0`,g.value])},[(0,_.createElementVNode)(`input`,{id:(0,_.unref)(i),type:`radio`,name:e.name,value:e.value,checked:a.value,disabled:e.disabled,required:e.required,"aria-checked":a.value,"aria-invalid":e.state===`error`,"aria-required":e.required,class:`sr-only peer`,onChange:x,onKeydown:C},null,40,xt),(0,_.createElementVNode)(`label`,{for:(0,_.unref)(i),class:(0,_.normalizeClass)(h.value),onClick:S},[(0,_.withDirectives)((0,_.createElementVNode)(`span`,{class:(0,_.normalizeClass)(b.value),"aria-hidden":`true`},null,2),[[_.vShow,a.value]]),(0,_.withDirectives)((0,_.createElementVNode)(`span`,{class:(0,_.normalizeClass)(p[e.size]),"aria-hidden":`true`},null,2),[[_.vShow,!a.value]])],10,St)],2),e.label||e.description||t.$slots.default?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,Ct,[e.label||t.$slots.default?((0,_.openBlock)(),(0,_.createElementBlock)(`label`,{key:0,for:(0,_.unref)(i),class:(0,_.normalizeClass)([v.value,`font-medium text-[var(--ht-text)] cursor-pointer select-none block leading-snug`,{"opacity-50":e.disabled}])},[(0,_.renderSlot)(t.$slots,`default`,{},()=>[(0,_.createTextVNode)((0,_.toDisplayString)(e.label),1)],!0)],10,wt)):(0,_.createCommentVNode)(``,!0),e.description||t.$slots.description?((0,_.openBlock)(),(0,_.createElementBlock)(`p`,{key:1,class:(0,_.normalizeClass)([y.value,`text-[var(--ht-text-muted)] mt-1 leading-snug`,{"opacity-50":e.disabled}])},[(0,_.renderSlot)(t.$slots,`description`,{},()=>[(0,_.createTextVNode)((0,_.toDisplayString)(e.description),1)],!0)],2)):(0,_.createCommentVNode)(``,!0)])):(0,_.createCommentVNode)(``,!0)]))}}),Et=$(Tt,[[`__scopeId`,`data-v-b9cc1c9f`]]),Dt=Symbol(`HtSelect`),Ot=Symbol(`HtSelectProps`);const kt=Symbol(`HtSelectGroup`);function At(e,t){let n=(0,_.ref)(!1),r=(0,_.ref)(e.modelValue),i=(0,_.ref)(-1),a=(0,_.ref)(null),o=(0,_.ref)(``),s=(0,_.ref)([]),c=Se(`ht-select`,[`triggerId`,`contentId`]),l=(0,_.ref)(new Map),u=(0,_.computed)(()=>s.value.filter(e=>!e.disabled).map(e=>e.index));function d(e){i.value=typeof e==`number`&&e>=0?e:-1}let f=()=>{d(null)},p=e=>s.value.find(t=>t.index===e&&!t.disabled),m=()=>{let[e]=u.value;d(e??null)},h=()=>{let e=u.value,t=e[e.length-1];d(typeof t==`number`?t:null)},g=e=>{let t=u.value;if(!t.length){d(null);return}let n=i.value,r=t.indexOf(n);if(r===-1){d(e===1?t[0]:t[t.length-1]);return}let a=(r+e+t.length)%t.length;d(t[a])},v=()=>{let e=p(i.value);e&&C(e.value)},y=(e=!1)=>{if(!u.value.length){f();return}if(e&&p(i.value))return;let t=s.value.find(e=>!e.disabled&&w(e.value));if(t){d(t.index);return}m()};(0,_.watch)(()=>e.modelValue,e=>{r.value=e});let b=()=>{e.disabled||(n.value=!n.value)},x=()=>{n.value=!1,f(),o.value=``,e.searchable||(0,_.nextTick)(()=>{a.value&&a.value.focus()})},S=()=>{e.disabled||(n.value=!0)},C=e=>{r.value=e,t(`update:modelValue`,e),t(`change`,e),x()},w=t=>{let n=r.value;return n==null?!1:e.by&&typeof e.by==`function`?e.by(n,t):e.by&&typeof e.by==`string`?n?.[e.by]===t?.[e.by]:n===t},T={open:n,selectedValue:r,highlightedIndex:i,triggerRef:a,optionsMap:l,inputValue:o,ids:c,toggle:b,close:x,openDropdown:S,select:C,isSelected:w,registerOption:(e,t)=>{l.value.set(e,t)},unregisterOption:e=>{l.value.delete(e)},setNavigableOptions:e=>{s.value=e,n.value?y(!0):f()},moveHighlight:g,highlightFirst:m,highlightLast:h,selectHighlighted:v,clearHighlight:f};return(0,_.watch)(r,()=>{n.value&&y()}),(0,_.watch)(()=>n.value,e=>{e?(0,_.nextTick)(()=>{y()}):f()}),(0,_.provide)(Dt,T),T}function jt(){let e=(0,_.inject)(Dt);if(!e)throw Error(`useSelectContext must be used within HtSelect`);return e}function Mt(e){(0,_.provide)(Ot,e)}function Nt(){return(0,_.inject)(Ot,{size:`md`,variant:`outline`,state:`default`,disabled:!1})}function Pt(e,t){let n=null,r=(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...r),n=null},t)};return r.cancel=()=>{n!==null&&(clearTimeout(n),n=null)},r}function Ft(e,t,n){let r=(0,_.ref)({loading:!1,error:null,abortController:null}),i=(0,_.ref)(new Map),a=(0,_.ref)([]),o=e=>`async-source:${e.toLowerCase().trim()}`,s=async t=>{let n=o(t);if(e.cacheStrategy===`memory`||!e.cacheStrategy)return i.value.get(n)||null;if(e.cacheStrategy===`session`){let e=sessionStorage.getItem(n);return e?JSON.parse(e):null}return e.cacheStrategy===`custom`&&e.cache?await e.cache.get(n):null},c=async(t,n)=>{let r=o(t);if(e.cacheStrategy===`memory`||!e.cacheStrategy){i.value.set(r,n);return}if(e.cacheStrategy===`session`){sessionStorage.setItem(r,JSON.stringify(n));return}e.cacheStrategy===`custom`&&e.cache&&await e.cache.set(r,n)},l=async t=>{r.value.abortController&&r.value.abortController.abort();let i=await s(t);if(i){a.value=i;return}let o=new AbortController;r.value={loading:!0,error:null,abortController:o},n(`loading-start`,t);try{let i=await e.source(t,o.signal);if(o.signal.aborted)return;a.value=i,await c(t,i),r.value={loading:!1,error:null,abortController:null},n(`loading-end`,i,t)}catch(i){if(i instanceof Error&&i.name===`AbortError`)return;let a=i instanceof Error?i:Error(String(i));r.value={loading:!1,error:a,abortController:null},n(`loading-error`,a,t),e.onError&&e.onError(a)}},u=Pt(l,e.debounce??250),d=(0,_.computed)(()=>{let n=e.searchThreshold??0;return t.value.length>=n});return(0,_.watch)(()=>t.value,e=>{if(!d.value){a.value=[];return}u(e)},{immediate:!1}),{loading:(0,_.computed)(()=>r.value.loading),error:(0,_.computed)(()=>r.value.error),options:(0,_.computed)(()=>a.value),loadOptions:l,cleanup:()=>{r.value.abortController&&r.value.abortController.abort(),i.value.clear()},clearCache:()=>i.value.clear()}}var It={class:`ht-combobox-tag__text`},Lt=[`id`,`value`,`disabled`,`placeholder`,`aria-expanded`,`aria-controls`,`aria-activedescendant`],Rt={class:`ht-combobox-suffix`},zt=(0,_.defineComponent)({__name:`HtSelectTrigger`,setup(e){let t=jt(),n=Nt(),r=(0,_.ref)(null),i=(0,_.ref)(null),a=(0,_.computed)(()=>{let e=t.selectedValue.value;return e==null?``:t.optionsMap.value.get(e)||``}),o=(0,_.computed)(()=>t.selectedValue.value!==void 0&&t.selectedValue.value!==null),s=(0,_.ref)(!1),c=(0,_.computed)(()=>{let e=t.highlightedIndex.value;if(!(!n.searchable||!t.open.value||e<0))return`${t.ids.contentId}-opt-${e}`}),l=e=>{t.open.value||t.openDropdown(),t.inputValue.value=String(e),s.value=!1},u=()=>{},d=e=>{e.preventDefault(),e.stopPropagation(),t.toggle()},f=e=>{e.preventDefault(),e.stopPropagation(),t.select(null),t.inputValue.value=``,s.value=!1;let n=document.getElementById(t.ids.triggerId);n&&n.focus()},p=e=>{if(!n.disabled){if(e.key===`Backspace`){if(!t.inputValue.value&&o.value){e.preventDefault(),s.value?(t.select(null),t.inputValue.value=``,s.value=!1):s.value=!0;return}}else s.value=!1;switch(e.key){case`ArrowDown`:e.preventDefault(),t.open.value?t.moveHighlight(1):(t.openDropdown(),t.highlightFirst());break;case`ArrowUp`:e.preventDefault(),t.open.value?t.moveHighlight(-1):(t.openDropdown(),t.highlightLast());break;case`Home`:t.open.value&&(e.preventDefault(),t.highlightFirst());break;case`End`:t.open.value&&(e.preventDefault(),t.highlightLast());break;case`Enter`:t.open.value&&(e.preventDefault(),t.selectHighlighted());break;case`Escape`:t.open.value&&(e.preventDefault(),t.close());break;case`Tab`:t.open.value&&t.close();break;default:s.value=!1;break}}},m=e=>{if(!n.disabled)switch(e.key){case`ArrowDown`:e.preventDefault(),t.open.value?t.moveHighlight(1):(t.openDropdown(),t.highlightFirst());break;case`ArrowUp`:e.preventDefault(),t.open.value?t.moveHighlight(-1):(t.openDropdown(),t.highlightLast());break;case`Home`:t.open.value&&(e.preventDefault(),t.highlightFirst());break;case`End`:t.open.value&&(e.preventDefault(),t.highlightLast());break;case`Enter`:case` `:case`Space`:case`Spacebar`:e.preventDefault(),t.open.value?t.selectHighlighted():(t.openDropdown(),t.highlightFirst());break;case`Escape`:t.open.value&&(e.preventDefault(),t.close());break;case`Tab`:t.open.value&&t.close();break;default:s.value=!1;break}};return(0,_.watch)(()=>t.selectedValue.value,()=>{s.value=!1}),(0,_.onMounted)(()=>{n.searchable?i.value&&(t.triggerRef.value=i.value):r.value&&r.value.$el&&(t.triggerRef.value=r.value.$el)}),(e,h)=>(0,_.unref)(n).searchable?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:0,ref_key:`comboboxTriggerRef`,ref:i,class:(0,_.normalizeClass)([`ht-combobox-trigger`,{"ht-combobox-trigger--disabled":(0,_.unref)(n).disabled,"ht-combobox-trigger--open":(0,_.unref)(t).open.value,[`ht-combobox-trigger--${(0,_.unref)(n).size}`]:(0,_.unref)(n).size,[`ht-combobox-trigger--${(0,_.unref)(n).variant}`]:(0,_.unref)(n).variant,[`ht-combobox-trigger--${(0,_.unref)(n).state}`]:(0,_.unref)(n).state}])},[o.value?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:0,class:(0,_.normalizeClass)([`ht-combobox-tag`,{"ht-combobox-tag--pending-clear":s.value}])},[(0,_.createElementVNode)(`span`,It,(0,_.toDisplayString)(a.value),1),(0,_.unref)(n).disabled?(0,_.createCommentVNode)(``,!0):((0,_.openBlock)(),(0,_.createElementBlock)(`button`,{key:0,type:`button`,class:`ht-combobox-tag__close`,"aria-label":`Clear selection`,tabindex:`-1`,onClick:f},[...h[2]||=[(0,_.createElementVNode)(`svg`,{class:`w-3 h-3`,fill:`currentColor`,viewBox:`0 0 20 20`},[(0,_.createElementVNode)(`path`,{d:`M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z`})],-1)]]))],2)):(0,_.createCommentVNode)(``,!0),(0,_.createElementVNode)(`input`,{id:(0,_.unref)(t).ids.triggerId,type:`text`,value:(0,_.unref)(t).inputValue.value,disabled:(0,_.unref)(n).disabled,placeholder:o.value?``:(0,_.unref)(n).placeholder,class:`ht-combobox-input`,role:`combobox`,"aria-expanded":(0,_.unref)(t).open.value?`true`:`false`,"aria-haspopup":`listbox`,"aria-controls":(0,_.unref)(t).ids.contentId,"aria-autocomplete":`list`,"aria-activedescendant":c.value,onInput:h[0]||=e=>l(e.target.value),onFocus:u,onKeydown:p},null,40,Lt),(0,_.createElementVNode)(`div`,Rt,[((0,_.openBlock)(),(0,_.createElementBlock)(`svg`,{class:(0,_.normalizeClass)([`h-4 w-4 transition-transform cursor-pointer`,{"rotate-180":(0,_.unref)(t).open.value}]),fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,xmlns:`http://www.w3.org/2000/svg`,onClick:d},[...h[3]||=[(0,_.createElementVNode)(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M19 9l-7 7-7-7`},null,-1)]],2))])],2)):((0,_.openBlock)(),(0,_.createBlock)(Q,{key:1,ref_key:`buttonComponentRef`,ref:r,type:`button`,id:(0,_.unref)(t).ids.triggerId,role:`button`,"aria-expanded":(0,_.unref)(t).open.value?`true`:`false`,"aria-haspopup":`listbox`,"aria-controls":(0,_.unref)(t).ids.contentId,size:(0,_.unref)(n).size,variant:(0,_.unref)(n).variant,disabled:(0,_.unref)(n).disabled,class:`w-full justify-between`,onClick:h[1]||=e=>(0,_.unref)(t).toggle(),onKeydown:m},{default:(0,_.withCtx)(()=>[(0,_.renderSlot)(e.$slots,`default`,{},void 0,!0),((0,_.openBlock)(),(0,_.createElementBlock)(`svg`,{class:(0,_.normalizeClass)([`w-4 h-4 ml-2 shrink-0 transition-transform`,{"rotate-180":(0,_.unref)(t).open.value}]),fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,xmlns:`http://www.w3.org/2000/svg`},[...h[4]||=[(0,_.createElementVNode)(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M19 9l-7 7-7-7`},null,-1)]],2))]),_:3},8,[`id`,`aria-expanded`,`aria-controls`,`size`,`variant`,`disabled`]))}}),Bt=$(zt,[[`__scopeId`,`data-v-f8f84f42`]]),Vt=(0,_.defineComponent)({__name:`HtSelectValue`,props:{placeholder:{default:`Select...`}},setup(e){let t=e,n=jt(),r=(0,_.computed)(()=>{let e=n.selectedValue.value;return e==null?t.placeholder:n.optionsMap.value.get(e)||(typeof e==`object`&&e&&`label`in e?e.label:String(e))}),i=(0,_.computed)(()=>n.selectedValue.value!=null);return(e,t)=>((0,_.openBlock)(),(0,_.createElementBlock)(`span`,{class:(0,_.normalizeClass)([`flex-1 text-left truncate`,{"text-[var(--ht-text-muted)]":!i.value}])},(0,_.toDisplayString)(r.value),3))}}),Ht=Vt,Ut=[`role`,`aria-modal`,`aria-label`],Wt=(0,_.defineComponent)({__name:`BasePopover`,props:{open:{type:Boolean},anchor:{default:null},position:{default:()=>({placement:`bottom`,align:`center`,offset:4,autoFlip:!0})},role:{default:`dialog`},ariaLabel:{default:``},closeOnClickOutside:{type:Boolean,default:!0},closeOnEscape:{type:Boolean,default:!0},trapFocus:{type:Boolean,default:!0},keepAlive:{type:Boolean,default:!1}},emits:[`update:open`,`close`,`opened`,`closed`],setup(e,{emit:t}){let n=e,r=t,i=(0,_.ref)(null),a=(0,_.ref)({position:`fixed`,top:`-10000px`,left:`-10000px`,transform:`none`,zIndex:`1000`}),o=(0,_.ref)(!1);function s(){let e=n.anchor,t=i.value;if(!e||!t)return;let r=e.getBoundingClientRect(),s=t.getBoundingClientRect(),c=window.innerWidth,l=window.innerHeight;if(r.bottom<0||r.top>l){f();return}let{placement:u=`bottom`,align:d=`center`,offset:p=4,autoFlip:m=!0}=n.position||{},h=0,g,_=0;switch(u){case`bottom`:h=r.bottom+p,_=r.left+(d===`center`?r.width/2-s.width/2:d===`end`?r.width-s.width:0);break;case`top`:g=l-r.top+p,_=r.left+(d===`center`?r.width/2-s.width/2:d===`end`?r.width-s.width:0);break;case`left`:h=r.top+(d===`center`?r.height/2-s.height/2:d===`end`?r.height-s.height:0),_=r.left-s.width-p;break;case`right`:h=r.top+(d===`center`?r.height/2-s.height/2:d===`end`?r.height-s.height:0),_=r.right+p;break}m&&(u===`bottom`&&h+s.height>l?(g=l-r.top+p,h=0):u===`top`&&g!==void 0&&l-g+s.height>l&&(h=r.bottom+p,g=void 0)),_<8&&(_=8),_+s.width>c-8&&(_=c-8-s.width),g===void 0?(h<8&&(h=8),h+s.height>l-8&&(h=Math.max(8,l-8-s.height))):(g<8&&(g=8),l-g-s.height<8&&(g=Math.max(8,l-8-s.height))),a.value={position:`fixed`,...g===void 0?{top:`${h}px`}:{bottom:`${g}px`},left:`${_}px`,transform:`none`,zIndex:`1000`},o.value=!0}function c(){let e=[`button:not([disabled])`,`input:not([disabled])`,`select:not([disabled])`,`textarea:not([disabled])`,`[tabindex]:not([tabindex="-1"])`].join(`,`);return i.value?Array.from(i.value.querySelectorAll(e)).filter(e=>e.offsetParent!==null):[]}function l(){if(!n.trapFocus)return;let e=c()[0];if(e)try{e.focus()}catch{}}function u(e){if(!n.trapFocus)return;let t=c();if(t.length===0)return;let r=t[0],a=t[t.length-1],o=document.activeElement;e.shiftKey?(!o||o===r||!i.value?.contains(o))&&(e.preventDefault(),a&&a.focus()):(!o||o===a||!i.value?.contains(o))&&(e.preventDefault(),r&&r.focus())}function d(e){e.key===`Escape`&&n.closeOnEscape?(e.preventDefault(),e.stopPropagation(),f()):e.key===`Tab`&&u(e)}function f(){r(`update:open`,!1),r(`close`)}let p=[],m=null;return(0,_.watch)(()=>n.anchor,e=>{e&&n.open&&(0,_.nextTick)(()=>{s()})},{immediate:!1}),(0,_.watch)(()=>n.open,e=>{if(e){o.value=!1,(0,_.nextTick)(()=>{s(),requestAnimationFrame(()=>{l(),r(`opened`)})});let e=e=>{if(!n.closeOnClickOutside)return;let t=e.target;n.anchor?.contains(t)||i.value?.contains(t)||f()},t=()=>{m!==null&&cancelAnimationFrame(m),m=requestAnimationFrame(()=>{s(),m=null})},a=()=>s();document.addEventListener(`mousedown`,e),document.addEventListener(`scroll`,t,{capture:!0,passive:!0}),window.addEventListener(`resize`,a),p=[()=>document.removeEventListener(`mousedown`,e),()=>document.removeEventListener(`scroll`,t,{capture:!0}),()=>window.removeEventListener(`resize`,a),()=>{m!==null&&(cancelAnimationFrame(m),m=null)}]}else o.value=!1,r(`closed`),p.forEach(e=>{try{e()}catch{}}),p=[]}),(0,_.onUnmounted)(()=>{p.forEach(e=>{try{e()}catch{}}),p=[]}),(t,n)=>((0,_.openBlock)(),(0,_.createBlock)(_.Teleport,{to:`body`},[e.keepAlive||e.open?(0,_.withDirectives)(((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:0,ref_key:`popoverRef`,ref:i,role:e.role,"aria-modal":e.role===`dialog`?`true`:void 0,"aria-label":e.ariaLabel,style:(0,_.normalizeStyle)({...a.value,opacity:o.value?`1`:`0`}),class:`ht-popover`,onClick:n[0]||=(0,_.withModifiers)(()=>{},[`stop`]),onMousedown:n[1]||=(0,_.withModifiers)(()=>{},[`stop`]),onKeydown:(0,_.withModifiers)(d,[`stop`])},[(0,_.renderSlot)(t.$slots,`default`,{},void 0,!0)],44,Ut)),[[_.vShow,!e.keepAlive||e.open]]):(0,_.createCommentVNode)(``,!0)]))}}),Gt=$(Wt,[[`__scopeId`,`data-v-98f67a6b`]]),Kt=[`id`,`aria-labelledby`],qt=(0,_.defineComponent)({__name:`HtSelectContent`,props:{placement:{default:`bottom`},align:{default:`start`},maxHeight:{default:`300px`}},setup(e){let t=e,n=jt(),r=Nt(),i=(0,_.ref)(null),a=(0,_.ref)(``);(0,_.watch)(()=>n.triggerRef.value,e=>{e&&(a.value=`${e.getBoundingClientRect().width}px`)},{immediate:!0}),(0,_.watch)(()=>n.open.value,e=>{e&&n.triggerRef.value&&(a.value=`${n.triggerRef.value.getBoundingClientRect().width}px`)});let o=(0,_.computed)(()=>{let e={maxHeight:t.maxHeight};return r.width&&!r.width.includes(`%`)?e.width=r.width:a.value?e.width=a.value:e.width=`8rem`,e});return(t,r)=>((0,_.openBlock)(),(0,_.createBlock)(Gt,{open:(0,_.unref)(n).open.value,anchor:(0,_.unref)(n).triggerRef.value,position:{placement:e.placement,align:e.align,offset:4,autoFlip:!0},role:`dialog`,"close-on-click-outside":!0,"close-on-escape":!0,"trap-focus":!1,"keep-alive":!0,"onUpdate:open":r[0]||=e=>(0,_.unref)(n).open.value=e},{default:(0,_.withCtx)(()=>[(0,_.createElementVNode)(`div`,{ref_key:`contentRef`,ref:i,id:(0,_.unref)(n).ids.contentId,role:`listbox`,"aria-labelledby":(0,_.unref)(n).ids.triggerId,tabindex:`-1`,class:`ht-select-content`,style:(0,_.normalizeStyle)(o.value)},[(0,_.renderSlot)(t.$slots,`default`,{},void 0,!0)],12,Kt)]),_:3},8,[`open`,`anchor`,`position`]))}}),Jt=$(qt,[[`__scopeId`,`data-v-242c6f15`]]),Yt=[`id`,`aria-selected`,`aria-disabled`,`data-highlighted`],Xt={key:0,class:`w-4 h-4 ml-auto shrink-0`,fill:`currentColor`,viewBox:`0 0 20 20`,xmlns:`http://www.w3.org/2000/svg`},Zt=(0,_.defineComponent)({__name:`HtSelectItem`,props:{value:{},disabled:{type:Boolean},textValue:{},itemIndex:{}},setup(e){let t=(0,_.inject)(kt,!1),n=e,r=jt(),i=Nt(),a=(0,_.ref)(null),o=()=>n.textValue?n.textValue:a.value&&a.value.textContent?.trim()||String(n.value);(0,_.onMounted)(()=>{a.value&&r.registerOption(n.value,o())}),(0,_.onUnmounted)(()=>{r.unregisterOption(n.value)});let s=(0,_.computed)(()=>{if(typeof n.itemIndex==`number`)return n.itemIndex;if(!a.value)return-1;let e=a.value.closest(`.ht-select-content`);return e?Array.from(e.querySelectorAll(`[data-ht-select-item="true"]:not([aria-disabled="true"])`)).indexOf(a.value):-1}),c=(0,_.computed)(()=>r.isSelected(n.value)),l=(0,_.computed)(()=>s.value>=0&&r.highlightedIndex.value===s.value),u=()=>{n.disabled||r.select(n.value)};return(0,_.watch)(l,e=>{e&&a.value&&a.value.scrollIntoView({block:`nearest`,behavior:`smooth`})}),(n,o)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{ref_key:`itemRef`,ref:a,"data-ht-select-item":`true`,id:s.value>=0?`${(0,_.unref)(r).ids.contentId}-opt-${s.value}`:void 0,role:`option`,"aria-selected":c.value?`true`:`false`,"aria-disabled":e.disabled?`true`:`false`,"data-highlighted":l.value?`true`:`false`,class:(0,_.normalizeClass)([`ht-select-item`,{"ht-select-item--selected":c.value,"ht-select-item--disabled":e.disabled,"ht-select-item--highlighted":l.value,"ht-select-item--multiline":(0,_.unref)(i).showMultiLines&&(0,_.unref)(i).showMultiLines>1,"ht-select-item--grouped":(0,_.unref)(t)}]),onClick:u},[(0,_.createElementVNode)(`span`,{class:`ht-select-item__text`,style:(0,_.normalizeStyle)({WebkitLineClamp:(0,_.unref)(i).showMultiLines&&(0,_.unref)(i).showMultiLines>1?(0,_.unref)(i).showMultiLines:void 0})},[(0,_.renderSlot)(n.$slots,`default`,{},void 0,!0)],4),c.value?((0,_.openBlock)(),(0,_.createElementBlock)(`svg`,Xt,[...o[0]||=[(0,_.createElementVNode)(`path`,{"fill-rule":`evenodd`,d:`M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z`,"clip-rule":`evenodd`},null,-1)]])):(0,_.createCommentVNode)(``,!0)],10,Yt))}}),Qt=$(Zt,[[`__scopeId`,`data-v-78cc8e80`]]),$t=[`aria-labelledby`],en=(0,_.defineComponent)({__name:`HtSelectGroup`,props:{id:{}},setup(e){return(0,_.provide)(kt,!0),(t,n)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{role:`group`,"aria-labelledby":e.id,class:`ht-select-group`},[(0,_.renderSlot)(t.$slots,`default`,{},void 0,!0)],8,$t))}}),tn=$(en,[[`__scopeId`,`data-v-b3ed0866`]]),nn=[`id`],rn=(0,_.defineComponent)({__name:`HtSelectLabel`,props:{id:{},sticky:{type:Boolean,default:!1}},setup(e){let t=e,n=(0,_.computed)(()=>t.id||`ht-select-label-${Math.random().toString(36).substr(2,9)}`);return(e,r)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{id:n.value,class:(0,_.normalizeClass)([`ht-select-label`,{"ht-select-label--sticky":t.sticky}]),role:`presentation`},[(0,_.renderSlot)(e.$slots,`default`,{},void 0,!0)],10,nn))}}),an=$(rn,[[`__scopeId`,`data-v-a100900a`]]),on={class:`ht-select-separator`,role:`separator`},sn=(0,_.defineComponent)({__name:`HtSelectSeparator`,setup(e){return(e,t)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,on))}}),cn=$(sn,[[`__scopeId`,`data-v-e4e4f67f`]]),ln={class:`ht-option-render`},un={class:`ht-option-render__content`},dn={key:0,class:`ht-option-render__title`},fn={key:1,class:`ht-option-render__description`},pn={key:2,class:`ht-option-render__meta`},mn={class:`ht-option-render__meta-label`},hn={class:`ht-option-render__meta-value`},gn={key:0,class:`ht-option-render__badge`},_n=(0,_.defineComponent)({__name:`HtSelectOptionRender`,props:{renderData:{},getBadgeClass:{type:Function}},setup(e){return(t,n)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,ln,[(0,_.createElementVNode)(`div`,un,[e.renderData.title?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,dn,(0,_.toDisplayString)(e.renderData.title),1)):(0,_.createCommentVNode)(``,!0),e.renderData.description?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,fn,(0,_.toDisplayString)(e.renderData.description),1)):(0,_.createCommentVNode)(``,!0),e.renderData.meta?.length?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,pn,[((0,_.openBlock)(!0),(0,_.createElementBlock)(_.Fragment,null,(0,_.renderList)(e.renderData.meta,(e,t)=>((0,_.openBlock)(),(0,_.createElementBlock)(`span`,{key:t,class:`ht-option-render__meta-item`},[(0,_.createElementVNode)(`span`,mn,(0,_.toDisplayString)(e.label)+`:`,1),(0,_.createElementVNode)(`span`,hn,(0,_.toDisplayString)(e.value),1)]))),128))])):(0,_.createCommentVNode)(``,!0)]),e.renderData.badge?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,gn,[(0,_.createElementVNode)(`span`,{class:(0,_.normalizeClass)([`ht-option-badge`,e.getBadgeClass(e.renderData.badgeType)])},(0,_.toDisplayString)(e.renderData.badge),3)])):(0,_.createCommentVNode)(``,!0)]))}}),vn=$(_n,[[`__scopeId`,`data-v-62e06951`]]),yn={key:0,class:`ht-select-empty`},bn={key:0,class:`ht-select-threshold-hint`},xn={key:1},Sn={key:2,class:`ht-select-error`},Cn={key:3},wn={key:0,class:`ht-select-empty`},Tn={key:0,class:`ht-select-threshold-hint`},En={key:1},Dn={key:2,class:`ht-select-error`},On={key:3},kn=(0,_.defineComponent)({__name:`HtSelect`,props:{modelValue:{},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},name:{},size:{default:`md`},variant:{default:`outline`},state:{default:`default`},width:{},showMultiLines:{default:1},clearable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},searchFields:{default:`auto`},by:{},options:{},placeholder:{default:`Select...`},groupBy:{default:`group`},groupLabelSticky:{type:Boolean,default:!1},emptyText:{default:`No options available`},emptySearchText:{default:`No results found`},defaultGroupName:{default:`Other`},valueField:{default:`value`},labelField:{default:`label`},optionDisabled:{},optionRender:{},source:{},debounce:{},searchThreshold:{},searchThresholdHint:{},cacheStrategy:{},cache:{},initialOptions:{},minResults:{},minResultsText:{},searchPlaceholder:{}},emits:[`update:modelValue`,`change`,`loading-start`,`loading-end`,`loading-error`],setup(e,{emit:t}){let n=e,r=t,i=At(n,r);Mt(n);let a=(0,_.computed)(()=>!!n.source),o=a.value?Ft({source:n.source,debounce:n.debounce,searchThreshold:n.searchThreshold,cacheStrategy:n.cacheStrategy,cache:n.cache},i.inputValue,(e,...t)=>{e===`loading-start`?r(`loading-start`,t[0]):e===`loading-end`?r(`loading-end`,t[0],t[1]):e===`loading-error`&&r(`loading-error`,t[0],t[1])}):null,s=(0,_.computed)(()=>({width:n.width})),c=(0,_.computed)(()=>a.value?!0:Array.isArray(n.options)&&n.options.length>0),l=(0,_.computed)(()=>a.value&&o?!i.inputValue.value&&n.initialOptions?n.initialOptions:o.options.value:n.options?n.options.map(e=>{if(typeof e==`string`||typeof e==`number`)return{value:e,label:String(e),disabled:!1};let t=n.valueField||`value`,r=n.labelField||`label`,i=n.optionDisabled?n.optionDisabled(e):e.disabled||!1;return{value:e[t],label:e[r]||String(e[t]),disabled:i,...e}}):[]);function u(e,t,n,r){let i=e=>n.includes(e);if(i(`label`)&&(e.label?.toLowerCase()||``).includes(t))return!0;if(r){let n=r(e);if(!n)return!1;if(i(`title`)&&n.title?.toLowerCase().includes(t)||i(`description`)&&n.description?.toLowerCase().includes(t)||i(`meta`)&&n.meta&&Array.isArray(n.meta)&&n.meta.some(e=>{let n=String(e.label||``).toLowerCase(),r=String(e.value||``).toLowerCase();return n.includes(t)||r.includes(t)})||i(`badge`)&&n.badge?.toLowerCase().includes(t))return!0}return!1}let d=(0,_.computed)(()=>{if(a.value)return l.value;let e=i.inputValue.value.trim().toLowerCase();if(!e)return l.value;let t;t=n.searchFields===`auto`?n.optionRender?[`label`,`title`,`description`,`meta`,`badge`]:[`label`]:n.searchFields===`basic`?[`label`]:n.searchFields===`full`?[`label`,`title`,`description`,`meta`,`badge`]:n.searchFields;let r=n.optionRender?e=>n.optionRender(e,{index:0}):void 0;return l.value.filter(n=>u(n,e,t,r))}),f=(0,_.computed)(()=>{if(!c.value)return[];let e=0;return d.value.map(t=>{let r=n.groupBy?t[n.groupBy]:void 0,i=r!=null&&r!==``,a=e++;return{option:t,index:a,group:i?String(r):void 0,renderData:n.optionRender?n.optionRender(t,{index:a}):null}})}),p=(0,_.computed)(()=>{if(!n.groupBy||!f.value.length||!f.value.some(e=>e.group!==void 0))return null;let e=new Map;return f.value.forEach(t=>{let r=t.group??n.defaultGroupName;e.has(r)||e.set(r,[]),e.get(r).push(t)}),Array.from(e.entries()).map(([e,t])=>({name:e,options:t}))}),m=(0,_.computed)(()=>c.value?f.value.map(e=>({index:e.index,value:e.option.value,disabled:!!e.option.disabled})):[]);(0,_.watch)(()=>c.value?m.value:[],e=>{i.setNavigableOptions(e)},{immediate:!0});let h=(0,_.computed)(()=>p.value),g=e=>{let t={primary:`ht-option-badge--primary`,success:`ht-option-badge--success`,warning:`ht-option-badge--warning`,info:`ht-option-badge--info`,default:`ht-option-badge--default`},n=e||`primary`;return t[n]===void 0?t.primary:t[n]},v=(0,_.computed)(()=>{if(!a.value||!n.searchThreshold)return!1;let e=i.inputValue.value.trim().length;return e>0&&e<n.searchThreshold}),y=(0,_.computed)(()=>{let e=n.searchThreshold||0,t=`Type ${e} or more characters to search...`;return(n.searchThresholdHint||t).replace(`{n}`,String(e))});return(e,t)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{class:`ht-select-root`,style:(0,_.normalizeStyle)(s.value)},[c.value?((0,_.openBlock)(),(0,_.createElementBlock)(_.Fragment,{key:0},[(0,_.createVNode)(Bt,null,{default:(0,_.withCtx)(()=>[(0,_.createVNode)(Ht,{placeholder:n.placeholder},null,8,[`placeholder`])]),_:1}),(0,_.createVNode)(Jt,null,{default:(0,_.withCtx)(()=>[h.value?((0,_.openBlock)(),(0,_.createElementBlock)(_.Fragment,{key:1},[((0,_.openBlock)(!0),(0,_.createElementBlock)(_.Fragment,null,(0,_.renderList)(h.value,(e,t)=>((0,_.openBlock)(),(0,_.createElementBlock)(_.Fragment,{key:e.name},[(0,_.createVNode)(tn,{id:`${(0,_.unref)(i).ids.contentId}-group-${t}-label`},{default:(0,_.withCtx)(()=>[(0,_.createVNode)(an,{id:`${(0,_.unref)(i).ids.contentId}-group-${t}-label`,sticky:n.groupLabelSticky},{default:(0,_.withCtx)(()=>[(0,_.createTextVNode)((0,_.toDisplayString)(e.name),1)]),_:2},1032,[`id`,`sticky`]),((0,_.openBlock)(!0),(0,_.createElementBlock)(_.Fragment,null,(0,_.renderList)(e.options,e=>((0,_.openBlock)(),(0,_.createBlock)(Qt,{key:String(e.option.value),value:e.option.value,disabled:e.option.disabled,"text-value":e.option.label,"item-index":e.index,class:(0,_.normalizeClass)({"ht-option-custom":!!n.optionRender})},{default:(0,_.withCtx)(()=>[e.renderData?((0,_.openBlock)(),(0,_.createBlock)(vn,{key:0,"render-data":e.renderData,"get-badge-class":g},null,8,[`render-data`])):((0,_.openBlock)(),(0,_.createElementBlock)(_.Fragment,{key:1},[(0,_.createTextVNode)((0,_.toDisplayString)(e.option.label),1)],64))]),_:2},1032,[`value`,`disabled`,`text-value`,`item-index`,`class`]))),128))]),_:2},1032,[`id`]),t<h.value.length-1?((0,_.openBlock)(),(0,_.createBlock)(cn,{key:0})):(0,_.createCommentVNode)(``,!0)],64))),128)),h.value.length?(0,_.createCommentVNode)(``,!0):((0,_.openBlock)(),(0,_.createElementBlock)(`div`,wn,[v.value?((0,_.openBlock)(),(0,_.createElementBlock)(`span`,Tn,(0,_.toDisplayString)(y.value),1)):a.value&&(0,_.unref)(o)?.loading.value?((0,_.openBlock)(),(0,_.createElementBlock)(`span`,En,` Loading... `)):a.value&&(0,_.unref)(o)?.error.value?((0,_.openBlock)(),(0,_.createElementBlock)(`span`,Dn,(0,_.toDisplayString)((0,_.unref)(o).error.value.message),1)):((0,_.openBlock)(),(0,_.createElementBlock)(`span`,On,(0,_.toDisplayString)((0,_.unref)(i).inputValue.value?n.emptySearchText:n.emptyText),1))]))],64)):((0,_.openBlock)(),(0,_.createElementBlock)(_.Fragment,{key:0},[((0,_.openBlock)(!0),(0,_.createElementBlock)(_.Fragment,null,(0,_.renderList)(f.value,e=>((0,_.openBlock)(),(0,_.createBlock)(Qt,{key:String(e.option.value),value:e.option.value,disabled:e.option.disabled,"text-value":e.option.label,"item-index":e.index,class:(0,_.normalizeClass)({"ht-option-custom":!!n.optionRender})},{default:(0,_.withCtx)(()=>[e.renderData?((0,_.openBlock)(),(0,_.createBlock)(vn,{key:0,"render-data":e.renderData,"get-badge-class":g},null,8,[`render-data`])):((0,_.openBlock)(),(0,_.createElementBlock)(_.Fragment,{key:1},[(0,_.createTextVNode)((0,_.toDisplayString)(e.option.label),1)],64))]),_:2},1032,[`value`,`disabled`,`text-value`,`item-index`,`class`]))),128)),f.value.length===0?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,yn,[v.value?((0,_.openBlock)(),(0,_.createElementBlock)(`span`,bn,(0,_.toDisplayString)(y.value),1)):a.value&&(0,_.unref)(o)?.loading.value?((0,_.openBlock)(),(0,_.createElementBlock)(`span`,xn,` Loading... `)):a.value&&(0,_.unref)(o)?.error.value?((0,_.openBlock)(),(0,_.createElementBlock)(`span`,Sn,(0,_.toDisplayString)((0,_.unref)(o).error.value.message),1)):((0,_.openBlock)(),(0,_.createElementBlock)(`span`,Cn,(0,_.toDisplayString)((0,_.unref)(i).inputValue.value?n.emptySearchText:n.emptyText),1))])):(0,_.createCommentVNode)(``,!0)],64))]),_:1})],64)):(0,_.renderSlot)(e.$slots,`default`,{key:1},void 0,!0)],4))}}),An=$(kn,[[`__scopeId`,`data-v-3e5871d6`]]),jn=(0,_.defineComponent)({__name:`CheckboxCell`,props:{rowData:{},rowIndex:{},isSelected:{type:Boolean},column:{},options:{default:()=>({})},isFiltered:{type:Boolean,default:!1},isGrouped:{type:Boolean,default:!1}},emits:[`toggle-selection`],setup(e,{emit:t}){let n=e,r=t,i=(0,_.computed)(()=>{if(n.column.condition){let e=n.column.condition(n.rowData);return{disabled:!e,reason:e?void 0:`Row does not meet selection criteria`}}return{disabled:!1}}),a=(0,_.computed)(()=>i.value.disabled),o=(0,_.computed)(()=>i.value.reason);function s(e){a.value||r(`toggle-selection`,n.rowData,n.rowIndex)}return(t,n)=>((0,_.openBlock)(),(0,_.createBlock)((0,_.unref)(yt),{"model-value":e.isSelected,disabled:a.value,title:o.value,size:`sm`,variant:`default`,"data-ht-functional":`checkbox`,"onUpdate:modelValue":s,onClick:n[0]||=(0,_.withModifiers)(()=>{},[`stop`])},null,8,[`model-value`,`disabled`,`title`]))}}),Mn=jn,Nn={name:`HtCheckboxHeader`},Pn=(0,_.defineComponent)({...Nn,props:{totalSelectableRows:{},selectedCount:{},options:{default:()=>({})}},emits:[`select-all`,`clear-selection`],setup(e,{emit:t}){let n=e,r=t,i=(0,_.computed)(()=>n.totalSelectableRows>0&&n.selectedCount===n.totalSelectableRows),a=(0,_.computed)(()=>n.options?.showIndeterminate!==!1&&n.selectedCount>0&&n.selectedCount<n.totalSelectableRows),o=(0,_.computed)(()=>i.value?`Deselect all (${n.selectedCount} selected)`:a.value?`Select all (${n.selectedCount}/${n.totalSelectableRows} selected)`:`Select all (${n.totalSelectableRows} rows)`);function s(e){i.value?r(`clear-selection`):r(`select-all`)}return(e,t)=>((0,_.openBlock)(),(0,_.createBlock)((0,_.unref)(yt),{"model-value":i.value,indeterminate:a.value,title:o.value,class:`ht-checkbox-header`,size:`sm`,variant:`default`,"data-ht-functional":`checkbox-header`,"onUpdate:modelValue":s,onClick:t[0]||=(0,_.withModifiers)(()=>{},[`stop`])},null,8,[`model-value`,`indeterminate`,`title`]))}}),Fn=Pn,In={name:`HtRadioCell`},Ln=(0,_.defineComponent)({...In,props:{rowData:{},rowIndex:{},isSelected:{type:Boolean},column:{},options:{default:()=>({})},isFiltered:{type:Boolean,default:!1},isGrouped:{type:Boolean,default:!1}},emits:[`toggle-selection`],setup(e,{emit:t}){let n=e,r=t,i=(0,_.inject)(tt,`ht-grid`),a=(0,_.computed)(()=>{if(n.options?.radioGroupName)return n.options.radioGroupName;let e=n.column?.id||n.column?.field||`radio`;return`${i}--${e}`}),o=(0,_.computed)(()=>{if(n.column.condition){let e=n.column.condition(n.rowData);return{disabled:!e,reason:e?void 0:`Row does not meet selection criteria`}}return{disabled:!1}}),s=(0,_.computed)(()=>o.value.disabled),c=(0,_.computed)(()=>o.value.reason),l=(0,_.computed)(()=>s.value?c.value||`Cannot select this row`:n.isSelected?`Selected row`:`Select this row`);function u(e){s.value||r(`toggle-selection`,n.rowData,n.rowIndex)}return(t,r)=>((0,_.openBlock)(),(0,_.createBlock)((0,_.unref)(Et),{"model-value":e.isSelected?n.rowData:void 0,value:n.rowData,disabled:s.value,name:a.value,title:l.value,size:`sm`,variant:`default`,"data-ht-functional":`radio`,"onUpdate:modelValue":u,onClick:r[0]||=(0,_.withModifiers)(()=>{},[`stop`])},null,8,[`model-value`,`value`,`disabled`,`name`,`title`]))}}),Rn=Ln,zn={class:`ht-radio-header`,"data-ht-functional":`radio-header`},Bn=[`title`],Vn={name:`HtRadioHeader`},Hn=(0,_.defineComponent)({...Vn,props:{totalSelectableRows:{},selectedCount:{},options:{default:()=>({})}},setup(e){let t=e,n=(0,_.computed)(()=>t.options?.headerLabel||``),r=(0,_.computed)(()=>t.selectedCount===1?`1 row selected`:`${t.totalSelectableRows} rows available`);return(e,t)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,zn,[(0,_.createElementVNode)(`span`,{class:`ht-radio-header-label`,title:r.value},(0,_.toDisplayString)(n.value),9,Bn)]))}}),Un=$(Hn,[[`__scopeId`,`data-v-ef2ebbc9`]]),Wn={class:`ht-seq-cell`,"data-ht-functional":`seq`},Gn=(0,_.defineComponent)({__name:`SeqCell`,props:{rowIndex:{},options:{default:()=>({})},paginationOffset:{default:0}},setup(e){let t=e,n=(0,_.computed)(()=>t.options?.baseNumber??1),r=(0,_.computed)(()=>{let e=t.rowIndex+t.paginationOffset,r=e+n.value;return t.options?.formatter?t.options.formatter(e,n.value):r});return(e,t)=>((0,_.openBlock)(),(0,_.createElementBlock)(`span`,Wn,(0,_.toDisplayString)(r.value),1))}}),Kn=$(Gn,[[`__scopeId`,`data-v-d3df6ea7`]]),qn=[`innerHTML`],Jn={class:`ht-action-label`},Yn=(0,_.defineComponent)({__name:`ActionsCell`,props:{rowData:{},rowIndex:{},options:{default:()=>({})}},setup(e){let t=e,n=(0,_.computed)(()=>t.options?.buttons&&t.options.buttons.length>0),r=(0,_.computed)(()=>t.options?.buttons?t.options.buttons.filter(e=>e.visible?e.visible(t.rowData):!0):[]);function i(e){return e.disabled?e.disabled(t.rowData):!1}function a(e){i(e)||e.onClick(t.rowData)}return(t,o)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{class:`ht-actions-cell`,"data-ht-functional":`actions`,onClick:o[0]||=(0,_.withModifiers)(()=>{},[`stop`]),onDblclick:o[1]||=(0,_.withModifiers)(()=>{},[`stop`]),onContextmenu:o[2]||=(0,_.withModifiers)(()=>{},[`stop`]),onMousedown:o[3]||=(0,_.withModifiers)(()=>{},[`stop`]),onMouseup:o[4]||=(0,_.withModifiers)(()=>{},[`stop`]),onPointerdown:o[5]||=(0,_.withModifiers)(()=>{},[`stop`]),onTouchstart:o[6]||=(0,_.withModifiers)(()=>{},[`stop`]),onTouchend:o[7]||=(0,_.withModifiers)(()=>{},[`stop`])},[(0,_.renderSlot)(t.$slots,`actions`,{rowData:e.rowData,rowIndex:e.rowIndex},()=>[n.value?((0,_.openBlock)(!0),(0,_.createElementBlock)(_.Fragment,{key:0},(0,_.renderList)(r.value,(e,t)=>((0,_.openBlock)(),(0,_.createBlock)(Q,{key:t,variant:`secondary`,size:`sm`,class:`gap-1`,disabled:i(e),onClick:t=>a(e)},{default:(0,_.withCtx)(()=>[e.icon?((0,_.openBlock)(),(0,_.createElementBlock)(`span`,{key:0,class:`ht-action-icon`,innerHTML:e.icon},null,8,qn)):(0,_.createCommentVNode)(``,!0),(0,_.createElementVNode)(`span`,Jn,(0,_.toDisplayString)(e.label),1)]),_:2},1032,[`disabled`,`onClick`]))),128)):(0,_.createCommentVNode)(``,!0)],!0)],32))}}),Xn=$(Yn,[[`__scopeId`,`data-v-26d134b5`]]),Zn=[`disabled`,`title`,`draggable`,`aria-disabled`,`aria-grabbed`,`aria-label`],Qn={name:`HtDragCell`},$n=(0,_.defineComponent)({...Qn,props:{rowData:{},rowIndex:{},options:{default:()=>({})}},emits:[`drag-start`,`drag-end`],setup(e,{emit:t}){let n=e,r=t,i=(0,_.ref)(!1),a=(0,_.inject)(`setDraggingRowId`,()=>{}),o=(0,_.inject)(nt,null),s=(0,_.computed)(()=>({rowIndex:n.rowIndex})),c=(0,_.ref)(0),l=(0,_.computed)(()=>{if(c.value,!o)return!1;let e=o.getSortConfig?.();return e?`fields`in e?e.fields.length>0:!!(`field`in e&&e.field):!1});(0,_.onMounted)(()=>{if(o?.on){let e=()=>{c.value++};o.on(`data-refresh-requested`,e),(0,_.onUnmounted)(()=>{o.off?.(`data-refresh-requested`,e)})}});let u=(0,_.computed)(()=>{if(l.value)return{disabled:!0,reason:`Table is sorted. Clear sorting to enable row dragging`};if(n.options?.isRowDraggable){let e=n.options.isRowDraggable(n.rowData,s.value);return typeof e==`boolean`?{disabled:!e}:e}return{disabled:!1}}),d=(0,_.computed)(()=>u.value.disabled),f=(0,_.computed)(()=>d.value?u.value.reason||`Cannot drag this row`:`Drag to reorder`),p=(0,_.computed)(()=>d.value?u.value.reason?`Drag disabled: ${u.value.reason}`:`Drag disabled`:`Drag handle: drag to reorder row`);function m(e,t){let r=document.createElement(`div`);return r.className=`ht-drag-preview`,r.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    padding: 8px 16px;
    background: var(--ht-bg, white);
    border: 2px solid var(--ht-primary, rgb(59 130 246));
    border-radius: 6px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    font-size: 14px;
    color: var(--ht-text, #374151);
    white-space: nowrap;
    z-index: 9999;
    pointer-events: none;
    opacity: 0;
    transform: translate(-9999px, -9999px);
  `,r.textContent=n.options?.dragPreviewContent?n.options.dragPreviewContent(e):`Row ${t+1}`,document.body.appendChild(r),r}function h(e){if(d.value){e.preventDefault(),l.value&&o?.emit&&o.emit(`user-notification`,{type:`warn`,message:`Table is sorted. Clear sorting to enable row dragging`,details:`Click the sort indicator in the column header to clear sorting`});return}i.value=!0;let t=n.rowData?.id??n.rowIndex;if(a(t),e.dataTransfer){e.dataTransfer.effectAllowed=`move`,e.dataTransfer.setData(`application/json`,JSON.stringify({rowData:n.rowData,rowIndex:n.rowIndex}));let t=null;t=n.options?.dragImageElement?n.options.dragImageElement(n.rowData):m(n.rowData,n.rowIndex),t&&(t.style.opacity===`0`&&(t.style.opacity=`1`,t.style.transform=`translate(0, 0)`),e.dataTransfer.setDragImage(t,10,10),requestAnimationFrame(()=>{t&&t.parentNode===document.body&&document.body.removeChild(t)}))}r(`drag-start`,n.rowData,n.rowIndex,e)}function g(e){i.value=!1,a(null),r(`drag-end`,n.rowData,n.rowIndex,e)}return(e,t)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{class:(0,_.normalizeClass)([`ht-drag-cell`,{"ht-drag-disabled":d.value,"ht-drag-active":i.value}]),"data-ht-functional":`drag`},[(0,_.createElementVNode)(`button`,{class:`ht-drag-handle`,disabled:d.value,title:f.value,draggable:!d.value,"aria-disabled":d.value?`true`:`false`,"aria-grabbed":i.value?`true`:`false`,"aria-label":p.value,"aria-roledescription":`Drag handle`,onDragstart:h,onDragend:g,onClick:t[0]||=(0,_.withModifiers)(()=>{},[`stop`])},[...t[1]||=[(0,_.createElementVNode)(`svg`,{class:`ht-drag-icon`,viewBox:`0 0 16 16`,fill:`currentColor`},[(0,_.createElementVNode)(`path`,{d:`M5 3.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zM5 8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zM5 12.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z`}),(0,_.createElementVNode)(`path`,{d:`M14 3.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zM14 8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zM14 12.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z`})],-1)]],40,Zn)],2))}}),er=$($n,[[`__scopeId`,`data-v-dddbe9d8`]]);function tr({columnRef:e,dragContextRef:t,emit:n}){let r=(0,_.computed)(()=>Ee(e.value)),i=(0,_.ref)(!1),a=(0,_.ref)(null),o=(0,_.ref)(!1),s=(0,_.computed)(()=>{let t=e.value;return!(Z(t)||t.reorderable===!1||t.draggable===!1)});(0,_.watch)(t,e=>{e||(o.value=!1,a.value=null)});let c=()=>{a.value=null,o.value=!1},l=t=>{if(!s.value){t.preventDefault();return}i.value=!0,a.value=null,t.dataTransfer&&(t.dataTransfer.effectAllowed=`move`,t.dataTransfer.setData(`text/plain`,e.value.id),t.dataTransfer.setData(`application/happy-table-column`,e.value.id)),n(`column-drag-start`,{columnId:e.value.id,pinned:r.value})},u=()=>{i.value=!1,c(),n(`column-drag-end`)},d=e=>{let t=e.currentTarget.getBoundingClientRect();return e.clientX-t.left<=t.width/2?`before`:`after`};return{pinnedSide:r,isColumnDraggable:s,isDragSource:i,dragOverPosition:a,isDropBlocked:o,handleColumnDragStart:l,handleColumnDragEnd:u,handleColumnDragOver:n=>{if(!s.value||i.value)return;if(Te(t.value,e.value)){o.value=!0,a.value=null,n.dataTransfer&&(n.dataTransfer.dropEffect=`none`);return}o.value=!1,n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect=`move`);let r=d(n);a.value!==r&&(a.value=r)},handleColumnDragLeave:()=>{a.value!==null&&(a.value=null),o.value&&=!1},handleColumnDrop:r=>{if(!s.value)return;if(Te(t.value,e.value)){o.value=!0,a.value=null,r.dataTransfer&&(r.dataTransfer.dropEffect=`none`);return}r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect=`move`);let l=i.value?`after`:d(r);c(),n(`column-drop`,{columnId:e.value.id,position:l})}}}function nr({columnRef:e,gridAPI:t,getCurrentWidth:n}){let r=(0,_.computed)(()=>e.value.resizable!==!1),i=(0,_.ref)(!1),a=()=>{i.value&&(i.value=!1,typeof document<`u`&&document.body.classList.remove(`ht-grid-resizing`),typeof window<`u`&&(window.removeEventListener(`mouseup`,a),window.removeEventListener(`blur`,a)))};return(0,_.onBeforeUnmount)(()=>{a()}),{isColumnResizable:r,isResizeActive:i,handleResize:o=>{if(!r.value||o.button!==0)return;let s=o.detail>1;o.preventDefault(),o.stopPropagation(),!s&&(i.value||(i.value=!0,typeof document<`u`&&document.body.classList.add(`ht-grid-resizing`),typeof window<`u`&&(window.addEventListener(`mouseup`,a),window.addEventListener(`blur`,a))),t?.emit(`column-resize-start`,{columnId:e.value.id,startX:o.clientX,currentWidth:n()}))},handleResizeDoubleClick:n=>{if(!r.value)return;n.preventDefault(),n.stopPropagation();let i=t;typeof i.autoSizeColumn==`function`&&i.autoSizeColumn(e.value.id)},handleResizeEndVisuals:a}}var rr=[`draggable`,`title`],ir=[`title`],ar=[`aria-label`,`onKeydown`],or={key:0,class:`ht-sort-hint absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-[var(--ht-primary)] text-[var(--ht-text-inverse)] text-xs rounded shadow-lg whitespace-nowrap z-50 pointer-events-none`},sr=`ht-sort-hint-shown`,cr=(0,_.defineComponent)({__name:`SortIndicator`,props:{column:{},gridAPI:{},compact:{type:Boolean}},emits:[`sort-priority-change`,`sort-indicator-focus`],setup(e,{emit:t}){let n=e,r=t,i=c.createLogger(`SortIndicator`),a=(0,_.ref)(null),o=(0,_.ref)(!1),s=(0,_.ref)(!1),l=()=>{typeof window<`u`&&window.localStorage&&(s.value=localStorage.getItem(sr)===`true`)},u=()=>{typeof window<`u`&&window.localStorage&&(localStorage.setItem(sr,`true`),s.value=!0,o.value=!1)},d=null,f=()=>{let e=n.gridAPI?.getMultiSortConfig?.(),t=n.gridAPI?.getSortConfig?.();if(e&&`fields`in e){let t=e.fields.find(e=>e.field===n.column.field);if(t){a.value={direction:t.direction,priority:t.priority,isMultiSort:e.fields.length>1,totalFields:e.fields.length};return}}if(t){if(`field`in t&&`direction`in t){if(t.field===n.column.field){a.value={direction:t.direction,priority:0,isMultiSort:!1,totalFields:1};return}}else if(`fields`in t){let e=t.fields.find(e=>e.field===n.column.field);if(e){a.value={direction:e.direction,priority:e.priority,isMultiSort:t.fields.length>1,totalFields:t.fields.length};return}}}a.value=null};(0,_.onMounted)(()=>{l(),n.gridAPI?.on&&(f(),d=n.gridAPI.on(`multi-sort-change`,()=>{f()}))}),(0,_.onUnmounted)(()=>{d?.()});let p=(0,_.computed)(()=>a.value),m=(0,_.computed)(()=>{let e=p.value;return[`ht-sort-indicator`,`inline-flex items-center`,`transition-all duration-200`,`group`,{"gap-1":!n.compact&&!e?.isMultiSort,"gap-0.5":n.compact||e?.isMultiSort,"ml-1":!n.compact&&!e?.isMultiSort,"ml-0.5":n.compact||e?.isMultiSort,"cursor-grab":e?.isMultiSort&&e.priority>0,"active:cursor-grabbing":e?.isMultiSort&&e.priority>0}].filter(Boolean)}),h=e=>{if(!n.column.sortable||!n.gridAPI)return;e.preventDefault(),e.stopPropagation(),o.value&&u();let t=e.ctrlKey||e.metaKey,r=n.gridAPI?.sortByColumn,a=n.gridAPI?.addSortField;t&&a?a(n.column.field):t&&!a?(i.warn(`Multi-column sorting is not enabled. Current basic sorting plugin only supports single column sorting.`),i.info(`Tip: To enable multi-column sorting, use pluginPresets.enhanced or createSortingPlugin({ enableMultiSort: true })`),n.gridAPI?.emit?.(`multi-sort-disabled-warning`,{attempted:!0,message:`Multi-column sorting is not enabled. Please use enhanced plugin to enable this feature.`})):r&&r(n.column.field),f()},g=()=>{!s.value&&!o.value&&(o.value=!0)},v=e=>{if(!p.value?.isMultiSort)return;e.preventDefault(),e.stopPropagation();let t=p.value.priority,i=(p.value.totalFields||1)-1,a=t>=i?0:t+1;r(`sort-priority-change`,n.column.field,a)},y=()=>{r(`sort-indicator-focus`,n.column.field)},b=e=>{e.stopPropagation(),p.value?.isMultiSort&&e.dataTransfer?.setData(`text/plain`,JSON.stringify({field:n.column.field,priority:p.value.priority}))},x=e=>{e.stopPropagation(),p.value?.isMultiSort&&e.preventDefault()},S=e=>{if(e.stopPropagation(),p.value?.isMultiSort){e.preventDefault();try{let t=JSON.parse(e.dataTransfer?.getData(`text/plain`)||`{}`);t.field&&t.field!==n.column.field&&r(`sort-priority-change`,t.field,p.value.priority)}catch(e){i.warn(`Invalid drag data:`,e)}}};return(t,r)=>e.column.sortable?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:0,class:(0,_.normalizeClass)([m.value,`relative`]),draggable:p.value?.isMultiSort,title:p.value?`Sorted ${p.value.direction===`asc`?`ascending`:`descending`}${p.value.isMultiSort?` (priority ${p.value.priority+1})`:``}. Click again to ${p.value.direction===`asc`?`sort descending`:`clear sorting`}. ${p.value.isMultiSort?`Drag to reorder priority. `:``}${(0,_.unref)(_e)(`click`)} to add secondary sort.`:`Click to sort ascending. Three-state cycle: none → asc → desc → none. ${(0,_.unref)(_e)(`click`)} to add secondary sort.`,onDragstart:(0,_.withModifiers)(b,[`stop`]),onDragover:(0,_.withModifiers)(x,[`stop`]),onDrop:(0,_.withModifiers)(S,[`stop`])},[p.value?.isMultiSort?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:0,class:`ht-priority-badge relative flex items-center justify-center`,title:`Sort priority ${p.value.priority+1} of ${p.value.totalFields}. Click to reorder.`,onClick:(0,_.withModifiers)(v,[`stop`])},[(0,_.createElementVNode)(`div`,{class:(0,_.normalizeClass)([`min-w-[10px] h-2.5 px-0.5 rounded-full font-semibold flex items-center justify-center transition-all duration-200 cursor-pointer hover:scale-110`,{"bg-[var(--ht-primary)] text-[var(--ht-text-inverse)] shadow-sm text-[9px]":p.value.priority===0,"bg-[var(--ht-primary-hover)] text-[var(--ht-text-inverse)] shadow-sm text-[9px]":p.value.priority===1,"bg-[var(--ht-primary-active)] text-[var(--ht-text-inverse)] shadow-sm text-[9px]":p.value.priority===2,"bg-[var(--ht-primary-subtle)] text-[var(--ht-text)] shadow-sm text-[8px]":p.value.priority>2}])},(0,_.toDisplayString)(p.value.priority+1),3)],8,ir)):(0,_.createCommentVNode)(``,!0),(0,_.createElementVNode)(`div`,{class:(0,_.normalizeClass)([`ht-sort-icon flex items-center justify-center flex-shrink-0 cursor-pointer transition-all duration-200 hover:scale-105 focus:outline-none focus-visible:ring-1 focus-visible:ring-[var(--ht-primary)] rounded relative`,{"w-4 h-4":!n.compact&&!p.value?.isMultiSort,"w-3.5 h-3.5":n.compact||p.value?.isMultiSort}]),tabindex:`0`,role:`button`,"aria-label":p.value?`Sorted ${p.value.direction===`asc`?`ascending`:`descending`}. Press Enter to ${p.value.direction===`asc`?`sort descending`:`clear sorting`}`:`Not sorted. Press Enter to sort ascending`,onClick:h,onKeydown:[(0,_.withKeys)((0,_.withModifiers)(h,[`prevent`]),[`enter`]),(0,_.withKeys)((0,_.withModifiers)(h,[`prevent`]),[`space`])],onMouseenter:g,onFocus:y},[(0,_.createVNode)(_.Transition,{name:`hint-fade`},{default:(0,_.withCtx)(()=>[o.value&&!p.value?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,or,[...r[0]||=[(0,_.createTextVNode)(` Click to sort `,-1),(0,_.createElementVNode)(`div`,{class:`absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-[var(--ht-primary)]`},null,-1)]])):(0,_.createCommentVNode)(``,!0)]),_:1}),p.value?p.value.direction===`asc`?((0,_.openBlock)(),(0,_.createElementBlock)(`svg`,{key:1,class:(0,_.normalizeClass)([`transition-all duration-200 drop-shadow-sm`,{"w-4 h-4":!n.compact&&!p.value.isMultiSort,"w-3.5 h-3.5":n.compact||p.value.isMultiSort,"text-[var(--ht-primary)]":!p.value.isMultiSort||p.value.priority===0,"text-[var(--ht-primary-hover)]":p.value.isMultiSort&&p.value.priority===1,"text-[var(--ht-primary-active)]":p.value.isMultiSort&&p.value.priority>1}]),fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,viewBox:`0 0 24 24`,"aria-hidden":`true`},[...r[2]||=[(0,_.createStaticVNode)(`<path d="m3 8 4-4 4 4" data-v-5d39723d></path><path d="M7 4v16" data-v-5d39723d></path><path d="M11 12h4" data-v-5d39723d></path><path d="M11 16h7" data-v-5d39723d></path><path d="M11 20h10" data-v-5d39723d></path>`,5)]],2)):p.value.direction===`desc`?((0,_.openBlock)(),(0,_.createElementBlock)(`svg`,{key:2,class:(0,_.normalizeClass)([`transition-all duration-200 drop-shadow-sm`,{"w-4 h-4":!n.compact&&!p.value.isMultiSort,"w-3.5 h-3.5":n.compact||p.value.isMultiSort,"text-[var(--ht-primary)]":!p.value.isMultiSort||p.value.priority===0,"text-[var(--ht-primary-hover)]":p.value.isMultiSort&&p.value.priority===1,"text-[var(--ht-primary-active)]":p.value.isMultiSort&&p.value.priority>1}]),fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,viewBox:`0 0 24 24`,"aria-hidden":`true`},[...r[3]||=[(0,_.createStaticVNode)(`<path d="m3 16 4 4 4-4" data-v-5d39723d></path><path d="M7 20V4" data-v-5d39723d></path><path d="M11 4h10" data-v-5d39723d></path><path d="M11 8h7" data-v-5d39723d></path><path d="M11 12h4" data-v-5d39723d></path>`,5)]],2)):(0,_.createCommentVNode)(``,!0):((0,_.openBlock)(),(0,_.createElementBlock)(`svg`,{key:0,class:(0,_.normalizeClass)([`text-[var(--ht-text-muted)] opacity-60 transition-all duration-200 hover:text-[var(--ht-text)] hover:opacity-80`,{"w-4 h-4":!n.compact,"w-3.5 h-3.5":n.compact}]),fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,viewBox:`0 0 24 24`,"aria-hidden":`true`},[...r[1]||=[(0,_.createStaticVNode)(`<path d="m3 8 4-4 4 4" data-v-5d39723d></path><path d="m11 16-4 4-4-4" data-v-5d39723d></path><path d="M7 4v16" data-v-5d39723d></path><path d="M15 8h6" data-v-5d39723d></path><path d="M15 16h6" data-v-5d39723d></path><path d="M13 12h8" data-v-5d39723d></path>`,6)]],2))],42,ar)],42,rr)):(0,_.createCommentVNode)(``,!0)}}),lr=$(cr,[[`__scopeId`,`data-v-5d39723d`]]),ur={class:`min-w-[300px] max-w-[540px] rounded-lg border border-[var(--ht-border)] bg-[var(--ht-bg)] shadow-[var(--shadow-ht-xl)] backdrop-blur-sm`},dr={class:`border-b border-[var(--ht-border-subtle)] px-4 py-3`},fr={class:`text-sm font-semibold text-[var(--ht-text)]`},pr={class:`p-4`},mr=(0,_.defineComponent)({__name:`FilterPopover`,props:{open:{type:Boolean},anchor:{},title:{},position:{default:()=>({placement:`bottom`,align:`center`,offset:4,autoFlip:!0})}},emits:[`update:open`,`opened`,`closed`],setup(e,{emit:t}){let n=t;return(t,r)=>((0,_.openBlock)(),(0,_.createBlock)(Gt,{open:e.open,anchor:e.anchor,position:e.position,"aria-label":e.title,"onUpdate:open":r[0]||=e=>n(`update:open`,e),onOpened:r[1]||=e=>n(`opened`),onClosed:r[2]||=e=>n(`closed`)},{default:(0,_.withCtx)(()=>[(0,_.createElementVNode)(`div`,ur,[(0,_.createElementVNode)(`div`,dr,[(0,_.createElementVNode)(`div`,fr,[(0,_.renderSlot)(t.$slots,`title`,{},()=>[(0,_.createTextVNode)((0,_.toDisplayString)(e.title),1)],!0)])]),(0,_.createElementVNode)(`div`,pr,[(0,_.renderSlot)(t.$slots,`default`,{},void 0,!0)])])]),_:3},8,[`open`,`anchor`,`position`,`aria-label`]))}}),hr=$(mr,[[`__scopeId`,`data-v-88c8098f`]]),gr={class:`space-y-3`},_r={class:`flex items-center gap-2`},vr={key:0,class:`flex items-center gap-3 px-3 py-2.5 text-sm bg-[var(--ht-bg)] border-b border-[var(--ht-border-subtle)] hover:bg-[var(--ht-bg-subtle)] cursor-pointer transition-colors group`},yr={class:`ml-auto text-xs text-[var(--ht-text-subtle)] tabular-nums`},br={class:`flex items-center gap-3 px-3 py-2 text-sm hover:bg-[var(--ht-cell-hover)] cursor-pointer transition-colors group`},xr=[`checked`,`onChange`],Sr=[`title`],Cr={class:`text-xs text-[var(--ht-text-subtle)] tabular-nums`},wr={class:`flex items-center justify-between text-xs text-[var(--ht-text-muted)] pt-1 border-t border-[var(--ht-border-subtle)]`},Tr={class:`tabular-nums`},Er=100,Dr=32,Or=4,kr=(0,_.defineComponent)({__name:`ValueFilterEditor`,props:{field:{},allData:{},currentFilter:{}},setup(e,{expose:t}){let n=e,r=(0,_.ref)(``),i=(0,_.ref)(`all`),a=(0,_.ref)(new Set),o=(0,_.ref)(new Set),s=(0,_.ref)(!0);t({getValueFilter:()=>{let e=f.value.map(([e])=>e),t=r.value.trim().toLowerCase();if(i.value===`all`){if(t.length>0){let n=[...e],r=`(null)`.includes(t);return s.value&&r&&n.push(null),{operator:`in`,value:n}}let n=Array.from(o.value),r=!s.value;if(n.length===0&&!r)return null;let i=[...n];return r&&i.push(null),{operator:`notIn`,value:i}}let n=Array.from(a.value),c=s.value;if(n.length===e.length&&c)return null;if(n.length>e.length/2){let t=new Set(e);n.forEach(e=>t.delete(e));let r=Array.from(t);return c||r.push(null),{operator:`notIn`,value:r}}let l=[...n];return c&&l.push(null),{operator:`in`,value:l}},remeasure:()=>{m.value&&h.setContainerSize({height:m.value.clientHeight,width:m.value.clientWidth})}});let c=new WeakMap,l=(0,_.computed)(()=>{let e=n.allData,t=c.get(e);t||(t=new Map,c.set(e,t));let r=t.get(n.field);if(r)return r;let i=new Map;for(let e of n.allData){let t=e[n.field],r=t??`__NULL__`;i.set(r,(i.get(r)||0)+1)}let a=Array.from(i.entries());return t.set(n.field,a),a}),u=(0,_.computed)(()=>{let e=r.value.trim().toLowerCase(),t=l.value;return e&&(t=t.filter(([t])=>(t===`__NULL__`?`(null)`:String(t)).toLowerCase().includes(e))),t.sort((e,t)=>t[1]-e[1])}),d=(0,_.ref)(Er),f=(0,_.computed)(()=>u.value.filter(([e])=>e!==`__NULL__`)),p=(0,_.computed)(()=>f.value.slice(0,d.value)),m=(0,_.ref)(null),h=I({count:(0,_.computed)(()=>p.value.length),getItemSize:()=>Dr,overscan:6});(0,_.onMounted)(()=>{h.scrollElement.value=m.value,m.value&&h.setContainerSize({height:m.value.clientHeight,width:m.value.clientWidth})});let g=null,v=0;(0,_.watch)(()=>h.endIndex.value,e=>{if(e>=d.value-5&&d.value<f.value.length){if(g)return;v=0;let e=()=>{g=requestAnimationFrame(()=>{v++,v<Or?e():(d.value=Math.min(f.value.length,d.value+Er),g=null,v=0)})};e()}}),(0,_.watch)([l,r],()=>{d.value=Er,m.value&&(m.value.scrollTop=0,h.updateScrollPosition(0))}),(0,_.watch)(()=>n.currentFilter,e=>{e&&Array.isArray(e.value)?e.operator===`notIn`?(i.value=`all`,o.value=new Set(e.value.filter(e=>e!=null)),a.value=new Set,s.value=!e.value.some(e=>e==null)):(i.value=`subset`,s.value=e.value.some(e=>e==null),a.value=new Set(e.value.filter(e=>e!=null)),o.value=new Set):(i.value=`all`,s.value=!0,a.value=new Set,o.value=new Set)},{immediate:!0});function y(e,t){if(i.value===`all`){let n=new Set(o.value);t?n.delete(e):n.add(e),o.value=n;return}let n=new Set(a.value);t?n.add(e):n.delete(e),a.value=n}function b(){i.value=`all`,o.value=new Set,s.value=!0}function x(){i.value=`subset`,a.value=new Set,o.value=new Set,s.value=!1}function S(e){return i.value===`all`?!o.value.has(e):a.value.has(e)}return(e,t)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,gr,[(0,_.createElementVNode)(`div`,_r,[(0,_.withDirectives)((0,_.createElementVNode)(`input`,{"onUpdate:modelValue":t[0]||=e=>r.value=e,type:`text`,placeholder:`Search values`,class:`h-8 flex-1 rounded-md border border-[var(--ht-border)] bg-[var(--ht-bg)] px-3 text-sm text-[var(--ht-text)] placeholder:text-[var(--ht-text-subtle)] transition-colors focus:border-[var(--ht-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--ht-primary)]/20`},null,512),[[_.vModelText,r.value]]),(0,_.createElementVNode)(`button`,{class:`h-8 px-3 text-xs font-medium text-[var(--ht-text-muted)] hover:text-[var(--ht-primary)] hover:bg-[var(--ht-bg-subtle)] rounded-md transition-colors`,onClick:x},` Clear `),(0,_.createElementVNode)(`button`,{class:`h-8 px-3 text-xs font-medium text-[var(--ht-primary)] hover:text-[var(--ht-primary-hover)] hover:bg-[var(--ht-primary-subtle)] rounded-md transition-colors`,onClick:b},` Select All `)]),(0,_.createElementVNode)(`div`,{ref_key:`scrollEl`,ref:m,class:`relative overflow-auto rounded-md border border-[var(--ht-border)] bg-[var(--ht-bg-subtle)]`,style:{"max-height":`16rem`,height:`16rem`}},[!r.value||`(null)`.includes(r.value.trim().toLowerCase())?((0,_.openBlock)(),(0,_.createElementBlock)(`label`,vr,[(0,_.withDirectives)((0,_.createElementVNode)(`input`,{"onUpdate:modelValue":t[1]||=e=>s.value=e,type:`checkbox`,class:`w-4 h-4 rounded border-[var(--ht-border-strong)] text-[var(--ht-primary)] focus:ring-2 focus:ring-[var(--ht-primary)]/30 cursor-pointer`},null,512),[[_.vModelCheckbox,s.value]]),t[2]||=(0,_.createElementVNode)(`span`,{class:`font-medium text-[var(--ht-text-muted)] group-hover:text-[var(--ht-text)]`},`(null)`,-1),(0,_.createElementVNode)(`span`,yr,(0,_.toDisplayString)(l.value.find(([e])=>e===`__NULL__`)?.[1]??0),1)])):(0,_.createCommentVNode)(``,!0),(0,_.createElementVNode)(`div`,{style:(0,_.normalizeStyle)({height:(0,_.unref)(h).totalSize.value+`px`,position:`relative`})},[((0,_.openBlock)(!0),(0,_.createElementBlock)(_.Fragment,null,(0,_.renderList)((0,_.unref)(h).virtualItems.value,e=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:e.index,style:(0,_.normalizeStyle)({position:`absolute`,top:e.start+`px`,height:e.size+`px`,left:0,right:0})},[(0,_.createElementVNode)(`label`,br,[(0,_.createElementVNode)(`input`,{type:`checkbox`,class:`w-4 h-4 rounded border-[var(--ht-border-strong)] text-[var(--ht-primary)] focus:ring-2 focus:ring-[var(--ht-primary)]/30 cursor-pointer`,checked:S(p.value[e.index]?.[0]),onChange:t=>y(p.value[e.index]?.[0],t.target?.checked)},null,40,xr),(0,_.createElementVNode)(`span`,{class:`truncate flex-1 text-[var(--ht-text)] group-hover:text-[var(--ht-text)]`,title:String(p.value[e.index]?.[0]??``)},(0,_.toDisplayString)(String(p.value[e.index]?.[0]??``)),9,Sr),(0,_.createElementVNode)(`span`,Cr,(0,_.toDisplayString)(p.value[e.index]?.[1]??0),1)])],4))),128))],4)],512),(0,_.createElementVNode)(`div`,wr,[(0,_.createElementVNode)(`span`,Tr,`Showing `+(0,_.toDisplayString)(Math.min(d.value,f.value.length))+` of `+(0,_.toDisplayString)(f.value.length),1)])]))}}),Ar=kr,jr={class:`space-y-3`},Mr={key:0,class:`flex flex-wrap gap-2`},Nr={key:1,class:`flex gap-2 items-center min-w-0`},Pr=[`value`],Fr=[`type`,`placeholder`],Ir=[`type`],Lr=[`type`],Rr=[`value`],zr={key:1,class:`max-h-48 overflow-auto rounded-md border border-[var(--ht-border)] bg-[var(--ht-bg-subtle)] p-2 space-y-1`},Br=[`checked`,`onChange`],Vr={class:`truncate text-[var(--ht-text)] group-hover:text-[var(--ht-text)]`},Hr={key:4,class:`flex items-start gap-2 rounded-md bg-[var(--ht-danger-bg)] border border-[var(--ht-danger-border)] px-3 py-2 text-xs text-[var(--ht-danger)]`},Ur=(0,_.defineComponent)({__name:`CustomFilterEditor`,props:{field:{},dataType:{},currentFilter:{},enumOptions:{}},setup(e,{expose:t}){let n=e,r=(0,_.ref)(``),i=(0,_.ref)(``),a=(0,_.ref)(``),o=(0,_.ref)(``),s=(0,_.ref)(new Set),c=(0,_.ref)(``);t({getFilterConfig:()=>{c.value=``;let e=r.value;if(!e)return null;let t=i.value;if(u.value===`number`){let e=Number(t);if(!Number.isFinite(e))return c.value=`Invalid number input`,null;t=e}if(u.value===`boolean`&&(t=t===!0||t===`true`),u.value===`datetime-local`&&e===`equals`&&typeof t==`string`&&t){let e=new Date(t);isNaN(e.getTime())||(t=e.toISOString())}if(e===`between`){let e=a.value,n=o.value;if(u.value===`number`){let t=Number(e),r=Number(n);if(!Number.isFinite(t)||!Number.isFinite(r))return c.value=`Invalid range input`,null;e=t,n=r}if(u.value===`datetime-local`||u.value===`date`){let t=new Date(e),r=new Date(n);if(isNaN(t.getTime())||isNaN(r.getTime()))return c.value=`Invalid range input`,null;u.value===`datetime-local`&&(e=t.toISOString(),n=r.toISOString())}t=[e,n]}if(u.value===`enum`)if(e===`in`){let e=Array.from(s.value);if(e.length===0)return c.value=`Select at least one option`,null;t=e}else s.value=new Set;return{operator:e,value:t}},hasValidationError:()=>c.value});let l=(0,_.computed)(()=>{let e=n.dataType;return e===`date`||e===`datetime`||e===`time`||e===`interval`?[{label:`Equals`,value:`equals`},{label:`On or after`,value:`gte`},{label:`On or before`,value:`lte`},{label:`Between`,value:`between`}]:e===`enum`?[{label:`Equals`,value:`equals`},{label:`Not equals`,value:`notEquals`},{label:`Includes any`,value:`in`}]:e===`number`||e===`currency`||e===`percentage`?[{label:`Equals`,value:`equals`},{label:`Not equals`,value:`notEquals`},{label:`Greater than`,value:`gt`},{label:`Less than`,value:`lt`},{label:`Greater or equal`,value:`gte`},{label:`Less or equal`,value:`lte`},{label:`Between`,value:`between`}]:e===`boolean`?[{label:`Equals`,value:`equals`},{label:`Not equals`,value:`notEquals`}]:[{label:`Contains`,value:`contains`},{label:`Equals`,value:`equals`},{label:`Not equals`,value:`notEquals`},{label:`Starts with`,value:`startsWith`},{label:`Ends with`,value:`endsWith`},{label:`Is empty`,value:`isEmpty`},{label:`Is not empty`,value:`notEmpty`}]}),u=(0,_.computed)(()=>n.dataType===`number`||n.dataType===`currency`||n.dataType===`percentage`?`number`:n.dataType===`boolean`?`boolean`:n.dataType===`date`?`date`:n.dataType===`datetime`?`datetime-local`:n.dataType===`time`?`time`:n.dataType===`interval`?`text`:n.dataType===`enum`?`enum`:`text`);(0,_.watch)(()=>n.currentFilter,e=>{if(!e){r.value=``,i.value=u.value===`boolean`?!0:``,a.value=``,o.value=``,s.value=new Set;return}if(r.value=e.operator,(e.operator===`in`||e.operator===`oneOf`)&&Array.isArray(e.value))s.value=new Set(e.value),i.value=``,a.value=``,o.value=``;else if(e.operator===`between`&&Array.isArray(e.value)){let[t,n]=e.value;a.value=d(t),o.value=d(n),i.value=``,s.value=new Set}else a.value=``,o.value=``,s.value=new Set,i.value=d(e.value)},{immediate:!0}),(0,_.watch)(r,e=>{if(c.value=``,!e){u.value===`enum`&&(s.value=new Set);return}if(u.value===`enum`){if(e===`in`)i.value=``;else if(s.value=new Set,(e===`equals`||e===`notEquals`)&&(i.value===``||i.value===void 0)){let e=n.enumOptions?.[0];e&&(i.value=e.value)}}});function d(e){if(e==null)return``;if(u.value===`datetime-local`){let t=e instanceof Date?e:new Date(e);if(!isNaN(t.getTime()))return t.toISOString().slice(0,16)}if(u.value===`date`){let t=e instanceof Date?e:new Date(e);if(!isNaN(t.getTime()))return t.toISOString().slice(0,10);if(typeof e==`string`)return e.slice(0,10)}return e}function f(e){let t=new Date,n,i;switch(e){case`today`:n=new Date(t.setHours(0,0,0,0)),i=new Date(t.setHours(23,59,59,999));break;case`yesterday`:{let e=new Date(t);e.setDate(e.getDate()-1),n=new Date(e.setHours(0,0,0,0)),i=new Date(e.setHours(23,59,59,999));break}case`last7`:{let e=new Date(t);e.setDate(e.getDate()-6),n=new Date(e.setHours(0,0,0,0)),i=new Date(t.setHours(23,59,59,999));break}case`last30`:{let e=new Date(t);e.setDate(e.getDate()-29),n=new Date(e.setHours(0,0,0,0)),i=new Date(t.setHours(23,59,59,999));break}case`thisMonth`:n=new Date(t.getFullYear(),t.getMonth(),1,0,0,0,0),i=new Date(t.setHours(23,59,59,999));break;default:return}r.value=`between`,u.value===`datetime-local`?(a.value=n.toISOString().slice(0,19),o.value=i.toISOString().slice(0,19)):(a.value=n.toISOString().slice(0,10),o.value=i.toISOString().slice(0,10))}function p(e,t){let n=new Set(s.value);t?n.add(e):n.delete(e),s.value=n,n.size>0&&(c.value=``)}return(t,n)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,jr,[u.value===`date`||u.value===`datetime-local`?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,Mr,[(0,_.createElementVNode)(`button`,{class:`px-3 py-1.5 text-xs font-medium text-[var(--ht-text)] rounded-md border border-[var(--ht-border)] bg-[var(--ht-bg)] hover:bg-[var(--ht-bg-subtle)] hover:border-[var(--ht-border-strong)] transition-colors`,onClick:n[0]||=e=>f(`today`)},` Today `),(0,_.createElementVNode)(`button`,{class:`px-3 py-1.5 text-xs font-medium text-[var(--ht-text)] rounded-md border border-[var(--ht-border)] bg-[var(--ht-bg)] hover:bg-[var(--ht-bg-subtle)] hover:border-[var(--ht-border-strong)] transition-colors`,onClick:n[1]||=e=>f(`yesterday`)},` Yesterday `),(0,_.createElementVNode)(`button`,{class:`px-3 py-1.5 text-xs font-medium text-[var(--ht-text)] rounded-md border border-[var(--ht-border)] bg-[var(--ht-bg)] hover:bg-[var(--ht-bg-subtle)] hover:border-[var(--ht-border-strong)] transition-colors`,onClick:n[2]||=e=>f(`last7`)},` Last 7 days `),(0,_.createElementVNode)(`button`,{class:`px-3 py-1.5 text-xs font-medium text-[var(--ht-text)] rounded-md border border-[var(--ht-border)] bg-[var(--ht-bg)] hover:bg-[var(--ht-bg-subtle)] hover:border-[var(--ht-border-strong)] transition-colors`,onClick:n[3]||=e=>f(`last30`)},` Last 30 days `),(0,_.createElementVNode)(`button`,{class:`px-3 py-1.5 text-xs font-medium text-[var(--ht-text)] rounded-md border border-[var(--ht-border)] bg-[var(--ht-bg)] hover:bg-[var(--ht-bg-subtle)] hover:border-[var(--ht-border-strong)] transition-colors`,onClick:n[4]||=e=>f(`thisMonth`)},` This month `)])):(0,_.createCommentVNode)(``,!0),u.value!==`boolean`&&u.value!==`enum`?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,Nr,[(0,_.withDirectives)((0,_.createElementVNode)(`select`,{"onUpdate:modelValue":n[5]||=e=>r.value=e,class:`h-9 min-w-[140px] shrink-0 rounded-md border border-[var(--ht-border)] bg-[var(--ht-bg)] px-3 text-sm text-[var(--ht-text)] transition-colors focus:border-[var(--ht-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--ht-primary)]/20`},[n[11]||=(0,_.createElementVNode)(`option`,{disabled:``,value:``},`Select condition…`,-1),((0,_.openBlock)(!0),(0,_.createElementBlock)(_.Fragment,null,(0,_.renderList)(l.value,e=>((0,_.openBlock)(),(0,_.createElementBlock)(`option`,{key:e.value,value:e.value},(0,_.toDisplayString)(e.label),9,Pr))),128))],512),[[_.vModelSelect,r.value]]),r.value===`between`?((0,_.openBlock)(),(0,_.createElementBlock)(_.Fragment,{key:1},[(0,_.withDirectives)((0,_.createElementVNode)(`input`,{"onUpdate:modelValue":n[7]||=e=>a.value=e,type:u.value,placeholder:`Min`,style:(0,_.normalizeStyle)(u.value===`date`||u.value===`datetime-local`||u.value===`time`?`color-scheme: light dark;`:void 0),class:(0,_.normalizeClass)([`h-9 shrink-0 rounded-md border border-[var(--ht-border)] bg-[var(--ht-bg)] px-3 text-sm text-[var(--ht-text)] placeholder:text-[var(--ht-text-subtle)] transition-colors focus:border-[var(--ht-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--ht-primary)]/20`,u.value===`datetime-local`?`w-[160px]`:u.value===`time`?`w-[90px]`:`w-[110px]`])},null,14,Ir),[[_.vModelDynamic,a.value]]),n[12]||=(0,_.createElementVNode)(`span`,{class:`text-[var(--ht-text-muted)] text-sm shrink-0`},`to`,-1),(0,_.withDirectives)((0,_.createElementVNode)(`input`,{"onUpdate:modelValue":n[8]||=e=>o.value=e,type:u.value,placeholder:`Max`,style:(0,_.normalizeStyle)(u.value===`date`||u.value===`datetime-local`||u.value===`time`?`color-scheme: light dark;`:void 0),class:(0,_.normalizeClass)([`h-9 shrink-0 rounded-md border border-[var(--ht-border)] bg-[var(--ht-bg)] px-3 text-sm text-[var(--ht-text)] placeholder:text-[var(--ht-text-subtle)] transition-colors focus:border-[var(--ht-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--ht-primary)]/20`,u.value===`datetime-local`?`w-[160px]`:u.value===`time`?`w-[90px]`:`w-[110px]`])},null,14,Lr),[[_.vModelDynamic,o.value]])],64)):(0,_.withDirectives)(((0,_.openBlock)(),(0,_.createElementBlock)(`input`,{key:0,"onUpdate:modelValue":n[6]||=e=>i.value=e,type:u.value,style:(0,_.normalizeStyle)(u.value===`date`||u.value===`datetime-local`||u.value===`time`?`color-scheme: light dark;`:void 0),class:`h-9 flex-1 min-w-0 rounded-md border border-[var(--ht-border)] bg-[var(--ht-bg)] px-3 text-sm text-[var(--ht-text)] placeholder:text-[var(--ht-text-subtle)] transition-colors focus:border-[var(--ht-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--ht-primary)]/20`,placeholder:u.value===`text`?`Enter value`:``},null,12,Fr)),[[_.vModelDynamic,i.value]])])):u.value===`boolean`?(0,_.withDirectives)(((0,_.openBlock)(),(0,_.createElementBlock)(`select`,{key:2,"onUpdate:modelValue":n[9]||=e=>i.value=e,class:`h-9 flex-1 rounded-md border border-[var(--ht-border)] bg-[var(--ht-bg)] px-3 text-sm text-[var(--ht-text)] transition-colors focus:border-[var(--ht-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--ht-primary)]/20`},[...n[13]||=[(0,_.createElementVNode)(`option`,{value:!0},`True`,-1),(0,_.createElementVNode)(`option`,{value:!1},`False`,-1)]],512)),[[_.vModelSelect,i.value]]):u.value===`enum`?((0,_.openBlock)(),(0,_.createElementBlock)(_.Fragment,{key:3},[r.value===`equals`?(0,_.withDirectives)(((0,_.openBlock)(),(0,_.createElementBlock)(`select`,{key:0,"onUpdate:modelValue":n[10]||=e=>i.value=e,class:`h-9 flex-1 rounded-md border border-[var(--ht-border)] bg-[var(--ht-bg)] px-3 text-sm text-[var(--ht-text)] transition-colors focus:border-[var(--ht-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--ht-primary)]/20`},[((0,_.openBlock)(!0),(0,_.createElementBlock)(_.Fragment,null,(0,_.renderList)(e.enumOptions,e=>((0,_.openBlock)(),(0,_.createElementBlock)(`option`,{key:String(e.value),value:e.value},(0,_.toDisplayString)(e.label),9,Rr))),128))],512)),[[_.vModelSelect,i.value]]):((0,_.openBlock)(),(0,_.createElementBlock)(`div`,zr,[((0,_.openBlock)(!0),(0,_.createElementBlock)(_.Fragment,null,(0,_.renderList)(e.enumOptions,e=>((0,_.openBlock)(),(0,_.createElementBlock)(`label`,{key:String(e.value),class:`flex items-center gap-3 px-2 py-2 text-sm rounded hover:bg-[var(--ht-cell-hover)] cursor-pointer transition-colors group`},[(0,_.createElementVNode)(`input`,{type:`checkbox`,class:`w-4 h-4 rounded border-[var(--ht-border-strong)] text-[var(--ht-primary)] focus:ring-2 focus:ring-[var(--ht-primary)]/30 cursor-pointer`,checked:s.value.has(e.value),onChange:t=>p(e.value,t.target.checked)},null,40,Br),(0,_.createElementVNode)(`span`,Vr,(0,_.toDisplayString)(e.label),1)]))),128))]))],64)):(0,_.createCommentVNode)(``,!0),c.value?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,Hr,[n[14]||=(0,_.createElementVNode)(`svg`,{class:`w-4 h-4 shrink-0 mt-0.5`,fill:`currentColor`,viewBox:`0 0 20 20`},[(0,_.createElementVNode)(`path`,{"fill-rule":`evenodd`,d:`M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z`,"clip-rule":`evenodd`})],-1),(0,_.createElementVNode)(`span`,null,(0,_.toDisplayString)(c.value),1)])):(0,_.createCommentVNode)(``,!0)]))}}),Wr=Ur,Gr=[`aria-label`,`aria-pressed`,`title`],Kr={class:`space-y-3`},qr={class:`space-y-2`},Jr={class:`overflow-hidden transition-all duration-200`},Yr={key:0,class:`border-t border-[var(--ht-border)]`},Xr={key:1,class:`space-y-2`},Zr={key:2,class:`border-t border-[var(--ht-border)] pt-2`},Qr=(0,_.defineComponent)({__name:`FilterIndicator`,props:{column:{},gridAPI:{}},emits:[`filter-open`,`filter-apply`,`filter-clear`],setup(e,{emit:t}){let n=e,r=t,i=(0,_.ref)(!1),a=(0,_.ref)(null),o=(0,_.ref)(null),s=(0,_.ref)(null),c=()=>{o.value?.remeasure?.()},l=(0,_.ref)(!1),u=(0,_.computed)(()=>{let e=n.column.dataType||`text`;return e===`date`||e===`datetime`||e===`time`||e===`interval`||e===`number`||e===`currency`||e===`percentage`||e===`json`||e===`multiline`}),d=(0,_.computed)(()=>{let e=n.column.dataType;return!(e===`date`||e===`datetime`||e===`json`||e===`multiline`)}),f=(0,_.computed)(()=>{try{return(n.gridAPI.getState().config?.filters||[]).filter(e=>e.field===n.column.field)}catch{return[]}}),p=(0,_.computed)(()=>f.value.find(e=>e.operator===`in`||e.operator===`notIn`)||null),m=(0,_.computed)(()=>f.value.find(e=>![`in`,`oneOf`,`notIn`].includes(e.operator))||null),h=(0,_.computed)(()=>{let e=p.value;if(!e)return null;let t=Array.isArray(e.value)?e.value:[];return{operator:e.operator,value:t}}),g=(0,_.computed)(()=>f.value.length>0);(0,_.watch)(f,()=>{m.value?l.value=!0:i.value||(l.value=!1)},{immediate:!0}),(0,_.watch)(()=>n.column,()=>{!m.value&&!i.value&&(l.value=!1)});let v=(0,_.computed)(()=>i.value&&n.gridAPI.getData()||[]),y=(0,_.computed)(()=>{if(!i.value)return 0;try{let e=v.value,t=n.column.field,r=new Set;for(let n=0;n<e.length;n++){let i=e[n][t];if(i!=null&&(r.add(i),r.size>50))break}return r.size}catch{return 0}}),b=(0,_.computed)(()=>{if(n.column.dataType!==`enum`)return[];let e=n.column.options;if(Array.isArray(e)&&e.length>0)return e.map(e=>typeof e==`object`&&e&&`value`in e?{label:String(e.label??e.value),value:e.value}:{label:String(e),value:e});try{let e=n.gridAPI.getData()||[],t=new Set;for(let r=0;r<e.length&&t.size<100;r++){let i=e[r][n.column.field];i!=null&&t.add(i)}return Array.from(t).sort((e,t)=>String(e).localeCompare(String(t))).map(e=>({label:String(e),value:e}))}catch{return[]}});function x(){r(`filter-open`,n.column.field),i.value=!0,m.value?l.value=!0:l.value=u.value,(0,_.nextTick)(()=>{(n.column.dataType||`text`)===`text`&&y.value>50&&(l.value=!0)})}function S(){i.value=!1}function C(){let e=(n.gridAPI.getState().config?.filters||[]).filter(e=>e.field!==n.column.field),t=[];if(d.value){let e=o.value?.getValueFilter?.();if(e&&Array.isArray(e.value)){let r=e.value.filter(e=>e!==void 0);r.length>0&&t.push({field:n.column.field,operator:e.operator,value:r})}}let i=s.value?.getFilterConfig?.();i&&t.push({field:n.column.field,operator:i.operator,value:i.value});let a=t.length>0?[...e,...t]:e;n.gridAPI.updateConfig({filters:a}),t.length>0?r(`filter-apply`,t):r(`filter-clear`,n.column.field),S()}function w(){let e=(n.gridAPI.getState().config?.filters||[]).filter(e=>e.field!==n.column.field);n.gridAPI.updateConfig({filters:e}),r(`filter-clear`,n.column.field),S()}return n.gridAPI.on&&n.gridAPI.on(`column-open-filter`,e=>{e&&e.field===n.column.field&&x()}),(t,n)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{ref_key:`triggerRef`,ref:a,class:`relative inline-flex items-center ml-1 select-none`,onClick:n[3]||=(0,_.withModifiers)(()=>{},[`stop`])},[(0,_.createElementVNode)(`button`,{class:(0,_.normalizeClass)([`inline-flex h-5 w-5 items-center justify-center rounded cursor-pointer transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-1 focus:ring-[var(--ht-primary)]`,g.value?`text-[var(--ht-primary)] bg-[var(--ht-primary-subtle)]/70 shadow-sm`:`text-[var(--ht-text-muted)] hover:text-[var(--ht-text)] hover:bg-[var(--ht-primary-subtle)]/60`]),"aria-label":`Filter ${e.column.title}`,"aria-pressed":g.value?`true`:`false`,title:g.value?`Clear filter`:`Set filter`,onClick:n[0]||=(0,_.withModifiers)(e=>i.value?S():x(),[`stop`])},[...n[4]||=[(0,_.createElementVNode)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`h-3.5 w-3.5 transition-transform duration-200`},[(0,_.createElementVNode)(`path`,{d:`M4 4h16l-6 8v5l-4 2v-7L4 4Z`})],-1)]],10,Gr),(0,_.createVNode)(hr,{open:i.value,anchor:a.value,title:`Filter: ${e.column.title}`,"onUpdate:open":n[2]||=e=>i.value=e,onOpened:c},{default:(0,_.withCtx)(()=>[(0,_.createElementVNode)(`div`,Kr,[(0,_.createElementVNode)(`div`,qr,[(0,_.createElementVNode)(`button`,{class:`flex w-full items-center justify-between text-xs font-semibold text-[var(--ht-text)] hover:text-[var(--ht-primary)] transition-colors`,onClick:n[1]||=e=>l.value=!l.value},[n[6]||=(0,_.createElementVNode)(`span`,null,`Custom Conditions`,-1),((0,_.openBlock)(),(0,_.createElementBlock)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:(0,_.normalizeClass)([`h-4 w-4 transition-transform duration-200`,{"rotate-180":l.value}])},[...n[5]||=[(0,_.createElementVNode)(`path`,{d:`m6 9 6 6 6-6`},null,-1)]],2))]),(0,_.withDirectives)((0,_.createElementVNode)(`div`,Jr,[(0,_.createVNode)(Wr,{ref_key:`customFilterRef`,ref:s,field:e.column.field,"data-type":e.column.dataType||`text`,"current-filter":m.value||null,"enum-options":b.value},null,8,[`field`,`data-type`,`current-filter`,`enum-options`])],512),[[_.vShow,l.value]])]),d.value?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,Yr)):(0,_.createCommentVNode)(``,!0),d.value?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,Xr,[n[7]||=(0,_.createElementVNode)(`div`,{class:`text-xs font-semibold text-[var(--ht-text)]`},`Filter by Values`,-1),(0,_.createVNode)(Ar,{ref_key:`valueFilterRef`,ref:o,field:e.column.field,"all-data":v.value,"current-filter":h.value},null,8,[`field`,`all-data`,`current-filter`])])):(0,_.createCommentVNode)(``,!0),(0,_.createElementVNode)(`div`,{class:`flex items-center justify-end gap-2 pt-3 border-t border-[var(--ht-border)]`},[(0,_.createElementVNode)(`button`,{class:`h-8 rounded border border-[var(--ht-border)] px-2 text-xs text-[var(--ht-text)] hover:bg-[var(--ht-bg-subtle)] transition-colors`,onClick:S},` Cancel `),(0,_.createElementVNode)(`button`,{class:`h-8 rounded bg-[var(--ht-primary)] px-3 text-xs text-white hover:opacity-90 transition-colors`,onClick:C},` Apply `)]),g.value?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,Zr,[(0,_.createElementVNode)(`button`,{class:`w-full h-8 rounded border border-[var(--ht-border)] text-xs text-[var(--ht-text)] hover:bg-[var(--ht-bg-subtle)] transition-colors`,onClick:w},` Clear Filter `)])):(0,_.createCommentVNode)(``,!0)])]),_:1},8,[`open`,`anchor`,`title`])],512))}}),$r=Qr,ei=[`data-resizable`,`data-pinned`,`aria-sort`,`aria-label`,`draggable`],ti=(0,_.defineComponent)({__name:`HeaderCell`,props:{column:{},width:{},gridAPI:{},dragContext:{},borderClasses:{},selectedRows:{},totalRows:{}},emits:[`sort-indicator-focus`,`column-drag-start`,`column-drop`,`column-drag-end`,`select-all`,`clear-selection`],setup(e,{emit:t}){let n=e,r=t,i=(0,_.computed)(()=>({width:`${n.width}px`,minWidth:`${n.column.minWidth||50}px`,maxWidth:`${n.column.maxWidth||400}px`})),a=(0,_.toRef)(n,`column`),o=(0,_.toRef)(n,`dragContext`),{pinnedSide:s,isColumnDraggable:c,isDragSource:l,dragOverPosition:u,isDropBlocked:d,handleColumnDragStart:f,handleColumnDragEnd:p,handleColumnDragOver:m,handleColumnDragLeave:h,handleColumnDrop:g}=tr({columnRef:a,dragContextRef:o,emit:r}),{isColumnResizable:v,isResizeActive:y,handleResize:b,handleResizeDoubleClick:x}=nr({columnRef:a,gridAPI:n.gridAPI,getCurrentWidth:()=>n.width}),S=(0,_.computed)(()=>s.value===`right`),C=(0,_.computed)(()=>[`ht-header-cell`,n.borderClasses||``,`px-3 py-2`,`flex items-center justify-between`,`bg-[var(--ht-header-bg)]`,`text-[var(--ht-header-text)]`,`font-medium text-sm`,`select-none`,v.value?`is-resizable`:`is-fixed-width`,y.value?`is-resizing`:null,{"is-dragging":l.value,"drag-over-before":!l.value&&u.value===`before`,"drag-over-after":!l.value&&u.value===`after`,"is-draggable":c.value,"drop-forbidden":!l.value&&d.value,"is-last-pinned":n.column.isLastPinned,"is-first-pinned-right":n.column.isFirstRightPinned}].filter(Boolean)),w=(0,_.computed)(()=>n.column.sortable!==void 0&&n.column.sortable!==!1),T=(e,t)=>{let r=n.gridAPI?.changeSortPriority;r&&r(e,t)},E=e=>{let t=n.gridAPI?.removeSortField;t&&t(e)},D=e=>{r(`sort-indicator-focus`,e)},O=(0,_.computed)(()=>Z(n.column)),k=(0,_.computed)(()=>O.value?n.column.type:null),A=()=>{r(`select-all`)},j=()=>{r(`clear-selection`)};return(t,n)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{class:(0,_.normalizeClass)(C.value),style:(0,_.normalizeStyle)(i.value),role:`columnheader`,"data-resizable":(0,_.unref)(v)?`true`:`false`,"data-pinned":(0,_.unref)(s),"aria-sort":w.value?`none`:void 0,"aria-label":`Column ${e.column.title}${w.value?`, sortable`:``}`,draggable:(0,_.unref)(c),onDragstart:n[6]||=(...e)=>(0,_.unref)(f)&&(0,_.unref)(f)(...e),onDragend:n[7]||=(...e)=>(0,_.unref)(p)&&(0,_.unref)(p)(...e),onDragover:n[8]||=(...e)=>(0,_.unref)(m)&&(0,_.unref)(m)(...e),onDragleave:n[9]||=(...e)=>(0,_.unref)(h)&&(0,_.unref)(h)(...e),onDrop:n[10]||=(...e)=>(0,_.unref)(g)&&(0,_.unref)(g)(...e)},[O.value&&k.value===`checkbox`?((0,_.openBlock)(),(0,_.createBlock)((0,_.unref)(Fn),{key:0,options:e.column.functionalOptions,"selected-count":e.selectedRows?.length||0,"total-selectable-rows":e.totalRows||0,onSelectAll:A,onClearSelection:j},null,8,[`options`,`selected-count`,`total-selectable-rows`])):O.value&&k.value===`radio`?((0,_.openBlock)(),(0,_.createBlock)((0,_.unref)(Un),{key:1,options:e.column.functionalOptions,"selected-count":e.selectedRows?.length||0,"total-selectable-rows":e.totalRows||0},null,8,[`options`,`selected-count`,`total-selectable-rows`])):((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:2,class:(0,_.normalizeClass)([`flex items-center min-w-0 flex-1 group`,{"justify-start":!e.column.dataType||e.column.dataType===`text`,"justify-end":e.column.dataType===`number`,"justify-center":e.column.dataType===`boolean`}])},[e.column.dataType===`number`?((0,_.openBlock)(),(0,_.createBlock)(lr,{key:0,column:e.column,"grid-a-p-i":e.gridAPI,class:`order-1`,onSortPriorityChange:T,onSortFieldRemove:E,onSortIndicatorFocus:D,onDragstart:n[0]||=(0,_.withModifiers)(()=>{},[`stop`])},null,8,[`column`,`grid-a-p-i`])):(0,_.createCommentVNode)(``,!0),(0,_.createElementVNode)(`span`,{class:(0,_.normalizeClass)([`truncate`,{"order-1":!e.column.dataType||e.column.dataType===`text`||e.column.dataType===`boolean`||e.column.dataType===`date`,"order-2":e.column.dataType===`number`}])},(0,_.toDisplayString)(e.column.title),3),!e.column.dataType||e.column.dataType===`text`||e.column.dataType===`boolean`||e.column.dataType===`date`?((0,_.openBlock)(),(0,_.createBlock)(lr,{key:1,column:e.column,"grid-a-p-i":e.gridAPI,class:`order-2`,onSortPriorityChange:T,onSortFieldRemove:E,onSortIndicatorFocus:D,onDragstart:n[1]||=(0,_.withModifiers)(()=>{},[`stop`])},null,8,[`column`,`grid-a-p-i`])):(0,_.createCommentVNode)(``,!0),e.column.filterable===!1?(0,_.createCommentVNode)(``,!0):((0,_.openBlock)(),(0,_.createBlock)($r,{key:2,column:e.column,"grid-a-p-i":e.gridAPI,class:`order-3`,onFilterOpen:()=>{}},null,8,[`column`,`grid-a-p-i`]))],2)),(0,_.unref)(v)?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:3,class:(0,_.normalizeClass)([`ht-resize-handle w-1 h-full cursor-col-resize bg-transparent hover:bg-[var(--ht-primary)] opacity-0 hover:opacity-100 transition-all`,S.value?`left-handle mr-2`:`right-handle ml-2`]),onMousedown:n[2]||=(...e)=>(0,_.unref)(b)&&(0,_.unref)(b)(...e),onDblclick:n[3]||=(...e)=>(0,_.unref)(x)&&(0,_.unref)(x)(...e),onDragstart:n[4]||=(0,_.withModifiers)(()=>{},[`prevent`]),onClick:n[5]||=(0,_.withModifiers)(()=>{},[`stop`])},null,34)):(0,_.createCommentVNode)(``,!0)],46,ei))}}),ni=$(ti,[[`__scopeId`,`data-v-dd4b7c53`]]),ri=(0,_.defineComponent)({__name:`GridHeader`,props:{columns:{},paneConfig:{},scrollLeft:{},height:{},isContentOverflowing:{type:Boolean},gridAPI:{},headerCellBorderClasses:{},selectedRows:{},totalRows:{}},emits:[`header-scroll`,`sort-indicator-focus`,`select-all`,`clear-selection`],setup(e,{expose:t,emit:n}){let r=c.createLogger({module:`GridHeader`}),i=e,a=n,o=(0,_.ref)(),s=(0,_.ref)(),l=!1,u=(0,_.ref)(null),d=(0,_.computed)(()=>i.gridAPI),f=(0,_.computed)(()=>({height:`${i.height}px`,position:`sticky`,top:0,zIndex:40,background:`var(--ht-header-bg)`})),p=(0,_.computed)(()=>({width:`${i.paneConfig.center.width}px`}));(0,_.watch)(()=>i.scrollLeft,e=>{l||s.value&&s.value.scrollLeft!==e&&(l=!0,s.value.scrollLeft=e,(0,_.nextTick)(()=>{l=!1}))});let m=e=>{if(l)return;let t=e.target.scrollLeft;l=!0,a(`header-scroll`,t),(0,_.nextTick)(()=>{l=!1})},h=e=>{a(`sort-indicator-focus`,e)},g=()=>{u.value=null},v=e=>{u.value=e},y=(e,t)=>{let n=i.gridAPI.getState().columns||[],r=n.find(e=>e.id===t);if(!r||Te(u.value,r))return null;let a=n.map(e=>e.id);return a.includes(e)?{columns:n,targetColumn:r,order:a}:null},b=(e,t,n,r,i)=>{if(!e.includes(t))return e.length;let a=e.findIndex(e=>e===t),o=Ee(n),s=e.map(e=>i.find(t=>t.id===e)).filter(e=>!!e).filter(e=>Ee(e)===o).map(e=>e.id),c=s.findIndex(e=>e===t);if(c!==-1){let t=e.findIndex(e=>e===s[c]);return r===`before`?t:t+1}return r===`before`?a:a+1},x=(e,t,n)=>{let r=d.value.moveColumn;if(typeof r==`function`)r(e,t);else if(typeof d.value.setColumnOrder==`function`){let r=[...n];r.splice(t,0,e),d.value.setColumnOrder(r)}},S=e=>{let t=u.value?.columnId;if(!t||e.columnId===t){g();return}let n=y(t,e.columnId);if(!n){g();return}let{columns:r,targetColumn:i,order:a}=n,o=a.filter(e=>e!==t),s=b(o,e.columnId,i,e.position,r);x(t,s,o),g()},C=()=>{g()};typeof i.gridAPI.on==`function`&&i.gridAPI.on(`column-open-filter`,e=>{try{let t=e?.field;if(!t||e?.__skipHeader)return;let n=(i.gridAPI.getState().columns||[]).find(e=>e.field===t||e.id===t);if(!n)return;if(Ee(n)===`center`){let e=(i.paneConfig.center.columns||[]).findIndex(e=>e.field===t||e.id===t);if(e>=0&&s.value){let n=i.paneConfig.center.columns,r=0;for(let t=0;t<e;t++){let e=Number(n[t]?.width)||150;r+=e}let a=Number(n[e]?.width)||150,o=s.value,c=o.scrollLeft,l=c+o.clientWidth,u=c;if(r<c?u=r:r+a>l&&(u=Math.max(0,r-(o.clientWidth-a))),u!==c)try{o.scrollTo({left:u,behavior:`smooth`})}catch{o.scrollLeft=u}let d=0,f=()=>{d++,d<11?requestAnimationFrame(f):i.gridAPI.emit(`column-open-filter`,{field:t,__skipHeader:!0})};requestAnimationFrame(f);return}}requestAnimationFrame(()=>i.gridAPI.emit(`column-open-filter`,{field:t,__skipHeader:!0}))}catch(e){r.warn(`Failed to handle column-open-filter event`,e)}});let w=()=>{a(`select-all`)},T=()=>{a(`clear-selection`)};return t({}),(t,n)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{class:`ht-header flex`,style:(0,_.normalizeStyle)(f.value),role:`rowgroup`},[e.paneConfig.left.columns.length>0?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:0,class:`ht-pane-left flex-shrink-0 flex bg-[var(--ht-header-bg)] relative z-10`,style:(0,_.normalizeStyle)({width:`${e.paneConfig.left.width}px`})},[((0,_.openBlock)(!0),(0,_.createElementBlock)(_.Fragment,null,(0,_.renderList)(e.paneConfig.left.columns,t=>((0,_.openBlock)(),(0,_.createBlock)(ni,{key:t.id,column:t,width:t.width||150,"grid-a-p-i":e.gridAPI,"drag-context":u.value,"border-classes":e.headerCellBorderClasses,"selected-rows":e.selectedRows,"total-rows":e.totalRows,onColumnDragStart:v,onColumnDrop:S,onColumnDragEnd:C,onSelectAll:w,onClearSelection:T},null,8,[`column`,`width`,`grid-a-p-i`,`drag-context`,`border-classes`,`selected-rows`,`total-rows`]))),128))],4)):(0,_.createCommentVNode)(``,!0),(0,_.createElementVNode)(`div`,{ref_key:`centerScrollArea`,ref:s,class:(0,_.normalizeClass)([`ht-pane-center overflow-x-auto overflow-y-visible relative ht-hide-scrollbar`,{"flex-1":e.isContentOverflowing}]),onScroll:m},[(0,_.createElementVNode)(`div`,{ref_key:`centerPane`,ref:o,class:`flex`,style:(0,_.normalizeStyle)(p.value)},[((0,_.openBlock)(!0),(0,_.createElementBlock)(_.Fragment,null,(0,_.renderList)(e.paneConfig.center.columns,t=>((0,_.openBlock)(),(0,_.createBlock)(ni,{key:t.id,column:t,width:t.width||150,"grid-a-p-i":e.gridAPI,"drag-context":u.value,"border-classes":e.headerCellBorderClasses,"selected-rows":e.selectedRows,"total-rows":e.totalRows,onSortIndicatorFocus:h,onColumnDragStart:v,onColumnDrop:S,onColumnDragEnd:C,onSelectAll:w,onClearSelection:T},null,8,[`column`,`width`,`grid-a-p-i`,`drag-context`,`border-classes`,`selected-rows`,`total-rows`]))),128))],4)],34),e.paneConfig.right.columns.length>0?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:1,class:`ht-pane-right flex-shrink-0 flex bg-[var(--ht-header-bg)] relative z-10`,style:(0,_.normalizeStyle)({width:`${e.paneConfig.right.width}px`})},[((0,_.openBlock)(!0),(0,_.createElementBlock)(_.Fragment,null,(0,_.renderList)(e.paneConfig.right.columns,t=>((0,_.openBlock)(),(0,_.createBlock)(ni,{key:t.id,column:t,width:t.width||150,"grid-a-p-i":e.gridAPI,"drag-context":u.value,"border-classes":e.headerCellBorderClasses,"selected-rows":e.selectedRows,"total-rows":e.totalRows,onColumnDragStart:v,onColumnDrop:S,onColumnDragEnd:C,onSelectAll:w,onClearSelection:T},null,8,[`column`,`width`,`grid-a-p-i`,`drag-context`,`border-classes`,`selected-rows`,`total-rows`]))),128))],4)):(0,_.createCommentVNode)(``,!0)],4))}}),ii=$(ri,[[`__scopeId`,`data-v-898ee759`]]),ai=[`title`],oi=(0,_.defineComponent)({__name:`TextCell`,props:{value:{},align:{default:`left`},truncate:{type:Boolean,default:!0}},setup(e){let t=e,n={left:`text-left`,center:`text-center`,right:`text-right`},r=t.value??``;return(t,i)=>((0,_.openBlock)(),(0,_.createElementBlock)(`span`,{class:(0,_.normalizeClass)([`inline-block w-full`,n[e.align],e.truncate?`truncate`:``]),title:e.truncate?String((0,_.unref)(r)):void 0},(0,_.toDisplayString)((0,_.unref)(r)),11,ai))}}),si=oi,ci=[`title`],li=(0,_.defineComponent)({__name:`NumberCell`,props:{value:{},decimals:{},locale:{default:`en-US`},useGrouping:{type:Boolean,default:!0},align:{default:`right`},prefix:{},suffix:{}},setup(e){let t=e,n=(()=>{if(t.value===null||t.value===void 0)return``;let e=typeof t.value==`string`?parseFloat(t.value):t.value;if(isNaN(e))return String(t.value);let n=new Intl.NumberFormat(t.locale,{minimumFractionDigits:t.decimals,maximumFractionDigits:t.decimals,useGrouping:t.useGrouping}).format(e);return`${t.prefix||``}${n}${t.suffix||``}`})(),r={left:`text-left`,center:`text-center`,right:`text-right`};return(t,i)=>((0,_.openBlock)(),(0,_.createElementBlock)(`span`,{class:(0,_.normalizeClass)([`inline-block w-full tabular-nums`,r[e.align]]),title:String(e.value)},(0,_.toDisplayString)((0,_.unref)(n)),11,ci))}}),ui=li,di=[`title`],fi=(0,_.defineComponent)({__name:`DateCell`,props:{value:{},format:{default:`date`},customFormat:{},locale:{default:`en-US`},align:{default:`left`}},setup(e){let t=e,n=e=>{if(!e)return null;if(e instanceof Date)return isNaN(e.getTime())?null:e;let t=new Date(e);return isNaN(t.getTime())?null:t},r={date:{year:`numeric`,month:`short`,day:`numeric`},datetime:{year:`numeric`,month:`short`,day:`numeric`,hour:`2-digit`,minute:`2-digit`},time:{hour:`2-digit`,minute:`2-digit`,second:`2-digit`}},i=e=>{let n=new Date().getTime()-e.getTime(),r=Math.floor(n/1e3),i=Math.floor(r/60),a=Math.floor(i/60),o=Math.floor(a/24);return r<60?`${r}s ago`:i<60?`${i}m ago`:a<24?`${a}h ago`:o<30?`${o}d ago`:e.toLocaleDateString(t.locale)},a=(()=>{let e=n(t.value);if(!e)return``;if(t.format===`relative`)return i(e);let a=t.format===`custom`?t.customFormat:r[t.format];return new Intl.DateTimeFormat(t.locale,a).format(e)})(),o={left:`text-left`,center:`text-center`,right:`text-right`};return(t,n)=>((0,_.openBlock)(),(0,_.createElementBlock)(`span`,{class:(0,_.normalizeClass)([`inline-block w-full`,o[e.align]]),title:e.value?new Date(e.value).toISOString():void 0},(0,_.toDisplayString)((0,_.unref)(a)),11,di))}}),pi=fi,mi={key:0,class:`truncate`},hi={key:1,class:`flex-shrink-0`},gi={key:0,class:`w-4 h-4 text-[var(--ht-success)]`,fill:`currentColor`,viewBox:`0 0 20 20`},_i={key:1,class:`w-4 h-4 text-[var(--ht-danger)]`,fill:`currentColor`,viewBox:`0 0 20 20`},vi=(0,_.defineComponent)({__name:`BooleanCell`,props:{value:{type:[Boolean,null]},showText:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},align:{default:`center`},trueText:{default:`Yes`},falseText:{default:`No`},nullText:{default:``}},setup(e){let t=e,n=(()=>t.value===null||t.value===void 0?t.nullText:t.value?t.trueText:t.falseText)(),r={left:`justify-start`,center:`justify-center`,right:`justify-end`};return(t,i)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{class:(0,_.normalizeClass)([`inline-flex items-center gap-2 w-full`,r[e.align]])},[e.showText?((0,_.openBlock)(),(0,_.createElementBlock)(`span`,mi,(0,_.toDisplayString)((0,_.unref)(n)),1)):(0,_.createCommentVNode)(``,!0),e.showIcon&&e.value!==null&&e.value!==void 0?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,hi,[e.value?((0,_.openBlock)(),(0,_.createElementBlock)(`svg`,gi,[...i[0]||=[(0,_.createElementVNode)(`path`,{"fill-rule":`evenodd`,d:`M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z`,"clip-rule":`evenodd`},null,-1)]])):((0,_.openBlock)(),(0,_.createElementBlock)(`svg`,_i,[...i[1]||=[(0,_.createElementVNode)(`path`,{"fill-rule":`evenodd`,d:`M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z`,"clip-rule":`evenodd`},null,-1)]]))])):(0,_.createCommentVNode)(``,!0)],2))}}),yi=vi,bi=[`aria-label`,`tabindex`,`data-cell-id`,`data-row-id`,`data-column-id`,`data-row-index`,`data-column-index`],xi={key:10,class:`absolute inset-0 pointer-events-none ring-2 ring-[var(--ht-primary)] ring-inset`,"aria-hidden":`true`},Si=`gridcell`,Ci=(0,_.defineComponent)({__name:`BodyCell`,props:{row:{},column:{},value:{type:[String,Number,Boolean,Date,null]},focused:{type:Boolean},rowSelected:{type:Boolean},rowIndex:{},columnIndex:{},borderClasses:{}},emits:[`cell-click`,`cell-double-click`,`cell-right-click`,`toggle-selection`,`row-drag-start`],setup(e,{emit:t}){let n=e,r=t,i=(0,_.computed)(()=>({width:`${n.column.width||150}px`,minWidth:`${n.column.minWidth||50}px`,maxWidth:`${n.column.maxWidth||400}px`})),a=(0,_.computed)(()=>[`ht-body-cell`,`px-3 py-1`,n.borderClasses||``,`flex items-center`,`text-[var(--ht-text)]`,`text-sm`,`truncate`,`relative`,{"bg-[var(--ht-cell-focused)]":n.focused,"ring-2 ring-[var(--ht-primary)] ring-inset":n.focused,"cursor-text":n.column.dataType===`text`,"cursor-pointer":!n.column.dataType||n.column.dataType!==`text`,"ht-cell-interactive":n.column.dataType===`custom`||n.column.formatter,"is-last-pinned":n.column.isLastPinned,"is-first-pinned-right":n.column.isFirstRightPinned}].filter(Boolean)),o=(0,_.computed)(()=>n.column.formatter?n.column.formatter(n.value,n.row):n.value??``),s=e=>{r(`cell-click`,n.column,n.value,e)},c=e=>{r(`cell-double-click`,n.column,n.value,e)},l=e=>{e.preventDefault(),r(`cell-right-click`,n.column,n.value,e)},u=e=>{if(n.focused)switch(e.key){case`Enter`:e.preventDefault();break;case`F2`:e.preventDefault();break;case`Escape`:e.preventDefault();break}},d=(0,_.computed)(()=>`${n.column.title}: ${o.value}`),f=(0,_.computed)(()=>Z(n.column)),p=(0,_.computed)(()=>f.value?n.column.type:null),m=()=>{!p.value||p.value!==`checkbox`&&p.value!==`radio`||r(`toggle-selection`,{rowData:n.row,rowIndex:n.rowIndex,column:n.column,selectionType:p.value})},h=(e,t,n)=>{r(`row-drag-start`,{row:e,rowIndex:t,event:n})},g=(e,t,n)=>{};return(t,n)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{class:(0,_.normalizeClass)(a.value),style:(0,_.normalizeStyle)(i.value),role:Si,"aria-label":d.value,tabindex:e.focused?0:-1,"data-cell-id":`${e.row.id||e.row.index}-${e.column.id}`,"data-row-id":e.row.id||e.row.index,"data-column-id":e.column.id,"data-row-index":e.rowIndex,"data-column-index":e.columnIndex,onClick:s,onDblclick:c,onContextmenu:l,onKeydown:u},[f.value&&p.value===`seq`?((0,_.openBlock)(),(0,_.createBlock)((0,_.unref)(Kn),{key:0,"row-index":e.rowIndex,options:e.column.functionalOptions,"pagination-offset":0},null,8,[`row-index`,`options`])):f.value&&p.value===`checkbox`?((0,_.openBlock)(),(0,_.createBlock)((0,_.unref)(Mn),{key:1,"row-data":e.row,"row-index":e.rowIndex,"is-selected":e.rowSelected,column:e.column,options:e.column.functionalOptions,onToggleSelection:m},null,8,[`row-data`,`row-index`,`is-selected`,`column`,`options`])):f.value&&p.value===`radio`?((0,_.openBlock)(),(0,_.createBlock)((0,_.unref)(Rn),{key:2,"row-data":e.row,"row-index":e.rowIndex,"is-selected":e.rowSelected,column:e.column,options:e.column.functionalOptions,onToggleSelection:m},null,8,[`row-data`,`row-index`,`is-selected`,`column`,`options`])):f.value&&p.value===`drag`?((0,_.openBlock)(),(0,_.createBlock)((0,_.unref)(er),{key:3,"row-data":e.row,"row-index":e.rowIndex,options:e.column.functionalOptions,onDragStart:h,onDragEnd:g},null,8,[`row-data`,`row-index`,`options`])):f.value&&p.value===`actions`?((0,_.openBlock)(),(0,_.createBlock)((0,_.unref)(Xn),{key:4,"row-data":e.row,"row-index":e.rowIndex,options:e.column.functionalOptions},(0,_.createSlots)({_:2},[e.column.cellSlot?{name:`default`,fn:(0,_.withCtx)(n=>[(0,_.renderSlot)(t.$slots,e.column.cellSlot,(0,_.normalizeProps)((0,_.guardReactiveProps)(n)),void 0,!0)]),key:`0`}:void 0]),1032,[`row-data`,`row-index`,`options`])):e.column.cellRenderer?((0,_.openBlock)(),(0,_.createBlock)((0,_.resolveDynamicComponent)(e.column.cellRenderer),{key:5,value:e.value,row:e.row,column:e.column,class:`w-full`},null,8,[`value`,`row`,`column`])):e.column.dataType===`boolean`?((0,_.openBlock)(),(0,_.createBlock)((0,_.unref)(yi),{key:6,value:e.value},null,8,[`value`])):e.column.dataType===`number`?((0,_.openBlock)(),(0,_.createBlock)((0,_.unref)(ui),{key:7,value:e.value},null,8,[`value`])):e.column.dataType===`date`?((0,_.openBlock)(),(0,_.createBlock)((0,_.unref)(pi),{key:8,value:e.value},null,8,[`value`])):((0,_.openBlock)(),(0,_.createBlock)((0,_.unref)(si),{key:9,value:String(o.value)},null,8,[`value`])),e.focused?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,xi)):(0,_.createCommentVNode)(``,!0)],46,bi))}}),wi=$(Ci,[[`__scopeId`,`data-v-4478fea4`]]),Ti=[`aria-rowindex`,`aria-selected`],Ei=(0,_.defineComponent)({__name:`BodyRow`,props:{row:{},columns:{},rowIndex:{},virtualItem:{},rowHeight:{},focusedCell:{},selected:{type:Boolean},hoveredRowKey:{},rowBorderClasses:{},cellBorderClasses:{},stripeEnabled:{type:Boolean}},emits:[`row-click`,`cell-click`,`cell-double-click`,`cell-right-click`,`row-hover`,`row-leave`,`toggle-selection`,`row-drag-start`,`row-drag-over`,`row-drag-end`],setup(e,{emit:t}){let n=()=>[`ht-virtual-item`,`ht-body-row`,`hover:bg-[var(--ht-row-hover)]`,`cursor-pointer`],r=e,i=t,a=(0,_.computed)(()=>({transform:`translateY(${r.virtualItem.start}px)`,minHeight:`${r.rowHeight}px`,position:`absolute`,top:0,left:0,right:0,display:`flex`,flexDirection:`column`})),o=e=>{e.target.closest(`.ht-cell-interactive`)||i(`row-click`,r.row,r.rowIndex)},s=(e,t,n)=>{n.stopPropagation(),i(`cell-click`,r.row,e,t),i(`row-click`,r.row,r.rowIndex)},c=(e,t,n)=>{n.stopPropagation(),i(`cell-double-click`,r.row,e,t)},l=(e,t,n)=>{n.stopPropagation(),i(`cell-right-click`,r.row,e,t)},u=(0,_.computed)(()=>!r.focusedCell||r.focusedCell.rowId!==r.row?.id?null:r.focusedCell.columnId),d=e=>u.value===e,f=(0,_.computed)(()=>r.row),p=(0,_.computed)(()=>{let e=f.value;return e&&e.id!==null?e.id:e&&e.rowId!==null?e.rowId:r.virtualItem?.index===null?r.rowIndex:r.virtualItem.index}),m=(0,_.computed)(()=>r.hoveredRowKey!==null&&r.hoveredRowKey===p.value),h=(0,_.inject)(`draggingRowId`,(0,_.ref)(null)),g=(0,_.inject)(`dropTargetRowId`,(0,_.ref)(null)),v=(0,_.inject)(`dropTargetPosition`,(0,_.ref)(null)),y=(0,_.inject)(`setDropTarget`,()=>{}),b=(0,_.computed)(()=>h.value!==null&&h.value===p.value),x=(0,_.computed)(()=>g.value!==null&&g.value===p.value),S=(0,_.computed)(()=>x.value?v.value:null),C=(0,_.computed)(()=>[...n(),{"bg-[var(--ht-row-selected)]":r.selected,"bg-[var(--ht-row-odd)]":r.stripeEnabled&&!r.selected&&r.rowIndex%2==1,"bg-[var(--ht-row-even)]":r.stripeEnabled&&!r.selected&&r.rowIndex%2==0,"ht-row-hover-state":m.value&&!r.selected,"ht-row-hover-selected":m.value&&r.selected,"ht-row-dragging":b.value,"ht-row-drop-target":x.value&&!b.value}]),w=()=>{i(`row-hover`,p.value)},T=()=>{i(`row-leave`,p.value)},E=e=>{let t=r.columns.findIndex(t=>t.id===e.column.id);i(`toggle-selection`,{...e,rowId:p.value,columnIndex:t>=0?t:0})},D=e=>{e.preventDefault(),i(`row-drag-over`,e);let t=e.currentTarget.getBoundingClientRect(),n=t.top+t.height/2,r=e.clientY<n?`top`:`bottom`;y(p.value,r)},O=e=>{let t=e.relatedTarget;(!t||!e.currentTarget.contains(t))&&g.value===p.value&&y(null,null)},k=e=>{let t=S.value;y(null,null);try{let n=e.dataTransfer?.getData(`application/json`);if(!n)return;let a=JSON.parse(n),o=r.rowIndex;if(t===`bottom`&&(o=r.rowIndex+1),a.rowIndex===o)return;let s={sourceIndex:a.rowIndex,destinationIndex:o,rowData:a.rowData};i(`row-drag-end`,{result:s,sourceId:a.rowData?.id??a.rowIndex,targetId:r.row?.id??r.rowIndex})}catch{}};return(t,n)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{class:(0,_.normalizeClass)(C.value),style:(0,_.normalizeStyle)(a.value),role:`row`,"aria-rowindex":e.rowIndex+1,"aria-selected":e.selected},[S.value===null?(0,_.createCommentVNode)(``,!0):((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:0,class:(0,_.normalizeClass)([`ht-drop-indicator`,{"ht-drop-top":S.value===`top`,"ht-drop-bottom":S.value===`bottom`}]),"aria-hidden":`true`},null,2)),(0,_.createElementVNode)(`div`,{class:(0,_.normalizeClass)([`ht-row-cells`,e.rowBorderClasses]),style:(0,_.normalizeStyle)({height:`${e.rowHeight}px`,display:`flex`,alignItems:`center`}),onClick:o,onMouseenter:w,onMouseleave:T,onDragover:(0,_.withModifiers)(D,[`prevent`]),onDragleave:O,onDrop:(0,_.withModifiers)(k,[`prevent`])},[((0,_.openBlock)(!0),(0,_.createElementBlock)(_.Fragment,null,(0,_.renderList)(e.columns,(t,r)=>((0,_.openBlock)(),(0,_.createBlock)(wi,{key:t.id,row:e.row,column:t,value:e.row&&t.field?e.row[t.field]:void 0,focused:d(t.id),"row-selected":e.selected,"row-index":e.rowIndex,"column-index":r,"border-classes":e.cellBorderClasses,onCellClick:s,onCellDoubleClick:c,onCellRightClick:l,onToggleSelection:E,onRowDragStart:n[0]||=e=>i(`row-drag-start`,e)},null,8,[`row`,`column`,`value`,`focused`,`row-selected`,`row-index`,`column-index`,`border-classes`]))),128))],38)],14,Ti))}}),Di=$(Ei,[[`__scopeId`,`data-v-2dfc7516`]]),Oi=class{scrollContainer=null;scrollInterval=null;scrollZone;scrollSpeed;horizontal;vertical;currentScrollX=0;currentScrollY=0;constructor(e,t={}){this.scrollContainer=e,this.scrollZone=t.scrollZone??50,this.scrollSpeed=t.scrollSpeed??10,this.horizontal=t.horizontal??!1,this.vertical=t.vertical??!0}start(e){if(!this.scrollContainer)return;let t=this.scrollContainer.getBoundingClientRect(),{clientX:n,clientY:r}=e,i=0,a=0;if(this.vertical){let e=r-t.top,n=t.bottom-r;e<this.scrollZone&&e>=0?a=-this.scrollSpeed:n<this.scrollZone&&n>=0&&(a=this.scrollSpeed)}if(this.horizontal){let e=n-t.left,r=t.right-n;e<this.scrollZone&&e>=0?i=-this.scrollSpeed:r<this.scrollZone&&r>=0&&(i=this.scrollSpeed)}this.currentScrollX=i,this.currentScrollY=a,this.currentScrollX!==0||this.currentScrollY!==0?this.ensureInterval():this.stop()}ensureInterval(){this.scrollInterval||=window.setInterval(()=>{this.scrollContainer&&(this.currentScrollY!==0&&(this.scrollContainer.scrollTop+=this.currentScrollY),this.currentScrollX!==0&&(this.scrollContainer.scrollLeft+=this.currentScrollX),this.currentScrollX===0&&this.currentScrollY===0&&this.stop())},16)}stop(){this.scrollInterval&&=(clearInterval(this.scrollInterval),null)}destroy(){this.stop(),this.scrollContainer=null}},ki={class:`ht-panes-container flex`},Ai={class:`ht-virtual-container-left relative`},ji={class:`ht-virtual-container-right relative`},Mi=(0,_.defineComponent)({__name:`GridBody`,props:{data:{},columns:{},paneConfig:{},virtualizer:{},rowHeight:{},isContentOverflowing:{type:Boolean},focusedCell:{},selectedRows:{},interactionContract:{},bodyRowBorderClasses:{},bodyCellBorderClasses:{},stripeEnabled:{type:Boolean}},emits:[`scroll`],setup(e,{expose:t,emit:n}){let r=c.createLogger(`grid-body`),i=e,a=n,o=(0,_.ref)(),s=(0,_.ref)(),l=(0,_.ref)(),u=(0,_.computed)(()=>({height:`100%`,overflow:`hidden`,position:`relative`})),d=(0,_.computed)(()=>({height:`${i.data.totalHeight}px`,position:`relative`,overflow:`hidden`})),f=(0,_.computed)(()=>({...d.value,width:`${i.paneConfig.center.width}px`})),p=(0,_.computed)(()=>({height:`100%`,overflow:`auto`})),m=(0,_.ref)(0),h=(0,_.ref)(0),g=(0,_.ref)(null),v=(0,_.ref)(null),y=e=>{v.value=e},b=(0,_.ref)(null),x=(0,_.ref)(null);(0,_.provide)(`draggingRowId`,v),(0,_.provide)(`setDraggingRowId`,y),(0,_.provide)(`dropTargetRowId`,b),(0,_.provide)(`dropTargetPosition`,x),(0,_.provide)(`setDropTarget`,(e,t)=>{b.value=e,x.value=t});let S=null,C=(0,_.computed)(()=>i.virtualizer.virtualItems.value||[]),w=(0,_.computed)(()=>C.value.map(e=>{let t=i.data.visibleRows[e.index];return t?{...e,row:t,rowArrayIndex:e.index}:(r.warn(`Missing row data for index ${e.index}, total rows: ${i.data.visibleRows.length}`),null)}).filter(e=>e!==null)),T=e=>{g.value=e},E=e=>{g.value===e&&(g.value=null)},D=e=>{let t=e.target;h.value=t.scrollTop;let n={...e,target:{...t,scrollLeft:m.value,scrollTop:h.value,dataset:{pane:`body`}}};a(`scroll`,n)},O=e=>{let t=e.target;m.value=t.scrollLeft;let n={...e,target:{...t,scrollLeft:m.value,scrollTop:h.value,dataset:{pane:`body`}}};a(`scroll`,n)},k=Oe({onScroll:D,debounceDelay:150,trackVelocity:!0}),A=Oe({onScroll:O,debounceDelay:150,trackVelocity:!0}),j=k.handleScroll,M=A.handleScroll,N=(e,t)=>{i.interactionContract.emit?.(`row-click`,{row:e,index:t})},P=(e,t,n)=>{i.interactionContract.emit?.(`cell-click`,{row:e,column:t,value:n})},F=(e,t,n)=>{i.interactionContract.emit?.(`cell-double-click`,{row:e,column:t,value:n})},I=(e,t,n)=>{i.interactionContract.emit?.(`cell-right-click`,{row:e,column:t,value:n})},L=e=>{i.interactionContract.emit?.(`toggle-selection`,{row:e.rowData,rowId:e.rowId,rowIndex:e.rowIndex,selectionType:e.selectionType})},R=e=>{i.interactionContract.emit?.(`row-drag-start`,e)},z=e=>{S?.start(e)},B=e=>{S?.stop(),i.interactionContract.emit?.(`row-drag-end`,e)};return t({scrollToIndex:i.virtualizer.scrollToIndex,recalculate:()=>{i.virtualizer.updateScrollPosition&&i.virtualizer.updateScrollPosition(h.value)},enterEditMode:async e=>i.interactionContract.toggleEditMode?await i.interactionContract.toggleEditMode(e,`enter`):!1,completeEdit:async(e,t)=>i.interactionContract.toggleEditMode?await i.interactionContract.toggleEditMode(e,`exit`):!1,cancelEdit:e=>{i.interactionContract.toggleEditMode&&i.interactionContract.toggleEditMode(e,`exit`)},centerScrollArea:l}),(0,_.onMounted)(()=>{s.value&&(S=new Oi(s.value,{vertical:!0,horizontal:!1,scrollZone:50,scrollSpeed:10}))}),(0,_.onUnmounted)(()=>{k.cleanup(),A.cleanup(),S?.destroy(),S=null}),(t,n)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{ref_key:`bodyContainer`,ref:o,class:`ht-body h-full`,style:(0,_.normalizeStyle)(u.value),role:`rowgroup`},[(0,_.createElementVNode)(`div`,{ref_key:`bodyScrollArea`,ref:s,class:`ht-scroll-area h-full overflow-y-auto overflow-x-hidden ht-custom-scrollbar`,onScroll:n[1]||=(...e)=>(0,_.unref)(j)&&(0,_.unref)(j)(...e)},[(0,_.createElementVNode)(`div`,{class:`ht-virtual-wrapper`,style:(0,_.normalizeStyle)(d.value)},[(0,_.createElementVNode)(`div`,ki,[e.paneConfig.left.columns.length>0?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:0,class:`ht-pane-left flex-shrink-0 relative z-10 overflow-hidden`,style:(0,_.normalizeStyle)({width:`${e.paneConfig.left.width}px`})},[(0,_.createElementVNode)(`div`,Ai,[((0,_.openBlock)(!0),(0,_.createElementBlock)(_.Fragment,null,(0,_.renderList)(w.value,t=>((0,_.openBlock)(),(0,_.createBlock)(Di,{key:`left-${t.row.id||t.index}`,row:t.row,columns:e.paneConfig.left.columns,"row-index":t.index,"virtual-item":t,"row-height":e.rowHeight,"focused-cell":e.focusedCell,selected:t.row.id!==null&&t.row.id!==void 0&&e.selectedRows.includes(t.row.id),"hovered-row-key":g.value,"row-border-classes":e.bodyRowBorderClasses,"cell-border-classes":e.bodyCellBorderClasses,"stripe-enabled":e.stripeEnabled,onRowClick:N,onCellClick:P,onCellDoubleClick:F,onCellRightClick:I,onRowHover:T,onRowLeave:E,onToggleSelection:L,onRowDragStart:R,onRowDragOver:z,onRowDragEnd:B},null,8,[`row`,`columns`,`row-index`,`virtual-item`,`row-height`,`focused-cell`,`selected`,`hovered-row-key`,`row-border-classes`,`cell-border-classes`,`stripe-enabled`]))),128))])],4)):(0,_.createCommentVNode)(``,!0),(0,_.createElementVNode)(`div`,{class:(0,_.normalizeClass)([`ht-pane-center relative overflow-hidden`,{"flex-1":e.isContentOverflowing}])},[(0,_.createElementVNode)(`div`,{ref_key:`centerScrollArea`,ref:l,class:`ht-scroll-area-horizontal h-full overflow-x-auto overflow-y-hidden`,style:(0,_.normalizeStyle)(p.value),onScroll:n[0]||=(...e)=>(0,_.unref)(M)&&(0,_.unref)(M)(...e)},[(0,_.createElementVNode)(`div`,{class:`ht-virtual-container-center`,style:(0,_.normalizeStyle)(f.value)},[((0,_.openBlock)(!0),(0,_.createElementBlock)(_.Fragment,null,(0,_.renderList)(w.value,t=>((0,_.openBlock)(),(0,_.createBlock)(Di,{key:`center-${t.row.id||t.index}`,row:t.row,columns:e.paneConfig.center.columns,"row-index":t.index,"virtual-item":t,"row-height":e.rowHeight,"focused-cell":e.focusedCell,selected:t.row.id!==null&&t.row.id!==void 0&&e.selectedRows.includes(t.row.id),"hovered-row-key":g.value,"row-border-classes":e.bodyRowBorderClasses,"cell-border-classes":e.bodyCellBorderClasses,"stripe-enabled":e.stripeEnabled,onRowClick:N,onCellClick:P,onCellDoubleClick:F,onCellRightClick:I,onRowHover:T,onRowLeave:E,onToggleSelection:L,onRowDragStart:R,onRowDragOver:z,onRowDragEnd:B},null,8,[`row`,`columns`,`row-index`,`virtual-item`,`row-height`,`focused-cell`,`selected`,`hovered-row-key`,`row-border-classes`,`cell-border-classes`,`stripe-enabled`]))),128))],4)],36)],2),e.paneConfig.right.columns.length>0?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:1,class:`ht-pane-right flex-shrink-0 relative z-10 overflow-hidden`,style:(0,_.normalizeStyle)({width:`${e.paneConfig.right.width}px`})},[(0,_.createElementVNode)(`div`,ji,[((0,_.openBlock)(!0),(0,_.createElementBlock)(_.Fragment,null,(0,_.renderList)(w.value,t=>((0,_.openBlock)(),(0,_.createBlock)(Di,{key:`right-${t.row.id||t.index}`,row:t.row,columns:e.paneConfig.right.columns,"row-index":t.index,"virtual-item":t,"row-height":e.rowHeight,"focused-cell":e.focusedCell,selected:t.row.id!==null&&t.row.id!==void 0&&e.selectedRows.includes(t.row.id),"hovered-row-key":g.value,"row-border-classes":e.bodyRowBorderClasses,"cell-border-classes":e.bodyCellBorderClasses,"stripe-enabled":e.stripeEnabled,onRowClick:N,onCellClick:P,onCellDoubleClick:F,onCellRightClick:I,onRowHover:T,onRowLeave:E,onToggleSelection:L,onRowDragStart:R,onRowDragOver:z,onRowDragEnd:B},null,8,[`row`,`columns`,`row-index`,`virtual-item`,`row-height`,`focused-cell`,`selected`,`hovered-row-key`,`row-border-classes`,`cell-border-classes`,`stripe-enabled`]))),128))])],4)):(0,_.createCommentVNode)(``,!0)])],4)],544)],4))}}),Ni=$(Mi,[[`__scopeId`,`data-v-559cd87b`]]),Pi={class:`flex items-center space-x-4`},Fi={key:0,class:`text-xs opacity-75`},Ii={class:`flex items-center space-x-2`},Li=(0,_.defineComponent)({__name:`GridFooter`,props:{totalRows:{},selectedCount:{},renderMetrics:{}},setup(e){let t=e,n=(0,_.computed)(()=>t.selectedCount>0?`${t.selectedCount} of ${t.totalRows} rows selected`:`${t.totalRows.toLocaleString()} rows`),r=(0,_.computed)(()=>``),i=(0,_.computed)(()=>[`ht-grid-footer`,`flex items-center justify-between`,`px-3 py-2`,`bg-[var(--ht-footer-bg)]`,`border-t border-[var(--ht-border)]`,`text-sm text-[var(--ht-text-muted)]`,`h-10`]);return(e,t)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{class:(0,_.normalizeClass)(i.value)},[(0,_.createElementVNode)(`div`,Pi,[(0,_.createElementVNode)(`span`,null,(0,_.toDisplayString)(n.value),1),r.value?((0,_.openBlock)(),(0,_.createElementBlock)(`span`,Fi,(0,_.toDisplayString)(r.value),1)):(0,_.createCommentVNode)(``,!0)]),(0,_.createElementVNode)(`div`,Ii,[(0,_.createCommentVNode)(``,!0),(0,_.renderSlot)(e.$slots,`actions`,{},void 0,!0),t[1]||=(0,_.createElementVNode)(`div`,{class:`flex items-center space-x-1`},[(0,_.createElementVNode)(`div`,{class:`ht-status-ready w-2 h-2 bg-[var(--ht-success)] rounded-full`}),(0,_.createElementVNode)(`span`,{class:`text-xs`},`Ready`)],-1)])],2))}}),Ri=$(Li,[[`__scopeId`,`data-v-23844793`]]),zi=[`data-border-mode`,`aria-rowcount`,`aria-colcount`],Bi={key:1,class:`ht-horizontal-scrollbar-container flex flex-shrink-0`},Vi=(0,_.defineComponent)({__name:`TableRendererComponent`,props:{renderer:{},interactionContract:{},gridAPI:{},options:{}},setup(e,{expose:t}){let n=e,r=`ht-grid-${(0,_.getCurrentInstance)()?.uid??`0`}`;(0,_.provide)(tt,r),(0,_.provide)(nt,n.gridAPI);let i=(0,_.computed)(()=>b.state?.config?.border??`default`),a=(0,_.computed)(()=>b.state?.config?.stripe??!1),o=(0,_.computed)(()=>{switch(i.value){case`none`:return``;case`outer`:case`full`:case`default`:default:return`border border-[var(--ht-border)] rounded-md`}}),s=(0,_.computed)(()=>{switch(i.value){case`full`:return`border-r border-[var(--ht-border)] last:border-r-0`;case`default`:case`none`:case`outer`:default:return``}}),l=(0,_.computed)(()=>{switch(i.value){case`full`:case`default`:return`border-b border-[var(--ht-border)]`;case`none`:case`outer`:default:return``}}),u=(0,_.computed)(()=>{switch(i.value){case`full`:return`border-r border-[var(--ht-border)] last:border-r-0`;case`default`:case`none`:case`outer`:default:return``}}),d=c.createLogger(`TableRendererComponent`),f=(0,_.ref)(),p=(0,_.ref)(),m=(0,_.ref)(),h=(0,_.ref)(),g=(0,_.ref)(),v=(0,_.ref)(0),y=(0,_.computed)(()=>f.value?T.value.left.width+T.value.center.width+T.value.right.width>v.value:!1),b=(0,_.reactive)({state:null,columns:[],rows:[],loading:!1,error:null}),x=(0,_.reactive)({...n.options}),S=(0,_.ref)(8),C=()=>{let e=parseInt(getComputedStyle(document.documentElement).getPropertyValue(`--ht-scrollbar-height`));S.value=isNaN(e)?8:e};(0,_.onMounted)(()=>{C(),window.addEventListener(`resize`,C)}),(0,_.onUnmounted)(()=>{window.removeEventListener(`resize`,C)});let w=(0,_.computed)(()=>{if(!b.state)return{totalWidth:0,headerHeight:40,rowHeight:32,bodyHeight:`calc(100% - 80px - var(--ht-scrollbar-height, 8px))`};let{config:e}=b.state,t=T.value,n=x.layout?.showFooter===!1?0:40;return{totalWidth:t.left.width+t.center.width+t.right.width,headerHeight:e.headerHeight,rowHeight:e.rowHeight,bodyHeight:`calc(100% - ${e.headerHeight}px - ${n}px - ${S.value}px)`}}),T=(0,_.computed)(()=>{let e={left:{columns:[],width:0},center:{columns:[],width:0},right:{columns:[],width:0}};for(let t of b.columns){let n=t.width||150;t.pinned===`left`?(e.left.columns.push(t),e.left.width+=n):t.pinned===`right`?(e.right.columns.push(t),e.right.width+=n):(e.center.columns.push(t),e.center.width+=n)}if(e.left.columns.length>0){let t=e.left.columns[e.left.columns.length-1];t.isLastPinned=!0}if(e.right.columns.length>0){let t=e.right.columns[0];t.isFirstRightPinned=!0}return e}),E=(0,_.ref)({scrollLeft:0,scrollTop:0}),D=!1,O=(0,_.reactive)({selectedIds:new Set,activeId:null}),k=(0,_.ref)(0),A=[],j=I({count:(0,_.computed)(()=>b.rows.length),getItemSize:()=>w.value.rowHeight,estimateItemSize:()=>w.value.rowHeight,overscan:5,enabled:(0,_.computed)(()=>b.rows.length>20)}),M=R({columns:(0,_.computed)(()=>T.value.center.columns),getColumnWidth:e=>T.value.center.columns[e]?.width||150,overscan:3,enabled:(0,_.computed)(()=>T.value.center.columns.length>20)}),N=(0,_.computed)(()=>({visibleRows:b.rows.map(e=>e.data||e),startIndex:j.startIndex.value,endIndex:j.endIndex.value,totalHeight:j.totalSize.value})),P=(0,_.computed)(()=>{let e=new Map;return b.rows.forEach((t,n)=>{let r=t.data||t,i=String(r.id||r.rowId);e.set(i,n)}),e}),F=(e,t,n)=>{b.state=e,b.columns=t,b.rows=n,b.loading=e.loading,b.error=e.error},L=(e,t)=>{O.selectedIds=new Set(e),k.value++},z=e=>{O.activeId=e},B=e=>{E.value={scrollLeft:e.left,scrollTop:e.top}},V=(e,t)=>{try{v.value=e,(0,_.nextTick)(()=>{f.value&&(j.setContainerSize({height:t,width:e}),M.setContainerSize({width:e,height:t}),m.value?.recalculate&&m.value.recalculate())})}catch(e){d.error(`Resize failed:`,{module:`TableRendererComponent`},e)}},H=e=>{Object.assign(x,e)},U=async e=>{try{return m.value?.enterEditMode?await m.value.enterEditMode(e):!1}catch(e){return d.error(`Failed to enter edit mode:`,{module:`TableRendererComponent`},e),!1}},W=async(e,t)=>{try{return m.value?.completeEdit?await m.value.completeEdit(e,t):!1}catch(e){return d.error(`Failed to complete edit:`,{module:`TableRendererComponent`},e),!1}},G=e=>{m.value?.cancelEdit&&m.value.cancelEdit(e)},K=async(e,t)=>{try{return t===`enter`?await U(e):t===`exit`?(G(e),!0):!1}catch(n){return d.error(`Toggle edit mode failed:`,{module:`TableRendererComponent`,id:e,mode:t},n),!1}},ee=(e,t=`auto`)=>{try{if(!f.value){d.warn(`Cannot scroll: container not mounted`,{id:e});return}let n=String(e).split(`_`),r=n[0]||``,i=P.value.get(r)??-1;if(i===-1){d.warn(`Row not found for ensureVisible`,{id:e,rowId:r});return}let a=w.value.headerHeight,o=w.value.rowHeight,s=i*o,c=f.value.getBoundingClientRect().height-a-40,l=E.value.scrollTop;if(s>=l&&s+o<=l+c){d.debug(`Row already visible`,{rowIndex:i,id:e});return}let u=m.value?.$el?.querySelector(`.ht-scroll-area`)||f.value;if(u.scrollTo({top:s,behavior:t}),d.debug(`Scrolled to row`,{rowIndex:i,targetScrollTop:s,behavior:t}),n.length>=2){let e=n[1],r=b.columns.findIndex(t=>t.id===e);if(r!==-1){let e=b.columns.slice(0,r).reduce((e,t)=>e+(t.width||150),0);u.scrollTo({left:e,behavior:t}),d.debug(`Scrolled to cell`,{rowIndex:i,columnIndex:r,targetScrollLeft:e})}}}catch(e){d.error(`Error in ensureVisible:`,{module:`TableRendererComponent`},e)}},te=()=>{try{(0,_.nextTick)(()=>{if(!f.value)return;let e=f.value.getBoundingClientRect();j.setContainerSize({height:e.height,width:e.width}),M.setContainerSize({width:e.width,height:e.height}),m.value?.recalculate&&m.value.recalculate();let t=E.value;j.updateScrollPosition(t.scrollTop),M.updateScrollPosition(t.scrollLeft),d.debug(`Refresh completed`,{containerSize:{width:e.width,height:e.height},rowCount:b.rows.length,columnCount:b.columns.length})})}catch(e){d.error(`Error in refresh:`,{module:`TableRendererComponent`},e)}},q=e=>{try{if(!e.position)return;let t=b.rows[e.position.rowIndex];if(!t)return;let r=t.data||t,i=b.columns.find(t=>t.id===e.position?.columnId);r&&i&&n.gridAPI.emit(`cell-click`,{row:r,column:i,value:r[i.field]})}catch(e){d.error(`Error in handleCellClick:`,{module:`TableRendererComponent`},e)}},J=e=>{try{if(!e.position)return;let t=b.rows[e.position.rowIndex];if(!t)return;let r=t.data||t,i=b.columns.find(t=>t.id===e.position?.columnId);r&&i&&n.gridAPI.emit(`cell-double-click`,{row:r,column:i,value:r[i.field]})}catch(e){d.error(`Error in handleCellDoubleClick:`,{module:`TableRendererComponent`},e)}},ne=e=>{try{if(!e.position)return;let t=b.rows[e.position.rowIndex];if(!t)return;let r=t.data||t,i=b.columns.find(t=>t.id===e.position?.columnId);r&&i&&n.gridAPI.emit(`cell-right-click`,{row:r,column:i,value:r[i.field]})}catch(e){d.error(`Error in handleCellRightClick:`,{module:`TableRendererComponent`},e)}},Y=e=>{try{if(!e.position)return;let t=e.position.rowId,n=O.selectedIds.has(t);n?O.selectedIds.delete(t):O.selectedIds.add(t),k.value++,d.debug(`Row selection toggled`,{rowId:t,selected:!n})}catch(e){d.error(`Error in handleRowSelect:`,{module:`TableRendererComponent`},e)}},re=()=>{try{let e=!1,t=b.columns.find(e=>e.type===`checkbox`);b.rows.forEach(n=>{let r=n.data||n,i=r?.id??r?.rowId??n?.key??(typeof n?.index==`number`?n.index:null);i===null||O.selectedIds.has(i)||ie(r,t)&&(O.selectedIds.add(i),e=!0)}),e&&k.value++,n.gridAPI.emit(`select-all`,{count:O.selectedIds.size}),d.debug(`All rows selected via header`,{count:O.selectedIds.size})}catch(e){d.error(`Error selecting all rows:`,{module:`TableRendererComponent`},e)}};function ie(e,t){return t&&t.condition?t.condition(e):!0}let ae=(0,_.computed)(()=>{let e=b.columns.find(e=>e.type===`checkbox`);if(!e||!e.condition)return b.rows.length;let t=0;return b.rows.forEach(n=>{let r=n.data||n;ie(r,e)&&t++}),t}),oe=e=>{try{let t=O.selectedIds.size;if(t===0)return;O.selectedIds.clear(),k.value++,n.gridAPI.emit(`selection-clear`,{previousCount:t}),d.debug(`Selection cleared`,{reason:e,previousCount:t})}catch(e){d.error(`Error clearing selection:`,{module:`TableRendererComponent`},e)}},se=()=>{re()},ce=()=>{oe(`header-action`)},le=()=>({state:b.state,columns:b.columns,rows:b.rows,loading:b.loading,error:b.error,scrollPosition:E.value,selection:{selectedIds:Array.from(O.selectedIds),activeId:O.activeId},layout:{metrics:w.value,paneConfig:T.value},virtualization:{vertical:{startIndex:j.startIndex.value,endIndex:j.endIndex.value,totalSize:j.totalSize.value},horizontal:{startIndex:M.startIndex.value,endIndex:M.endIndex.value,totalWidth:M.totalWidth.value}}}),ue=()=>({performance:{type:`object`,properties:{enableRAF:{type:`boolean`,default:!0,description:`Use requestAnimationFrame for rendering`},batchUpdates:{type:`boolean`,default:!0,description:`Batch multiple updates together`},maxConcurrentRenders:{type:`number`,default:3,description:`Maximum concurrent render operations`}}},accessibility:{type:`object`,properties:{enableAria:{type:`boolean`,default:!0,description:`Enable ARIA attributes`},announceChanges:{type:`boolean`,default:!0,description:`Announce changes to screen readers`},keyboardNavigation:{type:`boolean`,default:!0,description:`Enable keyboard navigation`}}},layout:{type:`object`,properties:{showHeader:{type:`boolean`,default:!0,description:`Show table header`},showFooter:{type:`boolean`,default:!0,description:`Show table footer`},enablePanes:{type:`boolean`,default:!0,description:`Enable frozen panes`},stickyHeader:{type:`boolean`,default:!0,description:`Make header sticky on scroll`}}},theme:{type:`object`,properties:{className:{type:`string`,default:``,description:`Custom theme class name`}}}}),de=e=>{if(!D)try{let t=e.target,r=t.scrollLeft,i=t.scrollTop;D=!0,E.value={scrollLeft:r,scrollTop:i},g.value&&g.value.scrollLeft!==r&&(g.value.scrollLeft=r),j.updateScrollPosition(i),M.updateScrollPosition(r),n.interactionContract.updateScrollPosition?.({left:r,top:i}),n.interactionContract.emit?.(`scroll`,{left:r,top:i}),(0,_.nextTick)(()=>{D=!1})}catch(e){d.error(`Scroll handling failed:`,{module:`TableRendererComponent`},e),D=!1}},fe=e=>{if(!D)try{let t=e.target.scrollLeft;D=!0,E.value.scrollLeft=t,m.value?.centerScrollArea&&m.value.centerScrollArea.scrollLeft!==t&&(m.value.centerScrollArea.scrollLeft=t),M.updateScrollPosition(t),n.interactionContract.updateScrollPosition?.({left:t,top:E.value.scrollTop}),n.interactionContract.emit?.(`scroll`,{left:t,top:E.value.scrollTop}),(0,_.nextTick)(()=>{D=!1})}catch(e){d.error(`Horizontal scrollbar handling failed:`,{module:`TableRendererComponent`},e),D=!1}},pe=e=>{if(!D)try{D=!0,E.value.scrollLeft=e,m.value?.centerScrollArea&&m.value.centerScrollArea.scrollLeft!==e&&(m.value.centerScrollArea.scrollLeft=e),g.value&&g.value.scrollLeft!==e&&(g.value.scrollLeft=e),M.updateScrollPosition(e),n.interactionContract.updateScrollPosition?.({left:e,top:E.value.scrollTop}),(0,_.nextTick)(()=>{D=!1})}catch(e){d.error(`Header scroll handling failed:`,{module:`TableRendererComponent`},e),D=!1}},X=e=>{try{if(!m.value)return;let t=b.columns.find(t=>t.field===e);if(!t)return;let n=T.value.center.columns.findIndex(t=>t.field===e);if(n===-1)return;let r=T.value.center.columns.slice(0,n).reduce((e,t)=>e+(t.width||150),0),i=t.width||150,a=m.value.$el?.querySelector(`.ht-scroll-area-horizontal`);if(!a)return;let o=a.clientWidth,s=a.scrollLeft;r>=s&&r+i<=s+o||a.scrollTo({left:r,behavior:`smooth`})}catch(e){d.error(`Sort indicator focus handling failed:`,{module:`TableRendererComponent`},e)}},me=e=>{let{activeId:t}=O;if(t)switch(e.key){case`ArrowDown`:case`ArrowUp`:case`ArrowLeft`:case`ArrowRight`:e.preventDefault();break;case`Enter`:e.preventDefault(),U(t);break;case`Escape`:e.preventDefault(),G(t);break}};(0,_.onMounted)(()=>{try{n.interactionContract.registerEventEmitter?.((e,t)=>{n.gridAPI.emit(e,t)}),n.interactionContract.registerCoreCallbacks&&(n.interactionContract.registerCoreCallbacks({onCellClick:q,onCellDoubleClick:J,onCellRightClick:ne,onRowSelect:Y}),d.debug(`Core interaction callbacks registered`,{module:`TableRendererComponent`}));let e=n.gridAPI.on?.(`toggle-selection`,e=>{let t=e?.rowId??null;if(t===null){d.warn(`toggle-selection event missing rowId`,e);return}if(e.selectionType===`radio`){if(O.selectedIds.has(t))return;O.selectedIds.clear(),O.selectedIds.add(t)}else O.selectedIds.has(t)?O.selectedIds.delete(t):O.selectedIds.add(t);O.activeId=t,k.value++,d.debug(`Selection toggled via toggle-selection event`,{rowId:t,selectionType:e.selectionType,selected:O.selectedIds.has(t)})});e&&A.push(e);let t=n.gridAPI.on?.(`clear-selection`,e=>{oe(e?.reason)});if(t&&A.push(t),(0,_.nextTick)(()=>{try{if(f.value){let e=f.value.getBoundingClientRect();j.setContainerSize({height:e.height,width:e.width}),M.setContainerSize({width:e.width,height:e.height})}m.value&&d.debug(`Virtualizers initialized`,{rowCount:b.rows.length,columnCount:b.columns.length})}catch(e){d.error(`Virtualizer initialization failed:`,{module:`TableRendererComponent`},e)}}),f.value){let e=new ResizeObserver(e=>{try{for(let t of e){let{height:e,width:n}=t.contentRect;V(n,e)}}catch(e){d.error(`ResizeObserver callback failed:`,{module:`TableRendererComponent`},e)}});e.observe(f.value),(0,_.onUnmounted)(()=>{e.disconnect()})}}catch(e){d.error(`Mount initialization failed:`,{module:`TableRendererComponent`},e)}});let he=new Set;return(0,_.watch)(k,()=>{let e=O.selectedIds;if(e===he)return;let t=Array.from(e),r=Array.from(he),i=t.filter(e=>!r.includes(e)),a=r.filter(e=>!t.includes(e));i.forEach(e=>{n.gridAPI.emit(`row-select`,{rowId:e,selected:!0,selectedRows:t})}),a.forEach(e=>{n.gridAPI.emit(`row-select`,{rowId:e,selected:!1,selectedRows:t})}),he=new Set(e)}),(0,_.watch)(()=>O.activeId,(e,t)=>{if(e!==t){let t=null,r=null;if(e){let n=String(e).split(`_`);n.length>=2&&(t=n[0]||null,r=n[1]||null)}n.gridAPI.emit(`cell-focus-change`,{rowId:t,columnId:r})}}),(0,_.onUnmounted)(()=>{A.forEach(e=>{try{e()}catch(e){d.error(`Cleanup handler failed during unmount`,{module:`TableRendererComponent`},e)}}),A.length=0}),t({updateState:F,updateSelection:L,setActive:z,updateScrollPosition:B,updateConfig:H,resize:V,refresh:te,ensureVisible:ee,enterEditMode:U,completeEdit:W,cancelEdit:G,toggleEditMode:K,handleCellClick:q,handleCellDoubleClick:J,handleCellRightClick:ne,handleRowSelect:Y,getCurrentState:le,getConfigSchema:ue}),(e,t)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{ref_key:`containerRef`,ref:f,class:(0,_.normalizeClass)([`ht-table-renderer-component h-full w-full flex flex-col`,[x.theme?.className,o.value]]),"data-border-mode":i.value,tabindex:`0`,role:`grid`,"aria-rowcount":b.rows.length,"aria-colcount":b.columns.length,onKeydown:me},[x.layout?.showHeader===!1?(0,_.createCommentVNode)(``,!0):((0,_.openBlock)(),(0,_.createBlock)(ii,{key:0,ref_key:`headerRef`,ref:p,columns:b.columns,"pane-config":T.value,"scroll-left":E.value.scrollLeft,height:w.value.headerHeight,"is-content-overflowing":y.value,"grid-a-p-i":n.gridAPI,"header-cell-border-classes":s.value,"selected-rows":Array.from(O.selectedIds),"total-rows":ae.value,class:`flex-shrink-0`,onHeaderScroll:pe,onSortIndicatorFocus:X,onSelectAll:se,onClearSelection:ce},null,8,[`columns`,`pane-config`,`scroll-left`,`height`,`is-content-overflowing`,`grid-a-p-i`,`header-cell-border-classes`,`selected-rows`,`total-rows`])),(0,_.createVNode)(Ni,{ref_key:`bodyRef`,ref:m,data:N.value,columns:b.columns,"pane-config":T.value,virtualizer:(0,_.unref)(j),"row-height":w.value.rowHeight,"is-content-overflowing":y.value,"focused-cell":typeof O.activeId==`string`||typeof O.activeId==`number`?{rowId:O.activeId,columnId:``}:null,"selected-rows":Array.from(O.selectedIds),"interaction-contract":n.interactionContract,"body-row-border-classes":l.value,"body-cell-border-classes":u.value,"stripe-enabled":a.value,class:`flex-1 overflow-hidden`,style:(0,_.normalizeStyle)({height:w.value.bodyHeight}),onScroll:de},null,8,[`data`,`columns`,`pane-config`,`virtualizer`,`row-height`,`is-content-overflowing`,`focused-cell`,`selected-rows`,`interaction-contract`,`body-row-border-classes`,`body-cell-border-classes`,`stripe-enabled`,`style`]),y.value?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,Bi,[(0,_.createElementVNode)(`div`,{class:`ht-scrollbar-pane-left flex-shrink-0`,style:(0,_.normalizeStyle)({width:`${T.value.left.width}px`})},null,4),(0,_.createElementVNode)(`div`,{ref_key:`horizontalScrollbarRef`,ref:g,class:`ht-scrollbar-pane-center flex-1 overflow-x-auto ht-custom-scrollbar`,tabindex:`-1`,role:`presentation`,"aria-hidden":`true`,onScrollPassive:fe},[(0,_.createElementVNode)(`div`,{style:(0,_.normalizeStyle)({width:`${T.value.center.width}px`,height:`1px`})},null,4)],544),(0,_.createElementVNode)(`div`,{class:`ht-scrollbar-pane-right flex-shrink-0`,style:(0,_.normalizeStyle)({width:`${T.value.right.width}px`})},null,4)])):(0,_.createCommentVNode)(``,!0),x.layout?.showFooter===!1?(0,_.createCommentVNode)(``,!0):((0,_.openBlock)(),(0,_.createBlock)(Ri,{key:2,ref_key:`footerRef`,ref:h,"total-rows":b.rows.length,"selected-count":O.selectedIds.size,"render-metrics":{lastRenderTime:0,renderCount:0,avgRenderTime:0,averageFPS:60},class:`flex-shrink-0 border-t border-[var(--ht-border)] h-10`},null,8,[`total-rows`,`selected-count`]))],42,zi))}}),Hi=$(Vi,[[`__scopeId`,`data-v-15d81561`]]),Ui=class{name=`table`;interactionContract;logger;app=null;componentInstance=null;hostElement=null;isDestroyed=!1;options;currentState=null;currentColumns=[];currentRows=[];constructor(e={}){this.options=e,this.logger=c.createLogger(`TableRenderer`);let t=et(`table-renderer`);this.interactionContract={updateSelection:(e,t)=>{this.componentInstance?.updateSelection&&this.componentInstance.updateSelection(e,t)},setActive:e=>{this.componentInstance?.setActive&&this.componentInstance.setActive(e)},ensureVisible:(e,t)=>{this.componentInstance?.ensureVisible&&this.componentInstance.ensureVisible(e,t)},toggleEditMode:async(e,t)=>this.componentInstance?.toggleEditMode?await this.componentInstance.toggleEditMode(e,t):!1,registerEventEmitter:e=>{t.registerEventEmitter(e)},updateScrollPosition:e=>{this.componentInstance?.updateScrollPosition&&this.componentInstance.updateScrollPosition(e)},refresh:()=>{this.componentInstance?.refresh&&this.componentInstance.refresh()},emit:(e,n)=>{t.emit?.(e,n)},registerCoreCallbacks:e=>{t.registerCoreCallbacks?.(e)},destroy:()=>{t.destroy?.()}},this.setupCoreCallbacks()}async mount(e,t){if(this.isDestroyed)throw Error(`Cannot mount destroyed TableRenderer`);this.app&&(this.logger.warn(`Already mounted, unmounting first`),await this.unmount());try{this.hostElement=e,this.app=(0,_.createApp)(Hi,{renderer:this,interactionContract:this.interactionContract,gridAPI:t,options:this.options}),this.componentInstance=this.app.mount(e),this.interactionContract.registerEventEmitter((e,n)=>{t.emit(e,n)}),this.logger.debug(`Mounted successfully`)}catch(e){throw this.logger.error(`Mount failed:`,{module:`TableRenderer`},e),await this.cleanup(),e}}async unmount(){await this.cleanup()}render(e,t,n){if(!(this.isDestroyed||!this.componentInstance))try{this.currentState=e,this.currentColumns=t,this.currentRows=n,this.componentInstance.updateState&&this.componentInstance.updateState(e,t,n)}catch(e){this.logger.error(`Render failed:`,{module:`TableRenderer`},e)}}resize(e,t){if(!(this.isDestroyed||!this.componentInstance))try{this.componentInstance.resize&&this.componentInstance.resize(e,t)}catch(e){this.logger.error(`Resize failed:`,{module:`TableRenderer`},e)}}getConfigSchema(){return{performance:{type:`object`,properties:{enableRAF:{type:`boolean`,default:!0},batchUpdates:{type:`boolean`,default:!0},maxConcurrentRenders:{type:`number`,default:3}}},accessibility:{type:`object`,properties:{enableAria:{type:`boolean`,default:!0},announceChanges:{type:`boolean`,default:!0},keyboardNavigation:{type:`boolean`,default:!0}}},layout:{type:`object`,properties:{showHeader:{type:`boolean`,default:!0},showFooter:{type:`boolean`,default:!0},enablePanes:{type:`boolean`,default:!0},stickyHeader:{type:`boolean`,default:!0}}}}}updateConfig(e){Object.assign(this.options,e),this.componentInstance?.updateConfig&&this.componentInstance.updateConfig(this.options)}getCurrentState(){return{state:this.currentState,columns:this.currentColumns,rows:this.currentRows}}setupCoreCallbacks(){this.interactionContract.registerCoreCallbacks?.({onCellClick:e=>{this.componentInstance?.handleCellClick&&this.componentInstance.handleCellClick(e)},onCellDoubleClick:e=>{this.componentInstance?.handleCellDoubleClick&&this.componentInstance.handleCellDoubleClick(e)},onCellRightClick:e=>{this.componentInstance?.handleCellRightClick&&this.componentInstance.handleCellRightClick(e)},onRowSelect:e=>{this.componentInstance?.handleRowSelect&&this.componentInstance.handleRowSelect(e)},onScroll:e=>{this.componentInstance?.handleScroll&&this.componentInstance.handleScroll(e)}})}async cleanup(){try{this.app&&this.hostElement&&(this.app.unmount(),this.app=null,this.componentInstance=null),this.hostElement&&=(this.hostElement.innerHTML=``,null),this.interactionContract.destroy?.(),this.currentState=null,this.currentColumns=[],this.currentRows=[]}catch(e){this.logger.error(`Cleanup failed:`,{module:`TableRenderer`},e)}}destroy(){this.isDestroyed=!0,this.cleanup()}};function Wi(e={}){return new Ui(e)}var Gi={key:0,class:`keyboard-shortcuts-panel`,role:`complementary`,"aria-labelledby":`shortcuts-title`},Ki={class:`shortcuts-content`},qi={key:0,class:`shortcut-group`},Ji={key:1,class:`shortcut-group`},Yi={key:2,class:`shortcut-group`},Xi={class:`shortcut-list`},Zi={class:`shortcut-keys`},Qi={class:`shortcut-description`},$i={key:1,class:`keyboard-help-hint`},ea={class:`sr-only`,"aria-live":`polite`,"aria-atomic":`true`},ta=(0,_.defineComponent)({__name:`KeyboardShortcuts`,props:{showShortcuts:{type:Boolean,default:!1},showHelpHint:{type:Boolean,default:!0},enableEditing:{type:Boolean,default:!0},enableSelection:{type:Boolean,default:!0},customShortcuts:{default:()=>[]}},emits:[`close`,`show`],setup(e,{expose:t,emit:n}){let r=e,i=n,a=(0,_.ref)(``),o=()=>{i(`close`)},s=e=>{if(e.key===`?`&&!e.ctrlKey&&!e.altKey&&!e.metaKey){let t=e.target;if(t.tagName===`INPUT`||t.tagName===`TEXTAREA`)return;e.preventDefault(),r.showShortcuts?o():i(`show`)}e.key===`Escape`&&r.showShortcuts&&(e.preventDefault(),o())};return(0,_.onMounted)(()=>{document.addEventListener(`keydown`,s)}),(0,_.onUnmounted)(()=>{document.removeEventListener(`keydown`,s)}),t({announceShortcut:(e,t)=>{a.value=`${e} ${t}`,setTimeout(()=>{a.value=``},1e3)}}),(t,n)=>((0,_.openBlock)(),(0,_.createElementBlock)(_.Fragment,null,[e.showShortcuts?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,Gi,[(0,_.createElementVNode)(`div`,{class:`shortcuts-header`},[n[0]||=(0,_.createElementVNode)(`h3`,{id:`shortcuts-title`,class:`shortcuts-title`},`Keyboard Shortcuts`,-1),(0,_.createElementVNode)(`button`,{class:`shortcuts-close`,"aria-label":`Close keyboard shortcuts`,onClick:o},`×`)]),(0,_.createElementVNode)(`div`,Ki,[n[4]||=(0,_.createStaticVNode)(`<div class="shortcut-group" data-v-63978771><h4 class="shortcut-group-title" data-v-63978771>Navigation</h4><div class="shortcut-list" data-v-63978771><div class="shortcut-item" data-v-63978771><div class="shortcut-keys" data-v-63978771><kbd data-v-63978771>↑</kbd><kbd data-v-63978771>↓</kbd><kbd data-v-63978771>←</kbd><kbd data-v-63978771>→</kbd></div><div class="shortcut-description" data-v-63978771>Move between cells</div></div><div class="shortcut-item" data-v-63978771><div class="shortcut-keys" data-v-63978771><kbd data-v-63978771>Home</kbd> / <kbd data-v-63978771>End</kbd></div><div class="shortcut-description" data-v-63978771>First/last cell in row</div></div><div class="shortcut-item" data-v-63978771><div class="shortcut-keys" data-v-63978771><kbd data-v-63978771>Ctrl</kbd> + <kbd data-v-63978771>Home</kbd> / <kbd data-v-63978771>End</kbd></div><div class="shortcut-description" data-v-63978771>First/last cell in grid</div></div><div class="shortcut-item" data-v-63978771><div class="shortcut-keys" data-v-63978771><kbd data-v-63978771>Page Up</kbd> / <kbd data-v-63978771>Page Down</kbd></div><div class="shortcut-description" data-v-63978771>Move page up/down</div></div><div class="shortcut-item" data-v-63978771><div class="shortcut-keys" data-v-63978771><kbd data-v-63978771>Tab</kbd> / <kbd data-v-63978771>Shift</kbd> + <kbd data-v-63978771>Tab</kbd></div><div class="shortcut-description" data-v-63978771>Next/previous cell</div></div></div></div>`,1),e.enableEditing?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,qi,[...n[1]||=[(0,_.createStaticVNode)(`<h4 class="shortcut-group-title" data-v-63978771>Editing</h4><div class="shortcut-list" data-v-63978771><div class="shortcut-item" data-v-63978771><div class="shortcut-keys" data-v-63978771><kbd data-v-63978771>Enter</kbd> / <kbd data-v-63978771>F2</kbd></div><div class="shortcut-description" data-v-63978771>Start editing cell</div></div><div class="shortcut-item" data-v-63978771><div class="shortcut-keys" data-v-63978771><kbd data-v-63978771>Escape</kbd></div><div class="shortcut-description" data-v-63978771>Cancel editing</div></div><div class="shortcut-item" data-v-63978771><div class="shortcut-keys" data-v-63978771><kbd data-v-63978771>Enter</kbd></div><div class="shortcut-description" data-v-63978771>Commit edit and move down</div></div><div class="shortcut-item" data-v-63978771><div class="shortcut-keys" data-v-63978771><kbd data-v-63978771>Tab</kbd></div><div class="shortcut-description" data-v-63978771>Commit edit and move right</div></div></div>`,2)]])):(0,_.createCommentVNode)(``,!0),e.enableSelection?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,Ji,[...n[2]||=[(0,_.createStaticVNode)(`<h4 class="shortcut-group-title" data-v-63978771>Selection</h4><div class="shortcut-list" data-v-63978771><div class="shortcut-item" data-v-63978771><div class="shortcut-keys" data-v-63978771><kbd data-v-63978771>Space</kbd></div><div class="shortcut-description" data-v-63978771>Toggle row selection</div></div><div class="shortcut-item" data-v-63978771><div class="shortcut-keys" data-v-63978771><kbd data-v-63978771>Ctrl</kbd> + <kbd data-v-63978771>A</kbd></div><div class="shortcut-description" data-v-63978771>Select all rows</div></div><div class="shortcut-item" data-v-63978771><div class="shortcut-keys" data-v-63978771><kbd data-v-63978771>Shift</kbd> + <kbd data-v-63978771>Arrow</kbd></div><div class="shortcut-description" data-v-63978771>Extend selection</div></div></div>`,2)]])):(0,_.createCommentVNode)(``,!0),e.customShortcuts.length>0?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,Yi,[n[3]||=(0,_.createElementVNode)(`h4`,{class:`shortcut-group-title`},`Custom`,-1),(0,_.createElementVNode)(`div`,Xi,[((0,_.openBlock)(!0),(0,_.createElementBlock)(_.Fragment,null,(0,_.renderList)(e.customShortcuts,e=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:e.key,class:`shortcut-item`},[(0,_.createElementVNode)(`div`,Zi,[((0,_.openBlock)(!0),(0,_.createElementBlock)(_.Fragment,null,(0,_.renderList)(e.keys,e=>((0,_.openBlock)(),(0,_.createElementBlock)(`kbd`,{key:e},(0,_.toDisplayString)(e),1))),128))]),(0,_.createElementVNode)(`div`,Qi,(0,_.toDisplayString)(e.description),1)]))),128))])])):(0,_.createCommentVNode)(``,!0)]),n[5]||=(0,_.createElementVNode)(`div`,{class:`shortcuts-footer`},[(0,_.createElementVNode)(`div`,{class:`shortcut-help`},[(0,_.createTextVNode)(` Press `),(0,_.createElementVNode)(`kbd`,null,`?`),(0,_.createTextVNode)(` to toggle this panel `)])],-1)])):e.showHelpHint?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,$i,[...n[6]||=[(0,_.createElementVNode)(`div`,{class:`help-hint-content`},[(0,_.createTextVNode)(` Press `),(0,_.createElementVNode)(`kbd`,null,`?`),(0,_.createTextVNode)(` for keyboard shortcuts `)],-1)]])):(0,_.createCommentVNode)(``,!0),(0,_.createElementVNode)(`div`,ea,(0,_.toDisplayString)(a.value),1)],64))}}),na=$(ta,[[`__scopeId`,`data-v-63978771`]]),ra=(0,_.defineComponent)({__name:`AccessibilityAnnouncer`,setup(e,{expose:t}){let n=(0,_.ref)(``),r=(0,_.ref)(``),i=(0,_.ref)(``),a={high:[],medium:[],low:[]},o=!1,s=[],c=(e,t={})=>{let{priority:n=`medium`,category:r=`navigation`,delay:i=0,clearAfter:s=3e3}=t;e.trim()&&(a[n].push({message:e,options:t}),o||setTimeout(()=>l(),i))},l=()=>{o=!0;let e=[`high`,`medium`,`low`];for(let t of e){let e=a[t];if(e.length>0){let{message:t,options:n}=e.shift();u(t,n);break}}e.some(e=>a[e].length>0)?setTimeout(()=>l(),100):o=!1},u=(e,t)=>{let{priority:a=`medium`,category:o=`navigation`,clearAfter:c=3e3}=t;if(s.forEach(e=>clearTimeout(e)),s=[],a===`high`||o===`error`){if(n.value=e,c>0){let e=window.setTimeout(()=>{n.value=``},c);s.push(e)}}else if(o===`navigation`){if(i.value=e,c>0){let e=window.setTimeout(()=>{i.value=``},c);s.push(e)}}else if(r.value=e,c>0){let e=window.setTimeout(()=>{r.value=``},c);s.push(e)}},d=(e,t,n,r)=>{let i=`Row ${e+1}, Column ${t+1}`,a=r?`, ${r}`:``,o=n?`, ${n}`:``;c(`${i}${a}${o}`,{category:`navigation`,priority:`low`,clearAfter:2e3})},f=(e,t)=>{let n=e===0?`Selection cleared`:e===1?`1 row selected`:e===t?`All rows selected`:`${e} of ${t} rows selected`;c(n,{category:`selection`,priority:`medium`,clearAfter:2e3})},p=(e,t)=>{if(e&&t){let e=`Row ${t.row+1}, Column ${t.column+1}`,n=t.title?`, ${t.title}`:``;c(`Editing ${e}${n}`,{category:`editing`,priority:`medium`,clearAfter:1e3})}else e||c(`Edit mode exited`,{category:`editing`,priority:`low`,clearAfter:1e3})},m=(e,t)=>{let n=t===`none`?`${e} sorting cleared`:`${e} sorted ${t===`asc`?`ascending`:t===`desc`?`descending`:`none`}`;c(n,{category:`navigation`,priority:`medium`,clearAfter:2e3})},h=(e,t,n)=>{c(e===0?`All filters cleared. Showing all ${t} rows`:`${e} filter${e>1?`s`:``} applied. Showing ${n} of ${t} rows`,{category:`navigation`,priority:`medium`,clearAfter:2e3})},g=e=>{c(`Error: ${e}`,{category:`error`,priority:`high`,clearAfter:5e3})},v=e=>{c(e,{category:`success`,priority:`medium`,clearAfter:2e3})},y=()=>{n.value=``,r.value=``,i.value=``,s.forEach(e=>clearTimeout(e)),s=[],Object.keys(a).forEach(e=>{a[e]=[]}),o=!1};return(0,_.onUnmounted)(()=>{y()}),t({announce:c,announceCellFocus:d,announceSelection:f,announceEditMode:p,announceSorting:m,announceFiltering:h,announceError:g,announceSuccess:v,clearAll:y}),(e,t)=>((0,_.openBlock)(),(0,_.createElementBlock)(_.Fragment,null,[(0,_.createElementVNode)(`div`,{ref:`primaryRegion`,class:`sr-only`,"aria-live":`assertive`,"aria-atomic":`true`,role:`status`},(0,_.toDisplayString)(n.value),513),(0,_.createElementVNode)(`div`,{ref:`secondaryRegion`,class:`sr-only`,"aria-live":`polite`,"aria-atomic":`false`,role:`log`},(0,_.toDisplayString)(r.value),513),(0,_.createElementVNode)(`div`,{ref:`navigationRegion`,class:`sr-only`,"aria-live":`polite`,"aria-atomic":`true`,role:`status`},(0,_.toDisplayString)(i.value),513)],64))}}),ia=$(ra,[[`__scopeId`,`data-v-a88bd2f5`]]),aa=[`aria-live`],oa={class:`flex-shrink-0`},sa={key:0,class:`w-5 h-5`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,viewBox:`0 0 24 24`},ca={key:1,class:`w-5 h-5`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,viewBox:`0 0 24 24`},la={key:2,class:`w-5 h-5`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,viewBox:`0 0 24 24`},ua={key:3,class:`w-5 h-5`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,viewBox:`0 0 24 24`},da={class:`flex-1 text-sm font-medium`},fa=(0,_.defineComponent)({__name:`ToastNotification`,props:{message:{},type:{default:`info`},duration:{default:4e3},visible:{type:Boolean,default:!1}},emits:[`close`],setup(e,{emit:t}){let n=e,r=t,i=(0,_.ref)(n.visible),a=null;(0,_.watch)(()=>n.visible,e=>{i.value=e,e?o():s()});function o(){s(),n.duration>0&&(a=setTimeout(()=>{i.value=!1,r(`close`)},n.duration))}function s(){a&&=(clearTimeout(a),null)}function c(){s(),i.value=!1,r(`close`)}(0,_.onMounted)(()=>{n.visible&&o()});let l={info:`bg-[var(--ht-primary)] text-[var(--ht-text-inverse)]`,warn:`bg-orange-500 text-white`,error:`bg-red-500 text-white`,success:`bg-green-500 text-white`};return(t,n)=>((0,_.openBlock)(),(0,_.createBlock)(_.Transition,{name:`toast-slide`},{default:(0,_.withCtx)(()=>[i.value?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:0,class:(0,_.normalizeClass)([`ht-toast fixed bottom-4 right-4 z-50 px-4 py-3 rounded-lg shadow-lg max-w-md flex items-center gap-3`,l[e.type]]),role:`alert`,"aria-live":e.type===`error`?`assertive`:`polite`},[(0,_.createElementVNode)(`div`,oa,[e.type===`info`?((0,_.openBlock)(),(0,_.createElementBlock)(`svg`,sa,[...n[0]||=[(0,_.createElementVNode)(`circle`,{cx:`12`,cy:`12`,r:`10`},null,-1),(0,_.createElementVNode)(`path`,{d:`M12 16v-4`},null,-1),(0,_.createElementVNode)(`path`,{d:`M12 8h.01`},null,-1)]])):e.type===`warn`?((0,_.openBlock)(),(0,_.createElementBlock)(`svg`,ca,[...n[1]||=[(0,_.createElementVNode)(`path`,{d:`m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3`},null,-1),(0,_.createElementVNode)(`path`,{d:`M12 9v4`},null,-1),(0,_.createElementVNode)(`path`,{d:`M12 17h.01`},null,-1)]])):e.type===`error`?((0,_.openBlock)(),(0,_.createElementBlock)(`svg`,la,[...n[2]||=[(0,_.createElementVNode)(`circle`,{cx:`12`,cy:`12`,r:`10`},null,-1),(0,_.createElementVNode)(`path`,{d:`m15 9-6 6`},null,-1),(0,_.createElementVNode)(`path`,{d:`m9 9 6 6`},null,-1)]])):e.type===`success`?((0,_.openBlock)(),(0,_.createElementBlock)(`svg`,ua,[...n[3]||=[(0,_.createElementVNode)(`path`,{d:`M22 11.08V12a10 10 0 1 1-5.93-9.14`},null,-1),(0,_.createElementVNode)(`path`,{d:`m9 11 3 3L22 4`},null,-1)]])):(0,_.createCommentVNode)(``,!0)]),(0,_.createElementVNode)(`div`,da,(0,_.toDisplayString)(e.message),1),(0,_.createElementVNode)(`button`,{class:`flex-shrink-0 ml-2 p-1 rounded hover:bg-white/20 transition-colors focus:outline-none focus:ring-2 focus:ring-white/50`,"aria-label":`Close notification`,onClick:c},[...n[4]||=[(0,_.createElementVNode)(`svg`,{class:`w-4 h-4`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,viewBox:`0 0 24 24`},[(0,_.createElementVNode)(`path`,{d:`M18 6 6 18`}),(0,_.createElementVNode)(`path`,{d:`m6 6 12 12`})],-1)]])],10,aa)):(0,_.createCommentVNode)(``,!0)]),_:1}))}}),pa=$(fa,[[`__scopeId`,`data-v-6fee3fd6`]]),ma={key:0,class:`ht-filterbar mb-2`},ha={class:`flex items-center justify-between gap-2`},ga={class:`flex flex-wrap items-center gap-2`},_a=[`onClick`],va={class:`truncate max-w-[220px]`},ya=[`onClick`],ba={class:`text-xs text-[var(--ht-text-muted)]`,"aria-live":`polite`,"aria-atomic":`true`},xa={key:0},Sa={key:1,class:`mt-1 flex items-center gap-2`},Ca={class:`relative h-2 w-24 rounded bg-[var(--ht-bg-subtle)]`},wa={key:1},Ta=(0,_.defineComponent)({__name:`FilterBar`,props:{api:{}},setup(e){let t=e,n=c.createLogger({module:`FilterBar`}),r=(0,_.ref)([]),i=(0,_.ref)(0),a=(0,_.ref)(0),o=(0,_.ref)(0),s=(0,_.ref)(null),l=(0,_.ref)([]);function u(){try{r.value=t.api.getState()?.config?.filters||[]}catch(e){n.warn(`Failed to refresh filters from API`,e)}}(0,_.onMounted)(()=>{u(),t.api.on&&(l.value.push(t.api.on(`filter-change`,e=>{r.value=e||[]})),l.value.push(t.api.on(`data-pipeline-complete`,e=>{i.value=e?.originalCount??0,a.value=e?.processedCount??0,o.value=Math.round(e?.processingTime??0),s.value=null})),l.value.push(t.api.on(`filter-progress`,e=>{s.value=e?{processed:e.processed??0,total:e.total??0}:null})))}),(0,_.onUnmounted)(()=>{l.value.forEach(e=>{try{e()}catch(e){n.warn(`Failed to cleanup event listener`,e)}}),l.value=[]});function d(){t.api.updateConfig({filters:[]})}function f(){try{t.api.emit(`filter-cancel`,null)}catch(e){n.warn(`Failed to cancel worker`,e)}s.value=null}function p(e){let n=r.value.filter(t=>!(t.field===e.field&&t.operator===e.operator&&t.value===e.value));t.api.updateConfig({filters:n})}function m(e){try{t.api.emit(`column-open-filter`,{field:e.field})}catch(e){n.warn(`Failed to emit column-open-filter event`,e)}}function h(e){let t={equals:`=`,contains:`Contains`,startsWith:`Starts with`,endsWith:`Ends with`,gt:`>`,gte:`≥`,lt:`<`,lte:`≤`,between:`Between`,in:`Includes`,oneOf:`One of`,notIn:`Excludes`,notEquals:`≠`},n=Array.isArray(e.value)?e.operator===`between`?`${e.value[0]}~${e.value[1]}`:`${e.value.length} items`:String(e.value);return`${e.field} ${t[e.operator]??e.operator} ${n}`}let g=(0,_.computed)(()=>(r.value?.length??0)>0);return(e,t)=>g.value||i.value?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,ma,[(0,_.createElementVNode)(`div`,ha,[(0,_.createElementVNode)(`div`,ga,[((0,_.openBlock)(!0),(0,_.createElementBlock)(_.Fragment,null,(0,_.renderList)(r.value,e=>((0,_.openBlock)(),(0,_.createElementBlock)(`span`,{key:h(e),class:`inline-flex items-center gap-2 rounded border border-[var(--ht-border)] bg-[var(--ht-bg-subtle)] px-2 py-1 text-xs text-[var(--ht-text)] cursor-pointer`,onClick:t=>m(e)},[(0,_.createElementVNode)(`span`,va,(0,_.toDisplayString)(h(e)),1),(0,_.createElementVNode)(`button`,{class:`text-[var(--ht-text-muted)] hover:text-[var(--ht-danger)]`,onClick:(0,_.withModifiers)(t=>p(e),[`stop`])},`×`,8,ya)],8,_a))),128)),g.value?((0,_.openBlock)(),(0,_.createElementBlock)(`button`,{key:0,class:`text-xs text-[var(--ht-primary)] hover:underline`,onClick:d},`Clear All`)):(0,_.createCommentVNode)(``,!0)]),(0,_.createElementVNode)(`div`,ba,[i.value?((0,_.openBlock)(),(0,_.createElementBlock)(_.Fragment,{key:0},[(0,_.createTextVNode)(`Showing `+(0,_.toDisplayString)(a.value||i.value)+` / `+(0,_.toDisplayString)(i.value),1),o.value?((0,_.openBlock)(),(0,_.createElementBlock)(`span`,xa,` (`+(0,_.toDisplayString)(o.value)+` ms)`,1)):(0,_.createCommentVNode)(``,!0)],64)):(0,_.createCommentVNode)(``,!0),s.value&&s.value.total?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,Sa,[(0,_.createElementVNode)(`div`,Ca,[(0,_.createElementVNode)(`div`,{class:`h-2 rounded bg-[var(--ht-primary)]`,style:(0,_.normalizeStyle)({width:Math.min(100,Math.round(s.value.processed/s.value.total*100))+`%`})},null,4)]),(0,_.createElementVNode)(`span`,null,(0,_.toDisplayString)(Math.min(100,Math.round(s.value.processed/s.value.total*100)))+`%`,1),(0,_.createElementVNode)(`button`,{class:`px-2 py-0.5 rounded border border-[var(--ht-border)] text-[var(--ht-text-muted)] hover:text-[var(--ht-danger)]`,onClick:f},`Cancel`)])):(0,_.createCommentVNode)(``,!0)])])])):((0,_.openBlock)(),(0,_.createElementBlock)(`div`,wa))}}),Ea=Ta;const Da=[`row-click`,`row-select`,`cell-click`,`cell-double-click`,`cell-right-click`,`multi-sort-change`,`filter-change`,`scroll`,`column-resize-start`,`column-resize`,`toggle-selection`,`select-all`,`clear-selection`];var Oa=[`aria-label`,`aria-rowcount`,`aria-colcount`,`data-renderer`],ka={key:0,class:`ht-overlay ht-overlay-bg z-30`},Aa={key:1,class:`ht-overlay bg-[var(--ht-bg)] z-30`},ja={class:`ht-overlay-panel`},Ma={class:`text-[var(--ht-text)]`},Na={key:2,class:`ht-overlay bg-[var(--ht-bg)] z-30`},Pa={class:`ht-overlay-panel`},Fa={class:`text-[var(--ht-text)] text-sm mb-4`},Ia={key:0,class:`ht-overlay ht-empty-overlay text-[var(--ht-text-muted)]`},La={class:`ht-overlay-panel`},Ra={class:`text-xs mt-1 text-[var(--ht-text-muted)]`},za=(0,_.defineComponent)({__name:`DataGrid`,props:{data:{default:()=>[]},columns:{default:()=>[]},config:{default:()=>({})},loading:{type:Boolean,default:!1},height:{default:400},class:{default:``},plugins:{default:()=>[]},renderer:{default:`table`},showKeyboardShortcuts:{type:Boolean,default:!1},keyboardHelpHint:{type:Boolean,default:!0}},emits:[`row-click`,`row-select`,`cell-click`,`cell-double-click`,`cell-right-click`,`multi-sort-change`,`filter-change`,`scroll`,`column-resize-start`,`column-resize`,`renderer-changed`,`renderer-error`,`toggle-selection`,`clear-selection`],setup(e,{expose:t,emit:n}){let r=e,i=n,a=(0,_.computed)(()=>({...r.config,renderer:r.renderer})),o=c.createLogger(`DataGrid`),s=Ze(a.value,r.plugins),{api:l}=s,u=(0,_.ref)(),d=(0,_.ref)(),f=(0,_.ref)(),p=(0,_.ref)(),m=(0,_.ref)(),h=[],g=(0,_.ref)(!1),v=(0,_.ref)(null),y=(0,_.ref)(r.showKeyboardShortcuts),b=(0,_.ref)(!1),x=(0,_.ref)(``),S=(0,_.ref)(`info`),C=(0,_.ref)(new Set((r.plugins||[]).map(e=>e.name))),w=(0,_.ref)(null),T=e=>{let t=null;for(let n of e||[])if(Z(n)){let e=n.type;if(e===`radio`)return`radio`;e===`checkbox`&&(t??=`checkbox`)}return t},E=(0,_.computed)(()=>({height:typeof r.height==`number`?`${r.height}px`:r.height,position:`relative`,overflow:`hidden`})),D=(0,_.computed)(()=>[`ht-grid-container`,`bg-[var(--ht-bg)]`,`rounded-[var(--radius-ht-md)]`,`ht-renderer-${r.renderer}`,r.class].filter(Boolean).join(` `)),O=(0,_.computed)(()=>!s.loading.value&&!s.error.value&&!v.value),k={updateSelection:(e,t)=>{let n=l.getActiveRendererInstance?.();n?.renderer?.interactionContract&&n.renderer.interactionContract.updateSelection(e,t)},setActive:e=>{let t=l.getActiveRendererInstance?.();t?.renderer?.interactionContract&&t.renderer.interactionContract.setActive(e)},ensureVisible:(e,t)=>{let n=l.getActiveRendererInstance?.();n?.renderer?.interactionContract&&n.renderer.interactionContract.ensureVisible(e,t)},toggleEditMode:async(e,t)=>{let n=l.getActiveRendererInstance?.();return n?.renderer?.interactionContract?await n.renderer.interactionContract.toggleEditMode(e,t):!1},registerEventEmitter:e=>{let t=l.getActiveRendererInstance?.();t?.renderer?.interactionContract&&t.renderer.interactionContract.registerEventEmitter(e)},updateScrollPosition:e=>{let t=l.getActiveRendererInstance?.();t?.renderer?.interactionContract&&t.renderer.interactionContract.updateScrollPosition?.(e)},refresh:()=>{let e=l.getActiveRendererInstance?.();e?.renderer?.interactionContract&&e.renderer.interactionContract.refresh?.()},emit:(e,t)=>{Da.includes(e)?i(e,t):l.emit(e,t)},registerCoreCallbacks:e=>{let t=l.getActiveRendererInstance?.();t?.renderer?.interactionContract&&t.renderer.interactionContract.registerCoreCallbacks?.(e)},destroy:()=>{let e=l.getActiveRendererInstance?.();e?.renderer?.interactionContract&&e.renderer.interactionContract.destroy?.()}};(0,_.provide)(`gridState`,s),(0,_.provide)(`interactionContract`,k),(0,_.provide)(nt,l);let A=async()=>{try{if(!f.value)throw Error(`Renderer host element not found`);if(v.value=null,!(l.getAvailableRenderers?.()||[]).includes(`table`)&&l.registerRenderer&&(o.debug(`Registering table renderer`),l.registerRenderer(`table`,e=>Wi(e))),!await l.initializeRenderer?.(f.value))throw Error(`Renderer initialization returned false`);return g.value=!0,o.debug(`Renderer system initialized with '${r.renderer}' renderer`),!0}catch(e){let t=e instanceof Error?e.message:`Unknown error`;return v.value=t,o.error(`Renderer initialization failed:`,{module:`DataGrid`},e),i(`renderer-error`,{error:e instanceof Error?e:Error(t),context:`initialization`,renderer:r.renderer}),!1}},j=async e=>{if(!g.value)return o.warn(`Cannot switch renderer - system not initialized`),!1;try{let t=l.getRenderer?.()||`unknown`,n=await l.setRenderer?.(e);return n&&(i(`renderer-changed`,{name:e,previousRenderer:t}),o.debug(`Switched from '${t}' to '${e}' renderer`)),n}catch(t){return o.error(`Failed to switch to renderer '${e}':`,{module:`DataGrid`},t),i(`renderer-error`,{error:t instanceof Error?t:Error(`Renderer switch failed`),context:`switch`,renderer:e}),!1}},M=()=>{y.value=!0},N=()=>{y.value=!1},P=(0,_.computed)(()=>{let e=l.listPlugins().map(e=>e.name);return{editing:e.includes(`core-cell-editing`),selection:e.includes(`core-selection`)}}),F=()=>{if(!m.value)return;let e=m.value;l.on?.(`cell-focus-change`,t=>{t.rowId!==null&&t.columnId!==null&&e.announceCellFocus(0,0,void 0,t.columnId)}),l.on?.(`row-select`,t=>{if(t.selectedRows){let n=s.data.value.visibleRows.length;e.announceSelection(t.selectedRows.length,n)}}),l.on?.(`cell-edit-start`,t=>{let n=s.data.value.visibleRows.findIndex(e=>(e.id??e.index)===t.rowId),r=s.columns.value.findIndex(e=>e.field===t.columnId),i=s.columns.value.find(e=>e.field===t.columnId);n>=0&&r>=0&&e.announceEditMode(!0,{row:n,column:r,title:i?.title})}),l.on?.(`cell-edit-complete`,()=>{e.announceEditMode(!1)}),l.on?.(`cell-edit-cancel`,()=>{e.announceEditMode(!1)}),l.on?.(`multi-sort-change`,t=>{if(!t||!t.fields||t.fields.length===0){e.announceSorting(`All columns`,`none`);return}let[n]=t.fields;if(!n)return;let r=s.columns.value.find(e=>e.field===n.field);r&&e.announceSorting(r.title,n.direction)}),l.on?.(`filter-change`,t=>{let n=r.data.length,i=s.data.value.visibleRows.length,a=t.length||0;e.announceFiltering(a,n,i)}),l.on?.(`plugin-error`,t=>{e.announceError(`Plugin error: ${t.error.message}`)})},I=l.on?.(`column-resize-start`,e=>{i(`column-resize-start`,e)});I&&h.push(I);let L=l.on?.(`column-resize`,e=>{i(`column-resize`,e)});L&&h.push(L);let R=l.on?.(`cell-click`,e=>{i(`cell-click`,e)});R&&h.push(R);let z=l.on?.(`row-click`,e=>{i(`row-click`,e)});z&&h.push(z);let B=l.on?.(`cell-double-click`,e=>{i(`cell-double-click`,e)});B&&h.push(B);let V=l.on?.(`cell-right-click`,e=>{i(`cell-right-click`,e)});V&&h.push(V);let H=l.on?.(`row-select`,e=>{i(`row-select`,e)});H&&h.push(H);let U=l.on?.(`toggle-selection`,e=>{i(`toggle-selection`,e)});U&&h.push(U);let W=l.on?.(`clear-selection`,e=>{i(`clear-selection`,e)});W&&h.push(W);let G=l.on?.(`multi-sort-change`,e=>{i(`multi-sort-change`,e)});G&&h.push(G);let K=l.on?.(`filter-change`,e=>{i(`filter-change`,e)});K&&h.push(K);let ee=l.on?.(`scroll`,e=>{i(`scroll`,e)});ee&&h.push(ee);let te=l.on?.(`multi-sort-disabled-warning`,e=>{J(e.message,`warn`)});te&&h.push(te);let q=l.on?.(`user-notification`,e=>{J(e.message,e.type)});q&&h.push(q);let J=(e,t=`info`)=>{x.value=e,S.value=t,b.value=!0},ne=()=>{b.value=!1};(0,_.onMounted)(async()=>{r.data.length>0&&l.setData(r.data),r.columns.length>0&&l.setColumns(r.columns),s.__internal.setLoading(r.loading),await(0,_.nextTick)(),await A(),await(0,_.nextTick)(),F(),w.value=T(s.columns.value)}),(0,_.watch)(()=>r.data,e=>{l.setData(e)}),(0,_.watch)(()=>r.columns,e=>{l.setColumns(e)}),(0,_.watch)(()=>s.columns.value,e=>{let t=T(e);t!==w.value&&(l.clearSelection?.(),k.updateSelection?.(new Set,`programmatic`),t===`radio`?l.setSelectionMode?.(`single`):t===`checkbox`&&l.setSelectionMode?.(`multi`),w.value=t)}),(0,_.watch)(()=>r.loading,e=>{s.__internal.setLoading(e)}),(0,_.watch)(()=>a.value,e=>{l.updateConfig(e)}),(0,_.watch)(()=>r.renderer,async(e,t)=>{e!==t&&g.value&&await j(e)}),(0,_.watch)([()=>s.data.value,()=>s.columns.value],()=>{o.debug(`Data or columns changed, Vue will handle re-render`)},{deep:!1});let Y=null;return(0,_.onMounted)(()=>{d.value&&(Y=new ResizeObserver(e=>{for(let t of e){let{width:e,height:n}=t.contentRect;l.resizeRenderer?.(e,n)}}),Y.observe(d.value))}),(0,_.onUnmounted)(()=>{Y&&Y.disconnect(),h.forEach(e=>{try{e()}catch(e){o.warn(`Error cleaning up listener`,e)}}),h.length=0}),(0,_.watch)(()=>r.plugins,async e=>{let t=new Set((e||[]).map(e=>e.name)),n=C.value;for(let e of n)if(!t.has(e))try{await l.unloadPlugin?.(e)}catch(t){o.warn(`Failed to unload plugin ${e}:`,t)}let i=new Map((e||[]).map(e=>[e.name,e]));for(let e of t)if(!n.has(e)){let t=i.get(e);if(t)try{await l.loadPlugin?.(t)}catch(t){o.warn(`Failed to load plugin ${e}:`,t)}}if(C.value=t,r.columns&&r.columns.length>0)try{l.setColumns(r.columns)}catch(e){o.warn(`Failed to re-apply columns after plugin change:`,e)}},{deep:!1}),t({switchRenderer:j,initializeRenderer:A,getAvailableRenderers:()=>l.getAvailableRenderers?.()||[],getCurrentRenderer:()=>l.getRenderer?.()||`unknown`,renderNow:()=>l.renderWithActiveRenderer?.(),gridState:s,api:l}),(e,t)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{ref_key:`gridContainer`,ref:u,class:(0,_.normalizeClass)(D.value),style:(0,_.normalizeStyle)(E.value),role:`grid`,"aria-label":`Data grid with ${(0,_.unref)(s).data.value.visibleRows.length} rows using ${r.renderer} renderer`,"aria-rowcount":(0,_.unref)(s).data.value.visibleRows.length,"aria-colcount":(0,_.unref)(s).columns.value.length,"data-renderer":r.renderer},[(0,_.unref)(s).loading.value?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,ka,[...t[0]||=[(0,_.createElementVNode)(`div`,{class:`flex items-center space-x-2`},[(0,_.createElementVNode)(`div`,{class:`animate-spin w-4 h-4 border-2 border-[var(--ht-primary)] border-t-transparent rounded-full`}),(0,_.createElementVNode)(`span`,{class:`text-[var(--ht-text-muted)]`},`Loading...`)],-1)]])):(0,_.unref)(s).error.value?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,Aa,[(0,_.createElementVNode)(`div`,ja,[t[1]||=(0,_.createElementVNode)(`div`,{class:`text-[var(--ht-danger)] mb-2`},`⚠️ Grid Error`,-1),(0,_.createElementVNode)(`div`,Ma,(0,_.toDisplayString)((0,_.unref)(s).error.value),1)])])):v.value?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,Na,[(0,_.createElementVNode)(`div`,Pa,[t[3]||=(0,_.createElementVNode)(`div`,{class:`text-[var(--ht-danger)] mb-2`},`⚠️ Renderer Error`,-1),(0,_.createElementVNode)(`div`,Fa,(0,_.toDisplayString)(v.value),1),(0,_.createVNode)(Q,{size:`sm`,variant:`primary`,onClick:A},{default:(0,_.withCtx)(()=>[...t[2]||=[(0,_.createTextVNode)(`Retry`,-1)]]),_:1})])])):(0,_.createCommentVNode)(``,!0),(0,_.createVNode)(Ea,{api:(0,_.unref)(l)},null,8,[`api`]),O.value?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:3,ref_key:`rendererContainer`,ref:d,class:(0,_.normalizeClass)([`h-full w-full ht-renderer-container`,`ht-renderer-${r.renderer}`])},[(0,_.createElementVNode)(`div`,{ref_key:`rendererHost`,ref:f,class:`h-full w-full`},null,512),(0,_.unref)(s).data.value.visibleRows.length===0?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,Ia,[(0,_.createElementVNode)(`div`,La,[t[4]||=(0,_.createElementVNode)(`div`,{class:`text-4xl mb-2`},`📄`,-1),t[5]||=(0,_.createElementVNode)(`div`,null,`No data available`,-1),(0,_.createElementVNode)(`div`,Ra,`Renderer: `+(0,_.toDisplayString)(r.renderer),1)])])):(0,_.createCommentVNode)(``,!0)],2)):(0,_.createCommentVNode)(``,!0),(0,_.createVNode)(na,{ref_key:`keyboardShortcutsRef`,ref:p,"show-shortcuts":y.value,"show-help-hint":r.keyboardHelpHint,"enable-editing":P.value.editing,"enable-selection":P.value.selection,onShow:M,onClose:N},null,8,[`show-shortcuts`,`show-help-hint`,`enable-editing`,`enable-selection`]),(0,_.createVNode)(ia,{ref_key:`accessibilityAnnouncerRef`,ref:m},null,512),(0,_.createVNode)(pa,{visible:b.value,message:x.value,type:S.value,duration:4e3,onClose:ne},null,8,[`visible`,`message`,`type`])],14,Oa))}}),Ba=$(za,[[`__scopeId`,`data-v-98853d3d`]]),Va={data:[],columns:[],plugins:[],height:400,showKeyboardShortcuts:!1,keyboardHelpHint:!1};function Ha(e={}){let{props:t,data:n,columns:r,plugins:i,height:a,keyboardHelpHint:o,loggerModule:s=`HappyTable`}=e,l=c.createLogger(s),u=(0,_.reactive)({...Va,...t??{}});return n!==void 0&&(u.data=n),r!==void 0&&(u.columns=r),i!==void 0&&(u.plugins=i),a!==void 0&&(u.height=a),o!==void 0&&(u.keyboardHelpHint=o),{gridProps:u,updateGridProps:e=>{Object.assign(u,e)},logger:l}}function Ua(e){let{on:t,off:n}=e,r=(e,n)=>t(e,n),i=(e,r)=>{t(e,t=>{r(t),n(e)})};return{onEvent:r,onceEvent:i,onCellClick:e=>t(`cell-click`,e),onceCellClick:e=>i(`cell-click`,e),offCellClick:()=>n(`cell-click`),onCellDoubleClick:e=>t(`cell-double-click`,e),offCellDoubleClick:()=>n(`cell-double-click`),onCellRightClick:e=>t(`cell-right-click`,e),offCellRightClick:()=>n(`cell-right-click`),onRowClick:e=>t(`row-click`,e),onceRowClick:e=>i(`row-click`,e),offRowClick:()=>n(`row-click`),onRowSelect:e=>t(`row-select`,e),offRowSelect:()=>n(`row-select`),onMultiSortChange:e=>t(`multi-sort-change`,e),offMultiSortChange:()=>n(`multi-sort-change`),onFilterChange:e=>t(`filter-change`,e),offFilterChange:()=>n(`filter-change`),onScroll:e=>t(`scroll`,e),offScroll:()=>n(`scroll`),onColumnResizeStart:e=>t(`column-resize-start`,e),onColumnResize:e=>t(`column-resize`,e)}}var Wa=class{name=`excel`;interactionContract;options;constructor(e={}){this.options=e;let t=et(`excel-renderer-stub`);this.interactionContract={updateSelection:(e,t)=>{},setActive:e=>{},ensureVisible:(e,t)=>{},toggleEditMode:async(e,t)=>!1,registerEventEmitter:e=>{t.registerEventEmitter(e)},updateScrollPosition:e=>{},refresh:()=>{},emit:(e,t)=>{},registerCoreCallbacks:e=>{},destroy:()=>{}}}async mount(e,t){throw Error(`ExcelRenderer is not available. Please install the Excel plugin to use Excel-style rendering.
Installation: npm install @happy-table/excel-plugin
Usage: import { excelPlugin } from "@happy-table/excel-plugin"
       useGridState(config, [excelPlugin])`)}async unmount(){}render(e,t,n){throw Error(`ExcelRenderer stub cannot render. Please install the Excel plugin.`)}resize(e,t){}getConfigSchema(){return{grid:{type:`object`,description:`Excel-style grid configuration`,properties:{showGridLines:{type:`boolean`,default:!0},showRowHeaders:{type:`boolean`,default:!0},showColumnHeaders:{type:`boolean`,default:!0},headerStyle:{type:`string`,enum:[`excel`,`google-sheets`],default:`excel`}}},selection:{type:`object`,description:`Selection behavior configuration`,properties:{multiRange:{type:`boolean`,default:!0},showFillHandle:{type:`boolean`,default:!0},enableRangeSelection:{type:`boolean`,default:!0}}},editing:{type:`object`,description:`Cell editing configuration`,properties:{enableInCellEditing:{type:`boolean`,default:!0},enableFormulaBar:{type:`boolean`,default:!0},autoCommitOnEnter:{type:`boolean`,default:!0}}}}}updateConfig(e){Object.assign(this.options,e)}};function Ga(e={}){return new Wa(e)}const Ka={name:`@happy-table/excel-plugin`,version:`^1.0.0`,description:`Excel-style grid renderer with advanced cell interactions`,features:[`Excel-style grid lines and headers`,`Multi-range selection`,`Fill handle for cell dragging`,`In-cell editing with formula support`,`Excel-style keyboard navigation`,`A1 coordinate system`,`Formula bar`,`Cell merging (future)`,`Conditional formatting (future)`],installation:`npm install @happy-table/excel-plugin`,usage:`
import { createExcelPlugin } from '@happy-table/excel-plugin'

const excelPlugin = createExcelPlugin({
  grid: { showGridLines: true },
  selection: { multiRange: true },
  editing: { enableFormulaBar: true }
})

const gridState = useGridState(config, [excelPlugin])
  `};var qa=class{keyboardNavEnabled=!0;mouseNavEnabled=!0;editMode=!1;currentFocus=null;isDestroyed=!1;interactionContract;gridAPI;constructor(e,t){this.interactionContract=e,this.gridAPI=t,this.setupEventListeners()}initialize(e){this.isDestroyed||(e.setAttribute(`role`,`grid`),e.setAttribute(`tabindex`,`0`),this.gridAPI.initializeKeyboardHandling?this.gridAPI.initializeKeyboardHandling(e):this.enableKeyboardNavigation(e),this.enableMouseInteractions(e))}enableKeyboardNavigation(e){if(!this.keyboardNavEnabled)return;let t=e=>{this.handleKeyboardEvent(e)};e.addEventListener(`keydown`,t),e.__cleanup=()=>{e.removeEventListener(`keydown`,t)}}enableMouseInteractions(e){if(!this.mouseNavEnabled)return;let t=e=>{this.handleMouseEvent(e,`click`)},n=e=>{this.handleMouseEvent(e,`doubleClick`)},r=e=>{this.handleMouseEvent(e,`contextMenu`)};e.addEventListener(`click`,t),e.addEventListener(`dblclick`,n),e.addEventListener(`contextmenu`,r),e.__cleanup=()=>{e.removeEventListener(`click`,t),e.removeEventListener(`dblclick`,n),e.removeEventListener(`contextmenu`,r)}}handleKeyboardEvent(e){if(!this.keyboardNavEnabled||this.isDestroyed||this.gridAPI.handleKeyboardEvent&&this.gridAPI.handleKeyboardEvent(e))return;let t=this.getNavigationDirection(e);switch(t&&(e.preventDefault(),this.navigateCell(t)),e.key){case`Enter`:this.currentFocus&&(e.preventDefault(),this.activateCell(this.currentFocus));break;case`Escape`:this.editMode&&(e.preventDefault(),this.exitEditMode());break;case` `:this.currentFocus&&!this.editMode&&(e.preventDefault(),this.toggleCellSelection(this.currentFocus));break}}handleMouseEvent(e,t){if(!this.mouseNavEnabled||this.isDestroyed)return;let n=this.getCellFromEvent(e);if(n)switch(t){case`click`:this.handleCellClick(e,n.position,n.rowData,n.columnDef);break;case`doubleClick`:this.handleCellDoubleClick(e,n.position,n.rowData,n.columnDef);break;case`contextMenu`:this.handleCellRightClick(e,n.position,n.rowData,n.columnDef);break}}getNavigationDirection(e){switch(e.key){case`ArrowUp`:return`up`;case`ArrowDown`:return`down`;case`ArrowLeft`:return`left`;case`ArrowRight`:return`right`;case`Home`:return`home`;case`End`:return`end`;case`PageUp`:return`pageUp`;case`PageDown`:return`pageDown`;default:return null}}navigateCell(e){if(!this.currentFocus){this.setFocus({rowIndex:0,columnIndex:0,rowId:`0`,columnId:`col-0`});return}let t=null;switch(e){case`up`:this.currentFocus.rowIndex>0&&(t={...this.currentFocus,rowIndex:this.currentFocus.rowIndex-1,rowId:String(this.currentFocus.rowIndex-1)});break;case`down`:t={...this.currentFocus,rowIndex:this.currentFocus.rowIndex+1,rowId:String(this.currentFocus.rowIndex+1)};break;case`left`:this.currentFocus.columnIndex>0&&(t={...this.currentFocus,columnIndex:this.currentFocus.columnIndex-1,columnId:`col-${this.currentFocus.columnIndex-1}`});break;case`right`:t={...this.currentFocus,columnIndex:this.currentFocus.columnIndex+1,columnId:`col-${this.currentFocus.columnIndex+1}`};break;case`home`:t={...this.currentFocus,columnIndex:0,columnId:`col-0`};break;case`end`:break}t&&this.setFocus(t)}setFocus(e){this.currentFocus=e,this.interactionContract.setActive(e.rowId),this.interactionContract.ensureVisible(e.rowId,`smooth`)}activateCell(e){this.interactionContract.toggleEditMode(e.rowId,`enter`),this.editMode=!0}exitEditMode(){this.currentFocus&&this.interactionContract.toggleEditMode(this.currentFocus.rowId,`exit`),this.editMode=!1}toggleCellSelection(e){let t=new Set([e.rowId]);this.interactionContract.updateSelection(t,`user`)}handleCellClick(e,t,n,r){this.setFocus(t),this.interactionContract.emit?.(`cell-click`,{row:n,column:r,value:n[r.field]})}handleCellDoubleClick(e,t,n,r){this.activateCell(t),this.interactionContract.emit?.(`cell-double-click`,{row:n,column:r,value:n[r.field]})}handleCellRightClick(e,t,n,r){e.preventDefault(),this.interactionContract.emit?.(`cell-right-click`,{row:n,column:r,value:n[r.field]})}getCellFromEvent(e){let t=e.target.closest(`[data-cell-id]`);if(!t)return null;let n=t.getAttribute(`data-cell-id`),r=t.getAttribute(`data-row-id`),i=t.getAttribute(`data-column-id`);return!n||!r||!i?null:{position:{rowIndex:parseInt(r,10),columnIndex:parseInt(i,10),rowId:r,columnId:i},rowData:{},columnDef:{}}}setupEventListeners(){this.interactionContract.registerEventEmitter((e,t)=>{this.gridAPI.emit(e,t)})}setKeyboardNavigationEnabled(e){this.keyboardNavEnabled=e}setMouseInteractionsEnabled(e){this.mouseNavEnabled=e}getCurrentFocus(){return this.currentFocus}isInEditMode(){return this.editMode}destroy(){this.isDestroyed=!0,this.currentFocus=null,this.editMode=!1}};function Ja(e,t){return new qa(e,t)}const Ya={get basic(){return[d.createSortingPlugin({enableMultiSort:!1}),l.columnManagementPlugin,f.filteringPlugin,p.selectionPlugin,h.keyboardNavigationPlugin]},get enhanced(){return[d.createSortingPlugin({enableMultiSort:!0}),f.filteringPlugin,p.selectionPlugin,l.columnManagementPlugin,h.keyboardNavigationPlugin]},get full(){return[d.createSortingPlugin({enableMultiSort:!0}),f.filteringPlugin,p.selectionPlugin,l.columnManagementPlugin,m.cellEditingPlugin,h.keyboardNavigationPlugin]},get editing(){return[d.createSortingPlugin({enableMultiSort:!1}),f.filteringPlugin,p.selectionPlugin,m.cellEditingPlugin,h.keyboardNavigationPlugin]},get accessible(){return[d.createSortingPlugin({enableMultiSort:!1}),f.filteringPlugin,p.selectionPlugin,h.keyboardNavigationPlugin]}},Xa={sorting:()=>Promise.resolve().then(()=>require(`./sorting-plugin-JKNp3Dep.cjs`)).then(e=>e.sortingPlugin),filtering:()=>Promise.resolve().then(()=>require(`./filtering-plugin-Drfsf5mC.cjs`)).then(e=>e.filteringPlugin),selection:()=>Promise.resolve().then(()=>require(`./selection-plugin-DeG9rV5S.cjs`)).then(e=>e.selectionPlugin),columnManagement:()=>Promise.resolve().then(()=>require(`./column-management-plugin-oGytwPaw.cjs`)).then(e=>e.columnManagementPlugin),cellEditing:()=>Promise.resolve().then(()=>require(`./cell-editing-plugin-D3h_Fi--.cjs`)).then(e=>e.cellEditingPlugin),keyboardNavigation:()=>Promise.resolve().then(()=>require(`./keyboard-navigation-plugin-DOp325n_.cjs`)).then(e=>e.keyboardNavigationPlugin),dragDrop:()=>Promise.resolve().then(()=>require(`./drag-drop-plugin-06Xfd4T_.cjs`)).then(e=>e.dragDropPlugin)};var Za=(0,_.defineComponent)({__name:`CellTextEditor`,props:{value:{type:[String,Number,Boolean,Date,null]},row:{},column:{},cellRect:{},gridAPI:{}},emits:[`update:value`,`commit`,`cancel`],setup(e,{expose:t,emit:n}){let r=e,i=n,a=(0,_.ref)(),o=(0,_.ref)(String(r.value||``)),s=(0,_.computed)(()=>({position:`absolute`,left:`${r.cellRect.left}px`,top:`${r.cellRect.top}px`,width:`${r.cellRect.width}px`,height:`${r.cellRect.height}px`,zIndex:1e3})),c=e=>{let t=String(e);o.value=t,i(`update:value`,t),r.gridAPI?.updateCellEditValue&&r.gridAPI.updateCellEditValue(t)},l=e=>{switch(e.key){case`Enter`:e.shiftKey||(e.preventDefault(),e.stopPropagation(),i(`commit`));break;case`Escape`:e.preventDefault(),e.stopPropagation(),i(`cancel`);break;case`Tab`:e.preventDefault(),e.stopPropagation(),i(`commit`);break}},u=()=>{i(`commit`)},d=()=>{let e=a.value?.$el?.querySelector(`input`);e&&(e.focus(),e.select())};return(0,_.onMounted)(async()=>{await(0,_.nextTick)(),d()}),t({focus:d}),(t,n)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{style:(0,_.normalizeStyle)(s.value),class:`ht-cell-text-editor`},[(0,_.createVNode)(ft,{ref_key:`inputRef`,ref:a,"model-value":o.value,type:`text`,variant:`default`,size:`md`,placeholder:e.column.placeholder||`Enter ${e.column.title}`,maxlength:e.column.maxLength,autocomplete:`off`,class:`ht-cell-editor-input`,"onUpdate:modelValue":c,onKeydown:l,onBlur:u},null,8,[`model-value`,`placeholder`,`maxlength`])],4))}}),Qa=$(Za,[[`__scopeId`,`data-v-2f4c8191`]]),$a=(0,_.defineComponent)({__name:`CellNumberEditor`,props:{value:{type:[String,Number,Boolean,Date,null]},row:{},column:{},cellRect:{},gridAPI:{}},emits:[`update:value`,`commit`,`cancel`],setup(e,{expose:t,emit:n}){let r=e,i=n,a=(0,_.ref)(),o=(0,_.ref)(d(r.value)),s=(0,_.ref)(!1),c=(0,_.ref)(``),l=(0,_.computed)(()=>({position:`absolute`,left:`${r.cellRect.left}px`,top:`${r.cellRect.top}px`,width:`${r.cellRect.width}px`,height:`${r.cellRect.height}px`,zIndex:1e3})),u=(0,_.computed)(()=>s.value?`error`:`default`);function d(e){if(e==null||e===``)return``;let t=Number(e);return isNaN(t)?String(e):r.column.decimals===void 0?t:Number(t.toFixed(r.column.decimals))}function f(e){if(e===``||e==null)return null;let t=Number(e);return isNaN(t)?null:t}function p(e){if(e===``)return{valid:!0};let t=Number(e);return isNaN(t)?{valid:!1,message:`Must be a valid number`}:r.column.min!==void 0&&t<r.column.min?{valid:!1,message:`Must be at least ${r.column.min}`}:r.column.max!==void 0&&t>r.column.max?{valid:!1,message:`Must be at most ${r.column.max}`}:{valid:!0}}let m=e=>{o.value=e;let t=p(e);s.value=!t.valid,c.value=t.message||``;let n=f(e);i(`update:value`,n),r.gridAPI?.updateCellEditValue&&r.gridAPI.updateCellEditValue(n)},h=e=>{switch(e.key){case`Enter`:e.shiftKey||(e.preventDefault(),e.stopPropagation(),s.value||i(`commit`));break;case`Escape`:e.preventDefault(),e.stopPropagation(),i(`cancel`);break;case`Tab`:e.preventDefault(),e.stopPropagation(),s.value||i(`commit`);break;case`ArrowUp`:e.preventDefault(),v(1);break;case`ArrowDown`:e.preventDefault(),v(-1);break}},g=()=>{s.value||i(`commit`)},v=e=>{let t=f(o.value)||0,n=r.column.step||1,i=t+e*n;r.column.min!==void 0&&(i=Math.max(i,r.column.min)),r.column.max!==void 0&&(i=Math.min(i,r.column.max)),o.value=d(i),m(o.value)},y=()=>{let e=a.value?.$el?.querySelector(`input`);e&&(e.focus(),e.select())};return(0,_.watch)(()=>r.value,e=>{o.value=d(e),s.value=!1,c.value=``}),(0,_.onMounted)(async()=>{await(0,_.nextTick)(),y()}),t({focus:y}),(t,n)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{style:(0,_.normalizeStyle)(l.value),class:`ht-cell-number-editor`},[(0,_.createVNode)(ft,{ref_key:`inputRef`,ref:a,"model-value":o.value,type:`number`,variant:`default`,size:`md`,state:u.value,placeholder:e.column.placeholder||`Enter ${e.column.title}`,autocomplete:`off`,class:`ht-cell-editor-input`,"onUpdate:modelValue":m,onKeydown:h,onBlur:g},null,8,[`model-value`,`state`,`placeholder`]),s.value&&c.value?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:0,class:`absolute bg-[var(--ht-danger)] text-[var(--ht-text-inverse)] text-xs px-2 py-1 rounded shadow-lg z-[1001]`,style:(0,_.normalizeStyle)({left:`${e.cellRect.left}px`,top:`${e.cellRect.bottom+2}px`,maxWidth:`${e.cellRect.width}px`})},(0,_.toDisplayString)(c.value),5)):(0,_.createCommentVNode)(``,!0)],4))}}),eo=$($a,[[`__scopeId`,`data-v-bcce32c7`]]),to={class:`ht-select-container`},no=[`aria-expanded`],ro={class:`truncate flex-1`},io={key:0,class:`p-2 border-b border-[var(--ht-border)]`},ao={class:`max-h-40 overflow-y-auto`},oo=[`aria-selected`,`onClick`],so={class:`truncate`},co={key:0,class:`w-4 h-4 ml-2 flex-shrink-0`,fill:`currentColor`,viewBox:`0 0 20 20`},lo={key:0,class:`px-3 py-2 text-sm text-[var(--ht-text-muted)] text-center`},uo=(0,_.defineComponent)({__name:`CellSelectEditor`,props:{value:{type:[String,Number,Boolean,Date,null]},row:{},column:{},cellRect:{},gridAPI:{}},emits:[`update:value`,`commit`,`cancel`],setup(e,{expose:t,emit:n}){let r=e,i=n,a=(0,_.ref)(),o=(0,_.ref)(),s=(0,_.ref)(r.value),c=(0,_.ref)(!1),l=(0,_.ref)(``),u=(0,_.ref)(-1),d=(0,_.computed)(()=>({position:`absolute`,left:`${r.cellRect.left}px`,top:`${r.cellRect.top}px`,width:`${r.cellRect.width}px`,minWidth:`${Math.max(r.cellRect.width,150)}px`,zIndex:1e3})),f=(0,_.computed)(()=>({position:`absolute`,left:`${r.cellRect.left}px`,top:`${r.cellRect.bottom}px`,width:`${Math.max(r.cellRect.width,150)}px`,maxHeight:`200px`,zIndex:1001})),p=(0,_.computed)(()=>r.column.options?r.column.options.map(e=>{if(typeof e==`string`||typeof e==`number`)return{value:e,label:String(e)};let t=e;return{value:t.value,label:t.label||String(t.value),disabled:t.disabled||!1}}):[]),m=(0,_.computed)(()=>{if(!l.value)return p.value;let e=l.value.toLowerCase();return p.value.filter(t=>t.label.toLowerCase().includes(e)||String(t.value).toLowerCase().includes(e))}),h=(0,_.computed)(()=>p.value.find(e=>e.value===s.value)),g=(0,_.computed)(()=>h.value?.label||String(s.value||``)),v=(0,_.computed)(()=>[`ht-cell-editor`,`ht-select-editor`,`px-3 py-1`,`border-2 border-[var(--ht-primary)]`,`bg-[var(--ht-bg)]`,`text-[var(--ht-text)]`,`text-sm`,`outline-none`,`rounded`,`shadow-md`,`cursor-pointer`,`flex items-center justify-between`]),y=(0,_.computed)(()=>[`ht-select-dropdown`,`border border-[var(--ht-border)]`,`bg-[var(--ht-bg)]`,`rounded`,`shadow-lg`,`overflow-hidden`]),b=()=>{c.value=!0,l.value=``,u.value=m.value.findIndex(e=>e.value===s.value),u.value===-1&&m.value.length>0&&(u.value=0)},x=()=>{c.value=!1,u.value=-1,l.value=``},S=e=>{e.disabled||(s.value=e.value,i(`update:value`,e.value),r.gridAPI?.updateCellEditValue&&r.gridAPI.updateCellEditValue(e.value),x(),i(`commit`))},C=e=>{switch(e.key){case`Enter`:if(e.preventDefault(),e.stopPropagation(),c.value&&u.value>=0){let e=m.value[u.value];e&&!e.disabled&&S(e)}else c.value||b();break;case`Escape`:e.preventDefault(),e.stopPropagation(),c.value?x():i(`cancel`);break;case`Tab`:e.preventDefault(),e.stopPropagation(),x(),i(`commit`);break;case`ArrowDown`:e.preventDefault(),c.value?(u.value=Math.min(u.value+1,m.value.length-1),w(u.value)):b();break;case`ArrowUp`:e.preventDefault(),c.value&&(u.value=Math.max(u.value-1,0),w(u.value));break;case`Space`:c.value||(e.preventDefault(),b());break;default:if(e.key.length===1&&c.value){l.value+=e.key;let t=m.value.findIndex(e=>e.label.toLowerCase().startsWith(l.value.toLowerCase()));t>=0&&(u.value=t,w(u.value))}break}},w=e=>{if(o.value){let t=o.value.querySelectorAll(`.ht-select-option`)[e];t&&t.scrollIntoView({block:`nearest`})}},T=()=>{c.value?x():b()},E=e=>{let t=e.target;a.value&&!a.value.contains(t)&&o.value&&!o.value.contains(t)&&(x(),i(`commit`))},D=()=>{a.value&&a.value.focus()};return(0,_.watch)(()=>r.value,e=>{s.value=e}),(0,_.onMounted)(async()=>{await(0,_.nextTick)(),D(),document.addEventListener(`mousedown`,E)}),t({focus:D,cleanup:()=>{document.removeEventListener(`mousedown`,E)}}),(t,n)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,to,[(0,_.createElementVNode)(`div`,{ref_key:`selectRef`,ref:a,class:(0,_.normalizeClass)(v.value),style:(0,_.normalizeStyle)(d.value),tabindex:`0`,role:`combobox`,"aria-expanded":c.value,"aria-haspopup":!0,onClick:T,onKeydown:C},[(0,_.createElementVNode)(`span`,ro,(0,_.toDisplayString)(g.value),1),((0,_.openBlock)(),(0,_.createElementBlock)(`svg`,{class:(0,_.normalizeClass)([`w-4 h-4 ml-2 flex-shrink-0 transform transition-transform`,{"rotate-180":c.value}]),fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},[...n[2]||=[(0,_.createElementVNode)(`path`,{"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M19 9l-7 7-7-7`},null,-1)]],2))],46,no),c.value?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:0,ref_key:`dropdownRef`,ref:o,class:(0,_.normalizeClass)(y.value),style:(0,_.normalizeStyle)(f.value),role:`listbox`},[e.column.searchable?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,io,[(0,_.withDirectives)((0,_.createElementVNode)(`input`,{"onUpdate:modelValue":n[0]||=e=>l.value=e,type:`text`,class:`w-full px-2 py-1 text-sm border border-[var(--ht-border)] rounded outline-none`,placeholder:`Search options...`,onKeydown:n[1]||=(0,_.withModifiers)(()=>{},[`stop`])},null,544),[[_.vModelText,l.value]])])):(0,_.createCommentVNode)(``,!0),(0,_.createElementVNode)(`div`,ao,[((0,_.openBlock)(!0),(0,_.createElementBlock)(_.Fragment,null,(0,_.renderList)(m.value,(e,t)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:`${e.value}-${t}`,class:(0,_.normalizeClass)([`ht-select-option px-3 py-2 text-sm cursor-pointer hover:bg-[var(--ht-cell-hover)] flex items-center justify-between`,{"bg-[var(--ht-primary)] text-[var(--ht-text-inverse)]":t===u.value,"text-[var(--ht-text-muted)] cursor-not-allowed":e.disabled,"bg-[var(--ht-cell-selected)]":e.value===s.value&&t!==u.value}]),role:`option`,"aria-selected":e.value===s.value,onClick:t=>S(e)},[(0,_.createElementVNode)(`span`,so,(0,_.toDisplayString)(e.label),1),e.value===s.value?((0,_.openBlock)(),(0,_.createElementBlock)(`svg`,co,[...n[3]||=[(0,_.createElementVNode)(`path`,{"fill-rule":`evenodd`,d:`M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z`,"clip-rule":`evenodd`},null,-1)]])):(0,_.createCommentVNode)(``,!0)],10,oo))),128)),m.value.length===0?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,lo,` No options available `)):(0,_.createCommentVNode)(``,!0)])],6)):(0,_.createCommentVNode)(``,!0)]))}}),fo=$(uo,[[`__scopeId`,`data-v-96d19957`]]),po={class:`ht-date-container relative`},mo=[`value`,`placeholder`],ho=(0,_.defineComponent)({__name:`CellDateEditor`,props:{value:{type:[String,Number,Boolean,Date,null]},row:{},column:{},cellRect:{},gridAPI:{}},emits:[`update:value`,`commit`,`cancel`],setup(e,{expose:t,emit:n}){let r=e,i=n;function a(e){return e instanceof Date||typeof e==`string`||e==null?p(e):``}let o=(0,_.ref)(),s=(0,_.ref)(a(r.value)),c=(0,_.ref)(!1),l=(0,_.ref)(``),u=(0,_.computed)(()=>({position:`absolute`,left:`${r.cellRect.left}px`,top:`${r.cellRect.top}px`,width:`${r.cellRect.width}px`,height:`${r.cellRect.height}px`,zIndex:1e3})),d=(0,_.computed)(()=>[`ht-cell-editor`,`ht-date-editor`,`px-3 py-1`,`border-2`,c.value?`border-[var(--ht-danger)]`:`border-[var(--ht-primary)]`,`bg-[var(--ht-bg)]`,`text-[var(--ht-text)]`,`text-sm`,`outline-none`,`rounded`,`shadow-md`]),f=(0,_.computed)(()=>{let e={type:`date`,autocomplete:`off`};return r.column.minDate&&(e.min=p(r.column.minDate)),r.column.maxDate&&(e.max=p(r.column.maxDate)),e});function p(e){if(!e)return``;try{let t=e instanceof Date?e:new Date(e);return isNaN(t.getTime())?``:t.toISOString().split(`T`)[0]||``}catch{return``}}function m(e){if(!e)return null;try{let t=new Date(`${e}T00:00:00`);return isNaN(t.getTime())?null:t}catch{return null}}function h(e){if(!e)return``;try{let t=r.column.locale||`en-US`,n=r.column.dateOptions||{year:`numeric`,month:`short`,day:`numeric`};return e.toLocaleDateString(t,n)}catch{return e.toISOString().split(`T`)[0]||``}}function g(e){if(!e)return{valid:!0};let t=m(e);if(!t)return{valid:!1,message:`Invalid date format`};if(r.column.minDate){let e=new Date(r.column.minDate);if(t<e)return{valid:!1,message:`Date must be after ${h(e)}`}}if(r.column.maxDate){let e=new Date(r.column.maxDate);if(t>e)return{valid:!1,message:`Date must be before ${h(e)}`}}return{valid:!0}}let v=e=>{let t=e.target;s.value=t.value;let n=g(t.value);c.value=!n.valid,l.value=n.message||``;let a=m(t.value);i(`update:value`,a),r.gridAPI?.updateCellEditValue&&r.gridAPI.updateCellEditValue(a)},y=e=>{switch(e.key){case`Enter`:e.shiftKey||(e.preventDefault(),e.stopPropagation(),c.value||i(`commit`));break;case`Escape`:e.preventDefault(),e.stopPropagation(),i(`cancel`);break;case`Tab`:e.preventDefault(),e.stopPropagation(),c.value||i(`commit`);break;case`ArrowDown`:case`ArrowUp`:break}},b=()=>{c.value||i(`commit`)},x=()=>{if(s.value=p(new Date),o.value){o.value.value=s.value;let e=new Event(`input`,{bubbles:!0});o.value.dispatchEvent(e)}},S=()=>{if(s.value=``,o.value){o.value.value=``;let e=new Event(`input`,{bubbles:!0});o.value.dispatchEvent(e)}},C=()=>{o.value&&(o.value.focus(),o.value.showPicker?.())};return(0,_.watch)(()=>r.value,e=>{s.value=a(e),c.value=!1,l.value=``}),(0,_.onMounted)(async()=>{await(0,_.nextTick)(),C()}),t({focus:C}),(t,n)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,po,[(0,_.createElementVNode)(`input`,(0,_.mergeProps)({ref_key:`inputRef`,ref:o,value:s.value,class:d.value,style:u.value,placeholder:e.column.placeholder||`Select date`},f.value,{onInput:v,onKeydown:y,onBlur:b}),null,16,mo),e.column.showQuickActions===!1?(0,_.createCommentVNode)(``,!0):((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:0,class:`absolute flex gap-1 z-[1001]`,style:(0,_.normalizeStyle)({left:`${e.cellRect.right-80}px`,top:`${e.cellRect.bottom+2}px`})},[(0,_.createVNode)(Q,{type:`button`,size:`xs`,variant:`primary`,title:`Set to today`,onClick:x},{default:(0,_.withCtx)(()=>[...n[0]||=[(0,_.createTextVNode)(` Today `,-1)]]),_:1}),(0,_.createVNode)(Q,{type:`button`,size:`xs`,variant:`secondary`,title:`Clear date`,onClick:S},{default:(0,_.withCtx)(()=>[...n[1]||=[(0,_.createTextVNode)(` Clear `,-1)]]),_:1})],4)),c.value&&l.value?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{key:1,class:`absolute bg-[var(--ht-danger)] text-[var(--ht-text-inverse)] text-xs px-2 py-1 rounded shadow-lg z-[1001]`,style:(0,_.normalizeStyle)({left:`${e.cellRect.left}px`,top:`${e.cellRect.bottom+2}px`,maxWidth:`${e.cellRect.width}px`})},(0,_.toDisplayString)(l.value),5)):(0,_.createCommentVNode)(``,!0)]))}}),go=$(ho,[[`__scopeId`,`data-v-b92095db`]]),_o={key:0,class:`flex items-center gap-2`},vo={key:1,class:`flex items-center gap-2`},yo={class:`ht-toggle-container flex items-center gap-2`},bo=[`aria-checked`],xo={class:`text-sm text-[var(--ht-text)] select-none`},So={key:2,class:`flex gap-1`},Co=(0,_.defineComponent)({__name:`CellBooleanEditor`,props:{value:{type:[String,Number,Boolean,Date,null]},row:{},column:{},cellRect:{},gridAPI:{}},emits:[`update:value`,`commit`,`cancel`],setup(e,{expose:t,emit:n}){let r=e,i=n,a=(0,_.ref)(),o=(0,_.ref)(!!r.value),s=(0,_.computed)(()=>({position:`absolute`,left:`${r.cellRect.left}px`,top:`${r.cellRect.top}px`,width:`${r.cellRect.width}px`,height:`${r.cellRect.height}px`,zIndex:1e3})),c=(0,_.computed)(()=>[`ht-cell-editor`,`ht-boolean-editor`,`flex items-center justify-center`,`border-2 border-[var(--ht-primary)]`,`bg-[var(--ht-bg)]`,`rounded`,`shadow-md`]),l=(0,_.computed)(()=>r.column.booleanDisplay||`checkbox`),u=(0,_.computed)(()=>({true:r.column.trueLabel||`Yes`,false:r.column.falseLabel||`No`})),d=()=>{let e=!o.value;o.value=e,i(`update:value`,e),r.gridAPI?.updateCellEditValue&&r.gridAPI.updateCellEditValue(e),r.column.autoCommit!==!1&&(0,_.nextTick)(()=>{i(`commit`)})},f=e=>{o.value=e,i(`update:value`,e),r.gridAPI?.updateCellEditValue&&r.gridAPI.updateCellEditValue(e),r.column.autoCommit!==!1&&(0,_.nextTick)(()=>{i(`commit`)})},p=e=>{let t=e===!0;o.value=t,i(`update:value`,t),r.gridAPI?.updateCellEditValue&&r.gridAPI.updateCellEditValue(t),r.column.autoCommit!==!1&&(0,_.nextTick)(()=>{i(`commit`)})},m=e=>{switch(e.key){case`Enter`:case` `:e.preventDefault(),e.stopPropagation(),l.value===`buttons`?i(`commit`):d();break;case`Escape`:e.preventDefault(),e.stopPropagation(),i(`cancel`);break;case`Tab`:e.preventDefault(),e.stopPropagation(),i(`commit`);break;case`ArrowLeft`:case`ArrowDown`:l.value===`buttons`&&(e.preventDefault(),f(!1));break;case`ArrowRight`:case`ArrowUp`:l.value===`buttons`&&(e.preventDefault(),f(!0));break}},h=()=>{if(l.value===`buttons`){let e=a.value;e&&e.focus()}else{let e=a.value?.$el?.querySelector(`input`);e&&e.focus()}};return(0,_.watch)(()=>r.value,e=>{o.value=!!e}),(0,_.onMounted)(async()=>{await(0,_.nextTick)(),h()}),t({focus:h}),(e,t)=>((0,_.openBlock)(),(0,_.createElementBlock)(`div`,{class:(0,_.normalizeClass)(c.value),style:(0,_.normalizeStyle)(s.value),onKeydown:m},[l.value===`checkbox`?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,_o,[(0,_.createVNode)(yt,{ref_key:`checkboxRef`,ref:a,"model-value":o.value,variant:`default`,size:`md`,label:o.value?u.value.true:u.value.false,"onUpdate:modelValue":p},null,8,[`model-value`,`label`])])):l.value===`toggle`?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,vo,[(0,_.createElementVNode)(`div`,yo,[(0,_.createElementVNode)(`div`,{class:`ht-toggle relative inline-block w-10 h-6 cursor-pointer`,tabindex:`0`,role:`switch`,"aria-checked":o.value,onClick:d,onKeydown:m},[(0,_.createElementVNode)(`div`,{class:(0,_.normalizeClass)([`ht-toggle-bg w-full h-full rounded-full border-2 transition-colors duration-200`,o.value?`bg-[var(--ht-primary)] border-[var(--ht-primary)]`:`bg-[var(--ht-bg-subtle)] border-[var(--ht-border)]`])},null,2),(0,_.createElementVNode)(`div`,{class:(0,_.normalizeClass)([`ht-toggle-thumb absolute top-0.5 left-0.5 w-4 h-4 bg-[var(--color-ht-white)] rounded-full shadow-sm transform transition-transform duration-200`,{"translate-x-4":o.value}])},null,2)],40,bo),(0,_.createElementVNode)(`span`,xo,(0,_.toDisplayString)(o.value?u.value.true:u.value.false),1)])])):l.value===`buttons`?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,So,[(0,_.createVNode)(Q,{ref_key:`checkboxRef`,ref:a,type:`button`,size:`xs`,variant:o.value?`primary`:`secondary`,tabindex:`0`,onClick:t[0]||=e=>f(!0)},{default:(0,_.withCtx)(()=>[(0,_.createTextVNode)((0,_.toDisplayString)(u.value.true),1)]),_:1},8,[`variant`]),(0,_.createVNode)(Q,{type:`button`,size:`xs`,variant:o.value?`secondary`:`primary`,onClick:t[1]||=e=>f(!1)},{default:(0,_.withCtx)(()=>[(0,_.createTextVNode)((0,_.toDisplayString)(u.value.false),1)]),_:1},8,[`variant`])])):(0,_.createCommentVNode)(``,!0)],38))}}),wo=$(Co,[[`__scopeId`,`data-v-48e9b7a9`]]),To={key:0,class:`ht-cell-editor-overlay`,style:{position:`fixed`,top:`0`,left:`0`,"pointer-events":`none`,"z-index":`1000`}},Eo=(0,_.defineComponent)({__name:`CellEditorOverlay`,props:{containerElement:{},gridAPI:{}},setup(e,{expose:t}){let n=c.createLogger(`cell-editor-overlay`),r=e,i=(0,_.shallowRef)(null),a=(0,_.ref)(null),o=(0,_.ref)({}),s=(0,_.ref)(!1),l={text:Qa,number:eo,select:fo,date:go,boolean:wo},u=(0,_.computed)(()=>{if(!i.value)return null;let e=i.value.type||`text`;return l[e]||Qa}),d=(0,_.computed)(()=>r.containerElement||document.body),f=(e,t)=>{let r=document.querySelector(`[data-row-id="${e}"][data-column-id="${t}"]`);return r?r.getBoundingClientRect():(n.warn(`Cell not found: row=${e}, column=${t}`),null)},p=async e=>{m();let t=f(e.rowId,e.columnId);if(!t)return!1;let n=y(e.column);return o.value={value:e.value,row:e.row,column:e.column,cellRect:t,gridAPI:r.gridAPI,"onUpdate:value":h,onCommit:g,onCancel:v},i.value={type:n,rowId:e.rowId,columnId:e.columnId},s.value=!0,await(0,_.nextTick)(),a.value?.focus&&a.value.focus(),!0},m=()=>{a.value?.cleanup&&a.value.cleanup(),i.value=null,a.value=null,o.value={},s.value=!1},h=e=>{r.gridAPI.updateCellEditValue&&r.gridAPI.updateCellEditValue(e)},g=async()=>{r.gridAPI.commitCellEdit&&await r.gridAPI.commitCellEdit()&&m()},v=()=>{r.gridAPI.cancelCellEdit&&r.gridAPI.cancelCellEdit(),m()},y=e=>e.editor||e.editor&&r.gridAPI.getCellEditor&&r.gridAPI.getCellEditor(e.editor)?e.editor:e.dataType||`text`,b=e=>{a.value?.handleKeydown&&a.value.handleKeydown(e)||r.gridAPI.handleCellEditKeydown&&r.gridAPI.handleCellEditKeydown(e)},x=()=>{r.gridAPI.on&&(r.gridAPI.on(`cell-edit-start`,e=>{let t=r.gridAPI.getData().find(t=>(t.id||t._index)===e.rowId),n=r.columns?.find(t=>t.id===e.columnId);t&&n&&p({row:t,column:n,value:e.value,cellRect:new DOMRect(0,0,0,0)})}),r.gridAPI.on(`cell-edit-cancel`,()=>{m()}),r.gridAPI.on(`cell-edit-complete`,()=>{m()}))},S=()=>{if(!i.value||!o.value.cellRect)return;let e=f(i.value.rowId,i.value.columnId);e&&(o.value={...o.value,cellRect:e})},C=()=>{s.value&&S()},w=()=>{s.value&&S()};return x(),typeof window<`u`&&(window.addEventListener(`scroll`,C,{passive:!0}),window.addEventListener(`resize`,w,{passive:!0}),window.addEventListener(`keydown`,b,{capture:!0})),(0,_.onUnmounted)(()=>{m(),typeof window<`u`&&(window.removeEventListener(`scroll`,C),window.removeEventListener(`resize`,w),window.removeEventListener(`keydown`,b,{capture:!0}))}),t({showEditor:p,hideEditor:m,updatePosition:S,isVisible:(0,_.computed)(()=>s.value)}),(e,t)=>((0,_.openBlock)(),(0,_.createBlock)(_.Teleport,{to:d.value,disabled:!s.value},[s.value&&u.value&&i.value?((0,_.openBlock)(),(0,_.createElementBlock)(`div`,To,[((0,_.openBlock)(),(0,_.createBlock)((0,_.resolveDynamicComponent)(u.value),(0,_.mergeProps)({ref_key:`editorInstance`,ref:a},o.value,{value:o.value.value,row:o.value.row,column:o.value.column,"cell-rect":o.value.cellRect,"grid-a-p-i":o.value.gridAPI,style:{"pointer-events":`auto`},"onUpdate:value":o.value[`onUpdate:value`],onCancel:o.value.onCancel,onCommit:o.value.onCommit}),null,16,[`value`,`row`,`column`,`cell-rect`,`grid-a-p-i`,`onUpdate:value`,`onCancel`,`onCommit`]))])):(0,_.createCommentVNode)(``,!0)],8,[`to`,`disabled`]))}}),Do=$(Eo,[[`__scopeId`,`data-v-b18c51cc`]]),Oo=class{api;logger;constructor(){this.logger=c.createLogger({module:`Plugin`,operation:`base-plugin`})}install(e){this.api=e,this.logger=c.createLogger({module:`Plugin`,operation:this.name}),this.logger.info(`Plugin installed: ${this.name}`)}};const ko={default:{sensitivity:`variant`},caseInsensitive:{sensitivity:`base`},natural:{naturalSort:!0,sensitivity:`base`},naturalCaseSensitive:{naturalSort:!0,sensitivity:`variant`},chinese:{locale:`zh-CN`,sensitivity:`base`},strict:{sensitivity:`variant`},numericFirst:{naturalSort:!0,sensitivity:`base`}},Ao={"en-US":{locale:`en-US`,sensitivity:`base`},"zh-CN":{locale:`zh-CN`,sensitivity:`base`},"ja-JP":{locale:`ja-JP`,sensitivity:`base`},"ko-KR":{locale:`ko-KR`,sensitivity:`base`},"de-DE":{locale:`de-DE`,sensitivity:`base`},"fr-FR":{locale:`fr-FR`,sensitivity:`base`},"es-ES":{locale:`es-ES`,sensitivity:`base`}};function jo(e,t){return{...ko[e],...t}}const Mo=`1.1.0-renderer-system`,No={ADVANCED_VIRTUALIZATION:!0,PERFORMANCE_MONITORING:!0,MEMORY_MANAGEMENT:!0,BROWSER_OPTIMIZATION:!0,PLUGIN_SYSTEM:!0,CAPABILITY_SYSTEM:!0,RENDERER_SYSTEM:!0,DUAL_RENDERING:!0,EXCEL_SUPPORT:!0,DATA_PIPELINE:!0,KEYBOARD_NAVIGATION:!0,ACCESSIBILITY:!0};typeof window<`u`&&u.initializeBrowserOptimizations();const Po=`1.1.0`,Fo=`1.0.0`;function Io(e){return e?e===Po:!0}function Lo(e){return e?e===Fo:!0}function Ro(){return{apiVersion:Fo,supportedRenderers:[`table`,`excel`],defaultRenderer:`table`,features:{dynamicSwitching:!0,pluginProvided:!0,statePreservation:!0,hotSwapping:!0}}}const zo={table:(e,t)=>({data:e,columns:t,renderer:`table`,config:{virtualizationThreshold:1e3,enableVirtualization:!0}}),excel:(e,t)=>({data:e,columns:t,renderer:`excel`,config:{virtualizationThreshold:1e3,enableVirtualization:!0}}),highPerformance:(e,t)=>({data:e,columns:t,config:{virtualizationThreshold:100,enableVirtualization:!0,rowHeight:32,headerHeight:40},utilities:{memoryManagement:!0,performanceMonitoring:!0,dataPipeline:!0,browserOptimizations:!0}})};exports.AccessibilityAnnouncer=ia,exports.BasePlugin=Oo,exports.BrowserFeatures=u.BrowserFeatures,exports.CellBooleanEditor=wo,exports.CellDateEditor=go,exports.CellEditorOverlay=Do,exports.CellNumberEditor=eo,exports.CellSelectEditor=fo,exports.CellTextEditor=Qa,exports.DOMBatcher=oe,exports.DataGrid=Ba,exports.DataPipelineUtils=pe,exports.EXCEL_PLUGIN_INFO=Ka,exports.ElementPool=re,exports.EventDelegator=se,exports.GRID_EVENT_NAMES=Da,exports.HtButton=Q,exports.HtCheckbox=yt,exports.HtInput=ft,exports.HtRadio=Et,exports.HtSelect=An,exports.HtSelectContent=Jt,exports.HtSelectGroup=tn,exports.HtSelectItem=Qt,exports.HtSelectLabel=an,exports.HtSelectSeparator=cn,exports.HtSelectTrigger=Bt,exports.HtSelectValue=Ht,exports.KeyboardShortcuts=na,exports.LOCALE_PRESETS=Ao,exports.PLUGIN_API_VERSION=Po,exports.RENDERER_API_VERSION=Fo,exports.RendererRegistry=Pe,exports.SORT_PRESETS=ko,exports.UtilityFeatures=Ae,exports.benchmarkOperation=Y,exports.browserOptimizations=u.browserOptimizations,exports.cellEditingPlugin=m.cellEditingPlugin,exports.corePlugins=Xa,exports.createExcelRenderer=Ga,exports.createRendererRegistry=Ie,exports.createSortOptions=jo,exports.createTableInteractionHandler=Ja,exports.createTableRenderer=Wi,exports.createVirtualRowFactory=le,exports.detectPlatform=X,exports.dragDropPlugin=g.dragDropPlugin,exports.enhancedSortingPlugin=d.enhancedSortingPlugin,exports.features=No,exports.formatShortcut=_e,exports.formatShortcutSymbol=ve,exports.getAvailableRenderers=ze,exports.getCurrentRenderer=Re,exports.getModifierKeySymbol=ge,exports.getModifierKeyText=he,exports.getRendererSystemInfo=Ro,exports.getUtilityInfo=Me,exports.hasModifierKey=me,exports.initializeBrowserOptimizations=u.initializeBrowserOptimizations,exports.initializeUtilities=je,exports.isPluginCompatible=Io,exports.isRendererCompatible=Lo,exports.keyboardNavigationPlugin=h.keyboardNavigationPlugin,exports.pluginPresets=Ya,exports.quickStart=zo,exports.quickStartUtils=Ne,exports.selectionPlugin=p.selectionPlugin,exports.sortingPlugin=d.sortingPlugin,exports.switchRenderer=Le,exports.useAdvancedVirtualizer=z,exports.useDataPipeline=fe,exports.useGridEvents=Ua,exports.useGridState=Ze,exports.useHappyTable=Ha,exports.useHorizontalVirtualizer=R,exports.useMemoryManagement=W,exports.usePerformanceMonitoring=ne,exports.useThreePaneVirtualizer=B,exports.useVirtualizer=I,exports.version=`1.1.0-renderer-system`;
//# sourceMappingURL=happy-table.cjs.js.map